/*!
 * Joust 0.11.0+60.ga6bd36b
 * https://github.com/HearthSim/Joust
 */
var Joust=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=45)}([function(t,e){t.exports=React},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(2),o=(r.n(i),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),a=function(){function t(e,r,o,a,s,u,c,l){n(this,t),this._entities=e,this._entityTree=r,this._options=o,this._optionTree=a,this._time=s,this._choices=u,this._descriptors=c,this._diffs=l,this._entities||(this._entities=i.Map()),this._entityTree||(this._entityTree=i.Map()),this._options||(this._options=i.Map()),this._optionTree||(this._optionTree=i.Map()),void 0===this._time&&(this._time=null),this._choices||(this._choices=i.Map()),void 0===this._descriptors&&(this._descriptors=i.Stack()),this._diffs||(this._diffs=i.Set())}return o(t,[{key:"getEntity",value:function(t){return this.entities.get(t)}},{key:"getPlayer",value:function(t){return this.entities.filter(function(e){return!!e&&2===e.getCardType()&&e.playerId===t}).first()}},{key:"getPlayers",value:function(){return this.entities.filter(function(t){return!!t&&2===t.getCardType()}).toArray()}},{key:"getPlayerCount",value:function(){return this._entityTree.count()-+this._entityTree.has(0)}},{key:"apply",value:function(t){return t.applyTo(this)}},{key:"entities",get:function(){return this._entities}},{key:"entityTree",get:function(){return this._entityTree}},{key:"game",get:function(){return this.entities.get(1)}},{key:"options",get:function(){return this._options}},{key:"optionTree",get:function(){return this._optionTree}},{key:"time",get:function(){return this._time}},{key:"choices",get:function(){return this._choices}},{key:"descriptor",get:function(){return this.descriptors.peek()}},{key:"descriptors",get:function(){return this._descriptors}},{key:"diffs",get:function(){return this._diffs}}]),t}();e.a=a},function(t,e,r){!function(e,r){t.exports=r()}(0,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:C(t)}function r(t){return a(t)?t:A(t)}function n(t){return s(t)?t:D(t)}function i(t){return o(t)&&!u(t)?t:x(t)}function o(t){return!(!t||!t[ur])}function a(t){return!(!t||!t[cr])}function s(t){return!(!t||!t[lr])}function u(t){return a(t)||s(t)}function c(t){return!(!t||!t[fr])}function l(t){return t.value=!1,t}function f(t){t&&(t.value=!0)}function p(){}function h(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function d(t){return void 0===t.size&&(t.size=t.__iterate(g)),t.size}function y(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?d(t)+e:e}function g(){return!0}function v(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function m(t,e){return b(t,e,0)}function _(t,e){return b(t,e,e)}function b(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function w(t){this.next=t}function E(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function k(){return{value:void 0,done:!0}}function T(t){return!!j(t)}function O(t){return t&&"function"==typeof t.next}function S(t){var e=j(t);return e&&e.call(t)}function j(t){var e=t&&(wr&&t[wr]||t[Er]);if("function"==typeof e)return e}function I(t){return t&&"number"==typeof t.length}function C(t){return null===t||void 0===t?B():o(t)?t.toSeq():F(t)}function A(t){return null===t||void 0===t?B().toKeyedSeq():o(t)?a(t)?t.toSeq():t.fromEntrySeq():U(t)}function D(t){return null===t||void 0===t?B():o(t)?a(t)?t.entrySeq():t.toIndexedSeq():z(t)}function x(t){return(null===t||void 0===t?B():o(t)?a(t)?t.entrySeq():t:z(t)).toSetSeq()}function P(t){this._array=t,this.size=t.length}function R(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function M(t){this._iterable=t,this.size=t.length||t.size}function N(t){this._iterator=t,this._iteratorCache=[]}function L(t){return!(!t||!t[Tr])}function B(){return Or||(Or=new P([]))}function U(t){var e=Array.isArray(t)?new P(t).fromEntrySeq():O(t)?new N(t).fromEntrySeq():T(t)?new M(t).fromEntrySeq():"object"==typeof t?new R(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function z(t){var e=q(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function F(t){var e=q(t)||"object"==typeof t&&new R(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function q(t){return I(t)?new P(t):O(t)?new N(t):T(t)?new M(t):void 0}function W(t,e,r,n){var i=t._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var s=i[r?o-a:a];if(!1===e(s[1],n?s[0]:a,t))return a+1}return a}return t.__iterateUncached(e,r)}function H(t,e,r,n){var i=t._cache;if(i){var o=i.length-1,a=0;return new w(function(){var t=i[r?o-a:a];return a++>o?k():E(e,n?t[0]:a-1,t[1])})}return t.__iteratorUncached(e,r)}function G(t,e){return e?K(e,t,"",{"":t}):V(t)}function K(t,e,r,n){return Array.isArray(e)?t.call(n,r,D(e).map(function(r,n){return K(t,r,n,e)})):Y(e)?t.call(n,r,A(e).map(function(r,n){return K(t,r,n,e)})):e}function V(t){return Array.isArray(t)?D(t).map(V).toList():Y(t)?A(t).map(V).toMap():t}function Y(t){return t&&(t.constructor===Object||void 0===t.constructor)}function X(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function $(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||s(t)!==s(e)||c(t)!==c(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!u(t);if(c(t)){var n=t.entries();return e.every(function(t,e){var i=n.next().value;return i&&X(i[1],t)&&(r||X(i[0],e))})&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var l=t;t=e,e=l}var f=!0,p=e.__iterate(function(e,n){if(r?!t.has(e):i?!X(e,t.get(n,yr)):!X(t.get(n,yr),e))return f=!1,!1});return f&&t.size===p}function Q(t,e){if(!(this instanceof Q))return new Q(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Sr)return Sr;Sr=this}}function Z(t,e){if(!t)throw new Error(e)}function J(t,e,r){if(!(this instanceof J))return new J(t,e,r);if(Z(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(jr)return jr;jr=this}}function tt(){throw TypeError("Abstract")}function et(){}function rt(){}function nt(){}function it(t){return t>>>1&1073741824|3221225471&t}function ot(t){if(!1===t||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null===t||void 0===t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);t>4294967295;)t/=4294967295,r^=t;return it(r)}if("string"===e)return t.length>Mr?at(t):st(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return ut(t);if("function"==typeof t.toString)return st(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function at(t){var e=Br[t];return void 0===e&&(e=st(t),Lr===Nr&&(Lr=0,Br={}),Lr++,Br[t]=e),e}function st(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return it(e)}function ut(t){var e;if(xr&&void 0!==(e=Ir.get(t)))return e;if(void 0!==(e=t[Rr]))return e;if(!Dr){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Rr]))return e;if(void 0!==(e=ct(t)))return e}if(e=++Pr,1073741824&Pr&&(Pr=0),xr)Ir.set(t,e);else{if(void 0!==Ar&&!1===Ar(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Dr)Object.defineProperty(t,Rr,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Rr]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Rr]=e}}return e}function ct(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function lt(t){Z(t!==1/0,"Cannot perform this action with an infinite size.")}function ft(t){return null===t||void 0===t?Et():pt(t)&&!c(t)?t:Et().withMutations(function(e){var n=r(t);lt(n.size),n.forEach(function(t,r){return e.set(r,t)})})}function pt(t){return!(!t||!t[Ur])}function ht(t,e){this.ownerID=t,this.entries=e}function dt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function yt(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function gt(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function vt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function mt(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&bt(t._root)}function _t(t,e){return E(t,e[0],e[1])}function bt(t,e){return{node:t,index:0,__prev:e}}function wt(t,e,r,n){var i=Object.create(zr);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Et(){return Fr||(Fr=wt(0))}function kt(t,e,r){var n,i;if(t._root){var o=l(gr),a=l(vr);if(n=Tt(t._root,t.__ownerID,0,void 0,e,r,o,a),!a.value)return t;i=t.size+(o.value?r===yr?-1:1:0)}else{if(r===yr)return t;i=1,n=new ht(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?wt(i,n):Et()}function Tt(t,e,r,n,i,o,a,s){return t?t.update(e,r,n,i,o,a,s):o===yr?t:(f(s),f(a),new vt(e,n,[i,o]))}function Ot(t){return t.constructor===vt||t.constructor===gt}function St(t,e,r,n,i){if(t.keyHash===n)return new gt(e,n,[t.entry,i]);var o,a=(0===r?t.keyHash:t.keyHash>>>r)&dr,s=(0===r?n:n>>>r)&dr;return new dt(e,1<<a|1<<s,a===s?[St(t,e,r+pr,n,i)]:(o=new vt(e,n,i),a<s?[t,o]:[o,t]))}function jt(t,e,r,n){t||(t=new p);for(var i=new vt(t,ot(r),[r,n]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}function It(t,e,r,n){for(var i=0,o=0,a=new Array(r),s=0,u=1,c=e.length;s<c;s++,u<<=1){var l=e[s];void 0!==l&&s!==n&&(i|=u,a[o++]=l)}return new dt(t,i,a)}function Ct(t,e,r,n,i){for(var o=0,a=new Array(hr),s=0;0!==r;s++,r>>>=1)a[s]=1&r?e[o++]:void 0;return a[n]=i,new yt(t,o+1,a)}function At(t,e,n){for(var i=[],a=0;a<n.length;a++){var s=n[a],u=r(s);o(s)||(u=u.map(function(t){return G(t)})),i.push(u)}return Pt(t,e,i)}function Dt(t,e,r){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):X(t,e)?t:e}function xt(t){return function(e,r,n){if(e&&e.mergeDeepWith&&o(r))return e.mergeDeepWith(t,r);var i=t(e,r,n);return X(e,i)?e:i}}function Pt(t,e,r){return r=r.filter(function(t){return 0!==t.size}),0===r.length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var n=e?function(r,n){t.update(n,yr,function(t){return t===yr?r:e(t,r,n)})}:function(e,r){t.set(r,e)},i=0;i<r.length;i++)r[i].forEach(n)}):t.constructor(r[0])}function Rt(t,e,r,n){var i=t===yr,o=e.next();if(o.done){var a=i?r:t,s=n(a);return s===a?t:s}Z(i||t&&t.set,"invalid keyPath");var u=o.value,c=i?yr:t.get(u,yr),l=Rt(c,e,r,n);return l===c?t:l===yr?t.remove(u):(i?Et():t).set(u,l)}function Mt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Nt(t,e,r,n){var i=n?t:h(t);return i[e]=r,i}function Lt(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=r,a=-1):o[s]=t[s+a];return o}function Bt(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,a=0;a<n;a++)a===e&&(o=1),i[a]=t[a+o];return i}function Ut(t){var e=Ht();if(null===t||void 0===t)return e;if(zt(t))return t;var r=n(t),i=r.size;return 0===i?e:(lt(i),i>0&&i<hr?Wt(0,i,pr,null,new Ft(r.toArray())):e.withMutations(function(t){t.setSize(i),r.forEach(function(e,r){return t.set(r,e)})}))}function zt(t){return!(!t||!t[Gr])}function Ft(t,e){this.array=t,this.ownerID=e}function qt(t,e){function r(t,e,r){return 0===e?n(t,r):i(t,e,r)}function n(t,r){var n=r===s?u&&u.array:t&&t.array,i=r>o?0:o-r,c=a-r;return c>hr&&(c=hr),function(){if(i===c)return Yr;var t=e?--c:i++;return n&&n[t]}}function i(t,n,i){var s,u=t&&t.array,c=i>o?0:o-i>>n,l=1+(a-i>>n);return l>hr&&(l=hr),function(){for(;;){if(s){var t=s();if(t!==Yr)return t;s=null}if(c===l)return Yr;var o=e?--l:c++;s=r(u&&u[o],n-pr,i+(o<<n))}}}var o=t._origin,a=t._capacity,s=Qt(a),u=t._tail;return r(t._root,t._level,0)}function Wt(t,e,r,n,i,o,a){var s=Object.create(Kr);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function Ht(){return Vr||(Vr=Wt(0,0,pr))}function Gt(t,e,r){if((e=y(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Xt(t,e).set(0,r):Xt(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o=l(vr);return e>=Qt(t._capacity)?n=Kt(n,t.__ownerID,0,e,r,o):i=Kt(i,t.__ownerID,t._level,e,r,o),o.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Wt(t._origin,t._capacity,t._level,i,n):t}function Kt(t,e,r,n,i,o){var a=n>>>r&dr,s=t&&a<t.array.length;if(!s&&void 0===i)return t;var u;if(r>0){var c=t&&t.array[a],l=Kt(c,e,r-pr,n,i,o);return l===c?t:(u=Vt(t,e),u.array[a]=l,u)}return s&&t.array[a]===i?t:(f(o),u=Vt(t,e),void 0===i&&a===u.array.length-1?u.array.pop():u.array[a]=i,u)}function Vt(t,e){return e&&t&&e===t.ownerID?t:new Ft(t?t.array.slice():[],e)}function Yt(t,e){if(e>=Qt(t._capacity))return t._tail;if(e<1<<t._level+pr){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&dr],n-=pr;return r}}function Xt(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new p,i=t._origin,o=t._capacity,a=i+e,s=void 0===r?o:r<0?o+r:i+r;if(a===i&&s===o)return t;if(a>=s)return t.clear();for(var u=t._level,c=t._root,l=0;a+l<0;)c=new Ft(c&&c.array.length?[void 0,c]:[],n),u+=pr,l+=1<<u;l&&(a+=l,i+=l,s+=l,o+=l);for(var f=Qt(o),h=Qt(s);h>=1<<u+pr;)c=new Ft(c&&c.array.length?[c]:[],n),u+=pr;var d=t._tail,y=h<f?Yt(t,s-1):h>f?new Ft([],n):d;if(d&&h>f&&a<o&&d.array.length){c=Vt(c,n);for(var g=c,v=u;v>pr;v-=pr){var m=f>>>v&dr;g=g.array[m]=Vt(g.array[m],n)}g.array[f>>>pr&dr]=d}if(s<o&&(y=y&&y.removeAfter(n,0,s)),a>=h)a-=h,s-=h,u=pr,c=null,y=y&&y.removeBefore(n,0,a);else if(a>i||h<f){for(l=0;c;){var _=a>>>u&dr;if(_!==h>>>u&dr)break;_&&(l+=(1<<u)*_),u-=pr,c=c.array[_]}c&&a>i&&(c=c.removeBefore(n,u,a-l)),c&&h<f&&(c=c.removeAfter(n,u,h-l)),l&&(a-=l,s-=l)}return t.__ownerID?(t.size=s-a,t._origin=a,t._capacity=s,t._level=u,t._root=c,t._tail=y,t.__hash=void 0,t.__altered=!0,t):Wt(a,s,u,c,y)}function $t(t,e,r){for(var i=[],a=0,s=0;s<r.length;s++){var u=r[s],c=n(u);c.size>a&&(a=c.size),o(u)||(c=c.map(function(t){return G(t)})),i.push(c)}return a>t.size&&(t=t.setSize(a)),Pt(t,e,i)}function Qt(t){return t<hr?0:t-1>>>pr<<pr}function Zt(t){return null===t||void 0===t?ee():Jt(t)?t:ee().withMutations(function(e){var n=r(t);lt(n.size),n.forEach(function(t,r){return e.set(r,t)})})}function Jt(t){return pt(t)&&c(t)}function te(t,e,r,n){var i=Object.create(Zt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function ee(){return Xr||(Xr=te(Et(),Ht()))}function re(t,e,r){var n,i,o=t._map,a=t._list,s=o.get(e),u=void 0!==s;if(r===yr){if(!u)return t;a.size>=hr&&a.size>=2*o.size?(i=a.filter(function(t,e){return void 0!==t&&s!==e}),n=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=o.remove(e),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(r===a.get(s)[1])return t;n=o,i=a.set(s,[e,r])}else n=o.set(e,a.size),i=a.set(a.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):te(n,i)}function ne(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function ae(t){this._iter=t,this.size=t.size}function se(t){var e=Ie(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ce,e.__iterateUncached=function(e,r){var n=this;return t.__iterate(function(t,r){return!1!==e(r,t,n)},r)},e.__iteratorUncached=function(e,r){if(e===br){var n=t.__iterator(e,r);return new w(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===_r?mr:_r,r)},e}function ue(t,e,r){var n=Ie(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var o=t.get(n,yr);return o===yr?i:e.call(r,o,n,t)},n.__iterateUncached=function(n,i){var o=this;return t.__iterate(function(t,i,a){return!1!==n(e.call(r,t,i,a),i,o)},i)},n.__iteratorUncached=function(n,i){var o=t.__iterator(br,i);return new w(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return E(n,s,e.call(r,a[1],s,t),i)})},n}function ce(t,e){var r=Ie(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=se(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=Ce,r.__iterate=function(e,r){var n=this;return t.__iterate(function(t,r){return e(t,r,n)},!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function le(t,e,r,n){var i=Ie(t);return n&&(i.has=function(n){var i=t.get(n,yr);return i!==yr&&!!e.call(r,i,n,t)},i.get=function(n,i){var o=t.get(n,yr);return o!==yr&&e.call(r,o,n,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate(function(t,o,u){if(e.call(r,t,o,u))return s++,i(t,n?o:s-1,a)},o),s},i.__iteratorUncached=function(i,o){var a=t.__iterator(br,o),s=0;return new w(function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(r,l,c,t))return E(i,n?c:s++,l,o)}})},i}function fe(t,e,r){var n=ft().asMutable();return t.__iterate(function(i,o){n.update(e.call(r,i,o,t),0,function(t){return t+1})}),n.asImmutable()}function pe(t,e,r){var n=a(t),i=(c(t)?Zt():ft()).asMutable();t.__iterate(function(o,a){i.update(e.call(r,o,a,t),function(t){return t=t||[],t.push(n?[a,o]:o),t})});var o=je(t);return i.map(function(e){return Te(t,o(e))})}function he(t,e,r,n){var i=t.size;if(void 0!==e&&(e|=0),void 0!==r&&(r===1/0?r=i:r|=0),v(e,r,i))return t;var o=m(e,i),a=_(r,i);if(o!==o||a!==a)return he(t.toSeq().cacheResult(),e,r,n);var s,u=a-o;u===u&&(s=u<0?0:u);var c=Ie(t);return c.size=0===s?s:t.size&&s||void 0,!n&&L(t)&&s>=0&&(c.get=function(e,r){return e=y(this,e),e>=0&&e<s?t.get(e+o,r):r}),c.__iterateUncached=function(e,r){var i=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(e,r);var a=0,u=!0,c=0;return t.__iterate(function(t,r){if(!u||!(u=a++<o))return c++,!1!==e(t,n?r:c-1,i)&&c!==s}),c},c.__iteratorUncached=function(e,r){if(0!==s&&r)return this.cacheResult().__iterator(e,r);var i=0!==s&&t.__iterator(e,r),a=0,u=0;return new w(function(){for(;a++<o;)i.next();if(++u>s)return k();var t=i.next();return n||e===_r?t:e===mr?E(e,u-1,void 0,t):E(e,u-1,t.value[1],t)})},c}function de(t,e,r){var n=Ie(t);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var a=0;return t.__iterate(function(t,i,s){return e.call(r,t,i,s)&&++a&&n(t,i,o)}),a},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var a=t.__iterator(br,i),s=!0;return new w(function(){if(!s)return k();var t=a.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(r,c,u,o)?n===br?t:E(n,u,c,t):(s=!1,k())})},n}function ye(t,e,r,n){var i=Ie(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return t.__iterate(function(t,o,c){if(!s||!(s=e.call(r,t,o,c)))return u++,i(t,n?o:u-1,a)}),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(br,o),u=!0,c=0;return new w(function(){var t,o,l;do{if(t=s.next(),t.done)return n||i===_r?t:i===mr?E(i,c++,void 0,t):E(i,c++,t.value[1],t);var f=t.value;o=f[0],l=f[1],u&&(u=e.call(r,l,o,a))}while(u);return i===br?t:E(i,o,l,t)})},i}function ge(t,e){var n=a(t),i=[t].concat(e).map(function(t){return o(t)?n&&(t=r(t)):t=n?U(t):z(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var u=i[0];if(u===t||n&&a(u)||s(t)&&s(u))return u}var c=new P(i);return n?c=c.toKeyedSeq():s(t)||(c=c.toSetSeq()),c=c.flatten(!0),c.size=i.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),c}function ve(t,e,r){var n=Ie(t);return n.__iterateUncached=function(n,i){function a(t,c){var l=this;t.__iterate(function(t,i){return(!e||c<e)&&o(t)?a(t,c+1):!1===n(t,r?i:s++,l)&&(u=!0),!u},i)}var s=0,u=!1;return a(t,0),s},n.__iteratorUncached=function(n,i){var a=t.__iterator(n,i),s=[],u=0;return new w(function(){for(;a;){var t=a.next();if(!1===t.done){var c=t.value;if(n===br&&(c=c[1]),e&&!(s.length<e)||!o(c))return r?t:E(n,u++,c,t);s.push(a),a=c.__iterator(n,i)}else a=s.pop()}return k()})},n}function me(t,e,r){var n=je(t);return t.toSeq().map(function(i,o){return n(e.call(r,i,o,t))}).flatten(!0)}function _e(t,e){var r=Ie(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return t.__iterate(function(t,n){return(!o||!1!==r(e,o++,i))&&!1!==r(t,o++,i)},n),o},r.__iteratorUncached=function(r,n){var i,o=t.__iterator(_r,n),a=0;return new w(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?E(r,a++,e):E(r,a++,i.value,i)})},r}function be(t,e,r){e||(e=Ae);var n=a(t),i=0,o=t.toSeq().map(function(e,n){return[n,e,i++,r?r(e,n,t):e]}).toArray();return o.sort(function(t,r){return e(t[3],r[3])||t[2]-r[2]}).forEach(n?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),n?A(o):s(t)?D(o):x(o)}function we(t,e,r){if(e||(e=Ae),r){var n=t.toSeq().map(function(e,n){return[e,r(e,n,t)]}).reduce(function(t,r){return Ee(e,t[1],r[1])?r:t});return n&&n[0]}return t.reduce(function(t,r){return Ee(e,t,r)?r:t})}function Ee(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(void 0===r||null===r||r!==r)||n>0}function ke(t,r,n){var i=Ie(t);return i.size=new P(n).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(_r,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=n.map(function(t){return t=e(t),S(i?t.reverse():t)}),a=0,s=!1;return new w(function(){var e;return s||(e=o.map(function(t){return t.next()}),s=e.some(function(t){return t.done})),s?k():E(t,a++,r.apply(null,e.map(function(t){return t.value})))})},i}function Te(t,e){return L(t)?e:t.constructor(e)}function Oe(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Se(t){return lt(t.size),d(t)}function je(t){return a(t)?r:s(t)?n:i}function Ie(t){return Object.create((a(t)?A:s(t)?D:x).prototype)}function Ce(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):C.prototype.cacheResult.call(this)}function Ae(t,e){return t>e?1:t<e?-1:0}function De(t){var r=S(t);if(!r){if(!I(t))throw new TypeError("Expected iterable or array-like: "+t);r=S(e(t))}return r}function xe(t,e){var r,n=function(o){if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var a=Object.keys(t);Me(i,a),i.size=a.length,i._name=e,i._keys=a,i._defaultValues=t}this._map=ft(o)},i=n.prototype=Object.create($r);return i.constructor=n,n}function Pe(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function Re(t){return t._name||t.constructor.name||"Record"}function Me(t,e){try{e.forEach(Ne.bind(void 0,t))}catch(t){}}function Ne(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Z(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Le(t){return null===t||void 0===t?Fe():Be(t)&&!c(t)?t:Fe().withMutations(function(e){var r=i(t);lt(r.size),r.forEach(function(t){return e.add(t)})})}function Be(t){return!(!t||!t[Qr])}function Ue(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function ze(t,e){var r=Object.create(Zr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Fe(){return Jr||(Jr=ze(Et()))}function qe(t){return null===t||void 0===t?Ge():We(t)?t:Ge().withMutations(function(e){var r=i(t);lt(r.size),r.forEach(function(t){return e.add(t)})})}function We(t){return Be(t)&&c(t)}function He(t,e){var r=Object.create(tn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Ge(){return en||(en=He(ee()))}function Ke(t){return null===t||void 0===t?Xe():Ve(t)?t:Xe().unshiftAll(t)}function Ve(t){return!(!t||!t[rn])}function Ye(t,e,r,n){var i=Object.create(nn);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Xe(){return on||(on=Ye(0))}function $e(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Qe(t,e){return e}function Ze(t,e){return[e,t]}function Je(t){return function(){return!t.apply(this,arguments)}}function tr(t){return function(){return-t.apply(this,arguments)}}function er(t){return"string"==typeof t?JSON.stringify(t):String(t)}function rr(){return h(arguments)}function nr(t,e){return t<e?1:t>e?-1:0}function ir(t){if(t.size===1/0)return 0;var e=c(t),r=a(t),n=e?1:0;return or(t.__iterate(r?e?function(t,e){n=31*n+ar(ot(t),ot(e))|0}:function(t,e){n=n+ar(ot(t),ot(e))|0}:e?function(t){n=31*n+ot(t)|0}:function(t){n=n+ot(t)|0}),n)}function or(t,e){return e=Cr(e,3432918353),e=Cr(e<<15|e>>>-15,461845907),e=Cr(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Cr(e^e>>>16,2246822507),e=Cr(e^e>>>13,3266489909),e=it(e^e>>>16)}function ar(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var sr=Array.prototype.slice;t(r,e),t(n,e),t(i,e),e.isIterable=o,e.isKeyed=a,e.isIndexed=s,e.isAssociative=u,e.isOrdered=c,e.Keyed=r,e.Indexed=n,e.Set=i;var ur="@@__IMMUTABLE_ITERABLE__@@",cr="@@__IMMUTABLE_KEYED__@@",lr="@@__IMMUTABLE_INDEXED__@@",fr="@@__IMMUTABLE_ORDERED__@@",pr=5,hr=1<<pr,dr=hr-1,yr={},gr={value:!1},vr={value:!1},mr=0,_r=1,br=2,wr="function"==typeof Symbol&&Symbol.iterator,Er="@@iterator",kr=wr||Er;w.prototype.toString=function(){return"[Iterator]"},w.KEYS=mr,w.VALUES=_r,w.ENTRIES=br,w.prototype.inspect=w.prototype.toSource=function(){return this.toString()},w.prototype[kr]=function(){return this},t(C,e),C.of=function(){return C(arguments)},C.prototype.toSeq=function(){return this},C.prototype.toString=function(){return this.__toString("Seq {","}")},C.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},C.prototype.__iterate=function(t,e){return W(this,t,e,!0)},C.prototype.__iterator=function(t,e){return H(this,t,e,!0)},t(A,C),A.prototype.toKeyedSeq=function(){return this},t(D,C),D.of=function(){return D(arguments)},D.prototype.toIndexedSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq [","]")},D.prototype.__iterate=function(t,e){return W(this,t,e,!1)},D.prototype.__iterator=function(t,e){return H(this,t,e,!1)},t(x,C),x.of=function(){return x(arguments)},x.prototype.toSetSeq=function(){return this},C.isSeq=L,C.Keyed=A,C.Set=x,C.Indexed=D;var Tr="@@__IMMUTABLE_SEQ__@@";C.prototype[Tr]=!0,t(P,D),P.prototype.get=function(t,e){return this.has(t)?this._array[y(this,t)]:e},P.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===t(r[e?n-i:i],i,this))return i+1;return i},P.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new w(function(){return i>n?k():E(t,i,r[e?n-i++:i++])})},t(R,A),R.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},R.prototype.has=function(t){return this._object.hasOwnProperty(t)},R.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,o=0;o<=i;o++){var a=n[e?i-o:o];if(!1===t(r[a],a,this))return o+1}return o},R.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length-1,o=0;return new w(function(){var a=n[e?i-o:o];return o++>i?k():E(t,a,r[a])})},R.prototype[fr]=!0,t(M,D),M.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=this._iterable,n=S(r),i=0;if(O(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,i++,this););return i},M.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=S(r);if(!O(n))return new w(k);var i=0;return new w(function(){var e=n.next();return e.done?e:E(t,i++,e.value)})},t(N,D),N.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;i<n.length;)if(!1===t(n[i],i++,this))return i;for(var o;!(o=r.next()).done;){var a=o.value;if(n[i]=a,!1===t(a,i++,this))break}return i},N.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new w(function(){if(i>=n.length){var e=r.next();if(e.done)return e;n[i]=e.value}return E(t,i,n[i++])})};var Or;t(Q,D),Q.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Q.prototype.get=function(t,e){return this.has(t)?this._value:e},Q.prototype.includes=function(t){return X(this._value,t)},Q.prototype.slice=function(t,e){var r=this.size;return v(t,e,r)?this:new Q(this._value,_(e,r)-m(t,r))},Q.prototype.reverse=function(){return this},Q.prototype.indexOf=function(t){return X(this._value,t)?0:-1},Q.prototype.lastIndexOf=function(t){return X(this._value,t)?this.size:-1},Q.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(!1===t(this._value,r,this))return r+1;return r},Q.prototype.__iterator=function(t,e){var r=this,n=0;return new w(function(){return n<r.size?E(t,n++,r._value):k()})},Q.prototype.equals=function(t){return t instanceof Q?X(this._value,t._value):$(t)};var Sr;t(J,D),J.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},J.prototype.get=function(t,e){return this.has(t)?this._start+y(this,t)*this._step:e},J.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},J.prototype.slice=function(t,e){return v(t,e,this.size)?this:(t=m(t,this.size),e=_(e,this.size),e<=t?new J(0,0):new J(this.get(t,this._end),this.get(e,this._end),this._step))},J.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},J.prototype.lastIndexOf=function(t){return this.indexOf(t)},J.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;o<=r;o++){if(!1===t(i,o,this))return o+1;i+=e?-n:n}return o},J.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;return new w(function(){var a=i;return i+=e?-n:n,o>r?k():E(t,o++,a)})},J.prototype.equals=function(t){return t instanceof J?this._start===t._start&&this._end===t._end&&this._step===t._step:$(this,t)};var jr;t(tt,e),t(et,tt),t(rt,tt),t(nt,tt),tt.Keyed=et,tt.Indexed=rt,tt.Set=nt;var Ir,Cr="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t|=0,e|=0;var r=65535&t,n=65535&e;return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0},Ar=Object.isExtensible,Dr=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),xr="function"==typeof WeakMap;xr&&(Ir=new WeakMap);var Pr=0,Rr="__immutablehash__";"function"==typeof Symbol&&(Rr=Symbol(Rr));var Mr=16,Nr=255,Lr=0,Br={};t(ft,et),ft.of=function(){var t=sr.call(arguments,0);return Et().withMutations(function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}})},ft.prototype.toString=function(){return this.__toString("Map {","}")},ft.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ft.prototype.set=function(t,e){return kt(this,t,e)},ft.prototype.setIn=function(t,e){return this.updateIn(t,yr,function(){return e})},ft.prototype.remove=function(t){return kt(this,t,yr)},ft.prototype.deleteIn=function(t){return this.updateIn(t,function(){return yr})},ft.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},ft.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=Rt(this,De(t),e,r);return n===yr?void 0:n},ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Et()},ft.prototype.merge=function(){return At(this,void 0,arguments)},ft.prototype.mergeWith=function(t){return At(this,t,sr.call(arguments,1))},ft.prototype.mergeIn=function(t){var e=sr.call(arguments,1);return this.updateIn(t,Et(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ft.prototype.mergeDeep=function(){return At(this,Dt,arguments)},ft.prototype.mergeDeepWith=function(t){var e=sr.call(arguments,1);return At(this,xt(t),e)},ft.prototype.mergeDeepIn=function(t){var e=sr.call(arguments,1);return this.updateIn(t,Et(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ft.prototype.sort=function(t){return Zt(be(this,t))},ft.prototype.sortBy=function(t,e){return Zt(be(this,e,t))},ft.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ft.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new p)},ft.prototype.asImmutable=function(){return this.__ensureOwner()},ft.prototype.wasAltered=function(){return this.__altered},ft.prototype.__iterator=function(t,e){return new mt(this,t,e)},ft.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate(function(e){return n++,t(e[1],e[0],r)},e),n},ft.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ft.isMap=pt;var Ur="@@__IMMUTABLE_MAP__@@",zr=ft.prototype;zr[Ur]=!0,zr.delete=zr.remove,zr.removeIn=zr.deleteIn,ht.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(X(r,i[o][0]))return i[o][1];return n},ht.prototype.update=function(t,e,r,n,i,o,a){for(var s=i===yr,u=this.entries,c=0,l=u.length;c<l&&!X(n,u[c][0]);c++);var p=c<l;if(p?u[c][1]===i:s)return this;if(f(a),(s||!p)&&f(o),!s||1!==u.length){if(!p&&!s&&u.length>=qr)return jt(t,u,n,i);var d=t&&t===this.ownerID,y=d?u:h(u);return p?s?c===l-1?y.pop():y[c]=y.pop():y[c]=[n,i]:y.push([n,i]),d?(this.entries=y,this):new ht(t,y)}},dt.prototype.get=function(t,e,r,n){void 0===e&&(e=ot(r));var i=1<<((0===t?e:e>>>t)&dr),o=this.bitmap;return 0==(o&i)?n:this.nodes[Mt(o&i-1)].get(t+pr,e,r,n)},dt.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=ot(n));var s=(0===e?r:r>>>e)&dr,u=1<<s,c=this.bitmap,l=0!=(c&u);if(!l&&i===yr)return this;var f=Mt(c&u-1),p=this.nodes,h=l?p[f]:void 0,d=Tt(h,t,e+pr,r,n,i,o,a);if(d===h)return this;if(!l&&d&&p.length>=Wr)return Ct(t,p,c,s,d);if(l&&!d&&2===p.length&&Ot(p[1^f]))return p[1^f];if(l&&d&&1===p.length&&Ot(d))return d;var y=t&&t===this.ownerID,g=l?d?c:c^u:c|u,v=l?d?Nt(p,f,d,y):Bt(p,f,y):Lt(p,f,d,y);return y?(this.bitmap=g,this.nodes=v,this):new dt(t,g,v)},yt.prototype.get=function(t,e,r,n){void 0===e&&(e=ot(r));var i=(0===t?e:e>>>t)&dr,o=this.nodes[i];return o?o.get(t+pr,e,r,n):n},yt.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=ot(n));var s=(0===e?r:r>>>e)&dr,u=i===yr,c=this.nodes,l=c[s];if(u&&!l)return this;var f=Tt(l,t,e+pr,r,n,i,o,a);if(f===l)return this;var p=this.count;if(l){if(!f&&--p<Hr)return It(t,c,p,s)}else p++;var h=t&&t===this.ownerID,d=Nt(c,s,f,h);return h?(this.count=p,this.nodes=d,this):new yt(t,p,d)},gt.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(X(r,i[o][0]))return i[o][1];return n},gt.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=ot(n));var s=i===yr;if(r!==this.keyHash)return s?this:(f(a),f(o),St(this,t,e,r,[n,i]));for(var u=this.entries,c=0,l=u.length;c<l&&!X(n,u[c][0]);c++);var p=c<l;if(p?u[c][1]===i:s)return this;if(f(a),(s||!p)&&f(o),s&&2===l)return new vt(t,this.keyHash,u[1^c]);var d=t&&t===this.ownerID,y=d?u:h(u);return p?s?c===l-1?y.pop():y[c]=y.pop():y[c]=[n,i]:y.push([n,i]),d?(this.entries=y,this):new gt(t,this.keyHash,y)},vt.prototype.get=function(t,e,r,n){return X(r,this.entry[0])?this.entry[1]:n},vt.prototype.update=function(t,e,r,n,i,o,a){var s=i===yr,u=X(n,this.entry[0]);return(u?i===this.entry[1]:s)?this:(f(a),s?void f(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new vt(t,this.keyHash,[n,i]):(f(o),St(this,t,e,ot(n),[n,i])))},ht.prototype.iterate=gt.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},dt.prototype.iterate=yt.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},vt.prototype.iterate=function(t,e){return t(this.entry)},t(mt,w),mt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,i=e.index++;if(n.entry){if(0===i)return _t(t,n.entry)}else if(n.entries){if(r=n.entries.length-1,i<=r)return _t(t,n.entries[this._reverse?r-i:i])}else if(r=n.nodes.length-1,i<=r){var o=n.nodes[this._reverse?r-i:i];if(o){if(o.entry)return _t(t,o.entry);e=this._stack=bt(o,e)}continue}e=this._stack=this._stack.__prev}return k()};var Fr,qr=hr/4,Wr=hr/2,Hr=hr/4;t(Ut,rt),Ut.of=function(){return this(arguments)},Ut.prototype.toString=function(){return this.__toString("List [","]")},Ut.prototype.get=function(t,e){if((t=y(this,t))>=0&&t<this.size){t+=this._origin;var r=Yt(this,t);return r&&r.array[t&dr]}return e},Ut.prototype.set=function(t,e){return Gt(this,t,e)},Ut.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Ut.prototype.insert=function(t,e){return this.splice(t,0,e)},Ut.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=pr,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ht()},Ut.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(r){Xt(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])})},Ut.prototype.pop=function(){return Xt(this,0,-1)},Ut.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Xt(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])})},Ut.prototype.shift=function(){return Xt(this,1)},Ut.prototype.merge=function(){return $t(this,void 0,arguments)},Ut.prototype.mergeWith=function(t){return $t(this,t,sr.call(arguments,1))},Ut.prototype.mergeDeep=function(){return $t(this,Dt,arguments)},Ut.prototype.mergeDeepWith=function(t){var e=sr.call(arguments,1);return $t(this,xt(t),e)},Ut.prototype.setSize=function(t){return Xt(this,0,t)},Ut.prototype.slice=function(t,e){var r=this.size;return v(t,e,r)?this:Xt(this,m(t,r),_(e,r))},Ut.prototype.__iterator=function(t,e){var r=0,n=qt(this,e);return new w(function(){var e=n();return e===Yr?k():E(t,r++,e)})},Ut.prototype.__iterate=function(t,e){for(var r,n=0,i=qt(this,e);(r=i())!==Yr&&!1!==t(r,n++,this););return n},Ut.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Wt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Ut.isList=zt;var Gr="@@__IMMUTABLE_LIST__@@",Kr=Ut.prototype;Kr[Gr]=!0,Kr.delete=Kr.remove,Kr.setIn=zr.setIn,Kr.deleteIn=Kr.removeIn=zr.removeIn,Kr.update=zr.update,Kr.updateIn=zr.updateIn,Kr.mergeIn=zr.mergeIn,Kr.mergeDeepIn=zr.mergeDeepIn,Kr.withMutations=zr.withMutations,Kr.asMutable=zr.asMutable,Kr.asImmutable=zr.asImmutable,Kr.wasAltered=zr.wasAltered,Ft.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&dr;if(n>=this.array.length)return new Ft([],t);var i,o=0===n;if(e>0){var a=this.array[n];if((i=a&&a.removeBefore(t,e-pr,r))===a&&o)return this}if(o&&!i)return this;var s=Vt(this,t);if(!o)for(var u=0;u<n;u++)s.array[u]=void 0;return i&&(s.array[n]=i),s},Ft.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n=r-1>>>e&dr;if(n>=this.array.length)return this;var i;if(e>0){var o=this.array[n];if((i=o&&o.removeAfter(t,e-pr,r))===o&&n===this.array.length-1)return this}var a=Vt(this,t);return a.array.splice(n+1),i&&(a.array[n]=i),a};var Vr,Yr={};t(Zt,ft),Zt.of=function(){return this(arguments)},Zt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Zt.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},Zt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Zt.prototype.set=function(t,e){return re(this,t,e)},Zt.prototype.remove=function(t){return re(this,t,yr)},Zt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Zt.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],r)},e)},Zt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Zt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?te(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},Zt.isOrderedMap=Jt,Zt.prototype[fr]=!0,Zt.prototype.delete=Zt.prototype.remove;var Xr;t(ne,A),ne.prototype.get=function(t,e){return this._iter.get(t,e)},ne.prototype.has=function(t){return this._iter.has(t)},ne.prototype.valueSeq=function(){return this._iter.valueSeq()},ne.prototype.reverse=function(){var t=this,e=ce(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ne.prototype.map=function(t,e){var r=this,n=ue(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},ne.prototype.__iterate=function(t,e){var r,n=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,n)}:(r=e?Se(this):0,function(i){return t(i,e?--r:r++,n)}),e)},ne.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(_r,e),n=e?Se(this):0;return new w(function(){var i=r.next();return i.done?i:E(t,e?--n:n++,i.value,i)})},ne.prototype[fr]=!0,t(ie,D),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate(function(e){return t(e,n++,r)},e)},ie.prototype.__iterator=function(t,e){var r=this._iter.__iterator(_r,e),n=0;return new w(function(){var e=r.next();return e.done?e:E(t,n++,e.value,e)})},t(oe,x),oe.prototype.has=function(t){return this._iter.includes(t)},oe.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){return t(e,e,r)},e)},oe.prototype.__iterator=function(t,e){var r=this._iter.__iterator(_r,e);return new w(function(){var e=r.next();return e.done?e:E(t,e.value,e.value,e)})},t(ae,A),ae.prototype.entrySeq=function(){return this._iter.toSeq()},ae.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){if(e){Oe(e);var n=o(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}},e)},ae.prototype.__iterator=function(t,e){var r=this._iter.__iterator(_r,e);return new w(function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){Oe(n);var i=o(n);return E(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}})},ie.prototype.cacheResult=ne.prototype.cacheResult=oe.prototype.cacheResult=ae.prototype.cacheResult=Ce,t(xe,et),xe.prototype.toString=function(){return this.__toString(Re(this)+" {","}")},xe.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},xe.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},xe.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Pe(this,Et()))},xe.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Re(this));if(this._map&&!this._map.has(t)){if(e===this._defaultValues[t])return this}var r=this._map&&this._map.set(t,e);return this.__ownerID||r===this._map?this:Pe(this,r)},xe.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Pe(this,e)},xe.prototype.wasAltered=function(){return this._map.wasAltered()},xe.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},xe.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},xe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Pe(this,e,t):(this.__ownerID=t,this._map=e,this)};var $r=xe.prototype;$r.delete=$r.remove,$r.deleteIn=$r.removeIn=zr.removeIn,$r.merge=zr.merge,$r.mergeWith=zr.mergeWith,$r.mergeIn=zr.mergeIn,$r.mergeDeep=zr.mergeDeep,$r.mergeDeepWith=zr.mergeDeepWith,$r.mergeDeepIn=zr.mergeDeepIn,$r.setIn=zr.setIn,$r.update=zr.update,$r.updateIn=zr.updateIn,$r.withMutations=zr.withMutations,$r.asMutable=zr.asMutable,$r.asImmutable=zr.asImmutable,t(Le,nt),Le.of=function(){return this(arguments)},Le.fromKeys=function(t){return this(r(t).keySeq())},Le.prototype.toString=function(){return this.__toString("Set {","}")},Le.prototype.has=function(t){return this._map.has(t)},Le.prototype.add=function(t){return Ue(this,this._map.set(t,!0))},Le.prototype.remove=function(t){return Ue(this,this._map.remove(t))},Le.prototype.clear=function(){return Ue(this,this._map.clear())},Le.prototype.union=function(){var t=sr.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var r=0;r<t.length;r++)i(t[r]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Le.prototype.intersect=function(){var t=sr.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(r){e.forEach(function(e){t.every(function(t){return t.includes(e)})||r.remove(e)})})},Le.prototype.subtract=function(){var t=sr.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(r){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&r.remove(e)})})},Le.prototype.merge=function(){return this.union.apply(this,arguments)},Le.prototype.mergeWith=function(t){var e=sr.call(arguments,1);return this.union.apply(this,e)},Le.prototype.sort=function(t){return qe(be(this,t))},Le.prototype.sortBy=function(t,e){return qe(be(this,e,t))},Le.prototype.wasAltered=function(){return this._map.wasAltered()},Le.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate(function(e,n){return t(n,n,r)},e)},Le.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Le.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Le.isSet=Be;var Qr="@@__IMMUTABLE_SET__@@",Zr=Le.prototype;Zr[Qr]=!0,Zr.delete=Zr.remove,Zr.mergeDeep=Zr.merge,Zr.mergeDeepWith=Zr.mergeWith,Zr.withMutations=zr.withMutations,Zr.asMutable=zr.asMutable,Zr.asImmutable=zr.asImmutable,Zr.__empty=Fe,Zr.__make=ze;var Jr;t(qe,Le),qe.of=function(){return this(arguments)},qe.fromKeys=function(t){return this(r(t).keySeq())},qe.prototype.toString=function(){return this.__toString("OrderedSet {","}")},qe.isOrderedSet=We;var tn=qe.prototype;tn[fr]=!0,tn.__empty=Ge,tn.__make=He;var en;t(Ke,rt),Ke.of=function(){return this(arguments)},Ke.prototype.toString=function(){return this.__toString("Stack [","]")},Ke.prototype.get=function(t,e){var r=this._head;for(t=y(this,t);r&&t--;)r=r.next;return r?r.value:e},Ke.prototype.peek=function(){return this._head&&this._head.value},Ke.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ye(t,e)},Ke.prototype.pushAll=function(t){if(t=n(t),0===t.size)return this;lt(t.size);var e=this.size,r=this._head;return t.reverse().forEach(function(t){e++,r={value:t,next:r}}),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ye(e,r)},Ke.prototype.pop=function(){return this.slice(1)},Ke.prototype.unshift=function(){return this.push.apply(this,arguments)},Ke.prototype.unshiftAll=function(t){return this.pushAll(t)},Ke.prototype.shift=function(){return this.pop.apply(this,arguments)},Ke.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Xe()},Ke.prototype.slice=function(t,e){if(v(t,e,this.size))return this;var r=m(t,this.size);if(_(e,this.size)!==this.size)return rt.prototype.slice.call(this,t,e);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):Ye(n,i)},Ke.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ye(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ke.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&!1!==t(n.value,r++,this);)n=n.next;return r},Ke.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new w(function(){if(n){var e=n.value;return n=n.next,E(t,r++,e)}return k()})},Ke.isStack=Ve;var rn="@@__IMMUTABLE_STACK__@@",nn=Ke.prototype;nn[rn]=!0,nn.withMutations=zr.withMutations,nn.asMutable=zr.asMutable,nn.asImmutable=zr.asImmutable,nn.wasAltered=zr.wasAltered;var on;e.Iterator=w,$e(e,{toArray:function(){lt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,r){t[r]=e}),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new ne(this,!0)},toMap:function(){return ft(this.toKeyedSeq())},toObject:function(){lt(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t},toOrderedMap:function(){return Zt(this.toKeyedSeq())},toOrderedSet:function(){return qe(a(this)?this.valueSeq():this)},toSet:function(){return Le(a(this)?this.valueSeq():this)},toSetSeq:function(){return new oe(this)},toSeq:function(){return s(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ke(a(this)?this.valueSeq():this)},toList:function(){return Ut(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return Te(this,ge(this,sr.call(arguments,0)))},includes:function(t){return this.some(function(e){return X(e,t)})},entries:function(){return this.__iterator(br)},every:function(t,e){lt(this.size);var r=!0;return this.__iterate(function(n,i,o){if(!t.call(e,n,i,o))return r=!1,!1}),r},filter:function(t,e){return Te(this,le(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return lt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){lt(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate(function(n){r?r=!1:e+=t,e+=null!==n&&void 0!==n?n.toString():""}),e},keys:function(){return this.__iterator(mr)},map:function(t,e){return Te(this,ue(this,t,e))},reduce:function(t,e,r){lt(this.size);var n,i;return arguments.length<2?i=!0:n=e,this.__iterate(function(e,o,a){i?(i=!1,n=e):n=t.call(r,n,e,o,a)}),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return Te(this,ce(this,!0))},slice:function(t,e){return Te(this,he(this,t,e,!0))},some:function(t,e){return!this.every(Je(t),e)},sort:function(t){return Te(this,be(this,t))},values:function(){return this.__iterator(_r)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return d(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return fe(this,t,e)},equals:function(t){return $(this,t)},entrySeq:function(){var t=this;if(t._cache)return new P(t._cache);var e=t.toSeq().map(Ze).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Je(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate(function(r,i,o){if(t.call(e,r,i,o))return n=[i,r],!1}),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(g)},flatMap:function(t,e){return Te(this,me(this,t,e))},flatten:function(t){return Te(this,ve(this,t,!0))},fromEntrySeq:function(){return new ae(this)},get:function(t,e){return this.find(function(e,r){return X(r,t)},void 0,e)},getIn:function(t,e){for(var r,n=this,i=De(t);!(r=i.next()).done;){var o=r.value;if((n=n&&n.get?n.get(o,yr):yr)===yr)return e}return n},groupBy:function(t,e){return pe(this,t,e)},has:function(t){return this.get(t,yr)!==yr},hasIn:function(t){return this.getIn(t,yr)!==yr},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return X(e,t)})},keySeq:function(){return this.toSeq().map(Qe).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return we(this,t)},maxBy:function(t,e){return we(this,e,t)},min:function(t){return we(this,t?tr(t):nr)},minBy:function(t,e){return we(this,e?tr(e):nr,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Te(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Te(this,ye(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Je(t),e)},sortBy:function(t,e){return Te(this,be(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Te(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Te(this,de(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Je(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ir(this))}});var an=e.prototype;an[ur]=!0,an[kr]=an.values,an.__toJS=an.toArray,an.__toStringMapper=er,an.inspect=an.toSource=function(){return this.toString()},an.chain=an.flatMap,an.contains=an.includes,$e(r,{flip:function(){return Te(this,se(this))},mapEntries:function(t,e){var r=this,n=0;return Te(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],n++,r)}).fromEntrySeq())},mapKeys:function(t,e){var r=this;return Te(this,this.toSeq().flip().map(function(n,i){return t.call(e,n,i,r)}).flip())}});var sn=r.prototype;return sn[cr]=!0,sn[kr]=an.entries,sn.__toJS=an.toObject,sn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+er(t)},$e(n,{toKeyedSeq:function(){return new ne(this,!1)},filter:function(t,e){return Te(this,le(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Te(this,ce(this,!1))},slice:function(t,e){return Te(this,he(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=m(t,t<0?this.count():this.size);var n=this.slice(0,t);return Te(this,1===r?n:n.concat(h(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Te(this,ve(this,t,!1))},get:function(t,e){return t=y(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,r){return r===t},void 0,e)},has:function(t){return(t=y(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Te(this,_e(this,t))},interleave:function(){var t=[this].concat(h(arguments)),e=ke(this.toSeq(),D.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Te(this,r)},keySeq:function(){return J(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Te(this,ye(this,t,e,!1))},zip:function(){return Te(this,ke(this,rr,[this].concat(h(arguments))))},zipWith:function(t){var e=h(arguments);return e[0]=this,Te(this,ke(this,t,e))}}),n.prototype[lr]=!0,n.prototype[fr]=!0,$e(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=an.includes,i.prototype.contains=i.prototype.includes,$e(A,r.prototype),$e(D,n.prototype),$e(x,i.prototype),$e(et,r.prototype),$e(rt,n.prototype),$e(nt,i.prototype),{Iterable:e,Seq:C,Collection:tt,Map:ft,OrderedMap:Zt,List:Ut,Stack:Ke,Set:Le,OrderedSet:qe,Record:xe,Range:J,Repeat:Q,is:X,fromJS:G}})},function(t,e,r){(function(t,n){var i;(function(){function o(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function a(t,e,r,n){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(n,a,r(a),t)}return n}function s(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function u(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function c(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function l(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}function f(t,e){return!!(null==t?0:t.length)&&E(t,e,0)>-1}function p(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function h(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function d(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function y(t,e,r,n){var i=-1,o=null==t?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function g(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function v(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function m(t){return t.split("")}function _(t){return t.match(Be)||[]}function b(t,e,r){var n;return r(t,function(t,r,i){if(e(t,r,i))return n=r,!1}),n}function w(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function E(t,e,r){return e===e?$(t,e,r):w(t,T,r)}function k(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}function T(t){return t!==t}function O(t,e){var r=null==t?0:t.length;return r?A(t,e)/r:Rt}function S(t){return function(e){return null==e?nt:e[t]}}function j(t){return function(e){return null==t?nt:t[e]}}function I(t,e,r,n,i){return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function C(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function A(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==nt&&(r=r===nt?o:r+o)}return r}function D(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function x(t,e){return h(e,function(e){return[e,t[e]]})}function P(t){return function(e){return t(e)}}function R(t,e){return h(e,function(e){return t[e]})}function M(t,e){return t.has(e)}function N(t,e){for(var r=-1,n=t.length;++r<n&&E(e,t[r],0)>-1;);return r}function L(t,e){for(var r=t.length;r--&&E(e,t[r],0)>-1;);return r}function B(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}function U(t){return"\\"+Or[t]}function z(t,e){return null==t?nt:t[e]}function F(t){return gr.test(t)}function q(t){return vr.test(t)}function W(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function H(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function G(t,e){return function(r){return t(e(r))}}function K(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var a=t[r];a!==e&&a!==ct||(t[r]=ct,o[i++]=r)}return o}function V(t,e){return"__proto__"==e?nt:t[e]}function Y(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function X(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function $(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function Q(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}function Z(t){return F(t)?tt(t):qr(t)}function J(t){return F(t)?et(t):m(t)}function tt(t){for(var e=dr.lastIndex=0;dr.test(t);)++e;return e}function et(t){return t.match(dr)||[]}function rt(t){return t.match(yr)||[]}var nt,it=200,ot="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",at="Expected a function",st="__lodash_hash_undefined__",ut=500,ct="__lodash_placeholder__",lt=1,ft=2,pt=4,ht=1,dt=2,yt=1,gt=2,vt=4,mt=8,_t=16,bt=32,wt=64,Et=128,kt=256,Tt=512,Ot=30,St="...",jt=800,It=16,Ct=1,At=2,Dt=1/0,xt=9007199254740991,Pt=1.7976931348623157e308,Rt=NaN,Mt=4294967295,Nt=Mt-1,Lt=Mt>>>1,Bt=[["ary",Et],["bind",yt],["bindKey",gt],["curry",mt],["curryRight",_t],["flip",Tt],["partial",bt],["partialRight",wt],["rearg",kt]],Ut="[object Arguments]",zt="[object Array]",Ft="[object AsyncFunction]",qt="[object Boolean]",Wt="[object Date]",Ht="[object DOMException]",Gt="[object Error]",Kt="[object Function]",Vt="[object GeneratorFunction]",Yt="[object Map]",Xt="[object Number]",$t="[object Null]",Qt="[object Object]",Zt="[object Proxy]",Jt="[object RegExp]",te="[object Set]",ee="[object String]",re="[object Symbol]",ne="[object Undefined]",ie="[object WeakMap]",oe="[object WeakSet]",ae="[object ArrayBuffer]",se="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",le="[object Int8Array]",fe="[object Int16Array]",pe="[object Int32Array]",he="[object Uint8Array]",de="[object Uint8ClampedArray]",ye="[object Uint16Array]",ge="[object Uint32Array]",ve=/\b__p \+= '';/g,me=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39);/g,we=/[&<>"']/g,Ee=RegExp(be.source),ke=RegExp(we.source),Te=/<%-([\s\S]+?)%>/g,Oe=/<%([\s\S]+?)%>/g,Se=/<%=([\s\S]+?)%>/g,je=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ae=/[\\^$.*+?()[\]{}|]/g,De=RegExp(Ae.source),xe=/^\s+|\s+$/g,Pe=/^\s+/,Re=/\s+$/,Me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ne=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,Be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/\\(\\)?/g,ze=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fe=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,He=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,Ke=/^(?:0|[1-9]\d*)$/,Ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ye=/($^)/,Xe=/['\n\r\u2028\u2029\\]/g,$e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ze="["+Qe+"]",Je="["+$e+"]",tr="[a-z\\xdf-\\xf6\\xf8-\\xff]",er="[^\\ud800-\\udfff"+Qe+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rr="\\ud83c[\\udffb-\\udfff]",nr="(?:\\ud83c[\\udde6-\\uddff]){2}",ir="[\\ud800-\\udbff][\\udc00-\\udfff]",or="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ar="(?:"+tr+"|"+er+")",sr="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ur="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",nr,ir].join("|")+")[\\ufe0e\\ufe0f]?"+sr+")*",cr="[\\ufe0e\\ufe0f]?"+sr+ur,lr="(?:"+["[\\u2700-\\u27bf]",nr,ir].join("|")+")"+cr,fr="(?:"+["[^\\ud800-\\udfff]"+Je+"?",Je,nr,ir,"[\\ud800-\\udfff]"].join("|")+")",pr=RegExp("[']","g"),hr=RegExp(Je,"g"),dr=RegExp(rr+"(?="+rr+")|"+fr+cr,"g"),yr=RegExp([or+"?"+tr+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[Ze,or,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[Ze,or+ar,"$"].join("|")+")",or+"?"+ar+"+(?:['](?:d|ll|m|re|s|t|ve))?",or+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",lr].join("|"),"g"),gr=RegExp("[\\u200d\\ud800-\\udfff"+$e+"\\ufe0e\\ufe0f]"),vr=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_r=-1,br={};br[ue]=br[ce]=br[le]=br[fe]=br[pe]=br[he]=br[de]=br[ye]=br[ge]=!0,br[Ut]=br[zt]=br[ae]=br[qt]=br[se]=br[Wt]=br[Gt]=br[Kt]=br[Yt]=br[Xt]=br[Qt]=br[Jt]=br[te]=br[ee]=br[ie]=!1;var wr={};wr[Ut]=wr[zt]=wr[ae]=wr[se]=wr[qt]=wr[Wt]=wr[ue]=wr[ce]=wr[le]=wr[fe]=wr[pe]=wr[Yt]=wr[Xt]=wr[Qt]=wr[Jt]=wr[te]=wr[ee]=wr[re]=wr[he]=wr[de]=wr[ye]=wr[ge]=!0,wr[Gt]=wr[Kt]=wr[ie]=!1;var Er={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},kr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Or={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sr=parseFloat,jr=parseInt,Ir="object"==typeof t&&t&&t.Object===Object&&t,Cr="object"==typeof self&&self&&self.Object===Object&&self,Ar=Ir||Cr||Function("return this")(),Dr="object"==typeof e&&e&&!e.nodeType&&e,xr=Dr&&"object"==typeof n&&n&&!n.nodeType&&n,Pr=xr&&xr.exports===Dr,Rr=Pr&&Ir.process,Mr=function(){try{var t=xr&&xr.require&&xr.require("util").types;return t||Rr&&Rr.binding&&Rr.binding("util")}catch(t){}}(),Nr=Mr&&Mr.isArrayBuffer,Lr=Mr&&Mr.isDate,Br=Mr&&Mr.isMap,Ur=Mr&&Mr.isRegExp,zr=Mr&&Mr.isSet,Fr=Mr&&Mr.isTypedArray,qr=S("length"),Wr=j(Er),Hr=j(kr),Gr=j(Tr),Kr=function t(e){function r(t){if(eu(t)&&!hp(t)&&!(t instanceof m)){if(t instanceof i)return t;if(pl.call(t,"__wrapped__"))return Zo(t)}return new i(t)}function n(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=nt}function m(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Mt,this.__views__=[]}function j(){var t=new m(this.__wrapped__);return t.__actions__=Pi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Pi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Pi(this.__views__),t}function $(){if(this.__filtered__){var t=new m(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function tt(){var t=this.__wrapped__.value(),e=this.__dir__,r=hp(t),n=e<0,i=r?t.length:0,o=ko(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=n?s:a-1,l=this.__iteratees__,f=l.length,p=0,h=ql(u,this.__takeCount__);if(!r||!n&&i==u&&h==u)return gi(t,this.__actions__);var d=[];t:for(;u--&&p<h;){c+=e;for(var y=-1,g=t[c];++y<f;){var v=l[y],m=v.iteratee,_=v.type,b=m(g);if(_==At)g=b;else if(!b){if(_==Ct)continue t;break t}}d[p++]=g}return d}function et(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Be(){this.__data__=Zl?Zl(null):{},this.size=0}function $e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Qe(t){var e=this.__data__;if(Zl){var r=e[t];return r===st?nt:r}return pl.call(e,t)?e[t]:nt}function Ze(t){var e=this.__data__;return Zl?e[t]!==nt:pl.call(e,t)}function Je(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Zl&&e===nt?st:e,this}function tr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function er(){this.__data__=[],this.size=0}function rr(t){var e=this.__data__,r=Vr(e,t);return!(r<0)&&(r==e.length-1?e.pop():Sl.call(e,r,1),--this.size,!0)}function nr(t){var e=this.__data__,r=Vr(e,t);return r<0?nt:e[r][1]}function ir(t){return Vr(this.__data__,t)>-1}function or(t,e){var r=this.__data__,n=Vr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function ar(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function sr(){this.size=0,this.__data__={hash:new et,map:new(Yl||tr),string:new et}}function ur(t){var e=_o(this,t).delete(t);return this.size-=e?1:0,e}function cr(t){return _o(this,t).get(t)}function lr(t){return _o(this,t).has(t)}function fr(t,e){var r=_o(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function dr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ar;++e<r;)this.add(t[e])}function yr(t){return this.__data__.set(t,st),this}function gr(t){return this.__data__.has(t)}function vr(t){var e=this.__data__=new tr(t);this.size=e.size}function Er(){this.__data__=new tr,this.size=0}function kr(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Tr(t){return this.__data__.get(t)}function Or(t){return this.__data__.has(t)}function Ir(t,e){var r=this.__data__;if(r instanceof tr){var n=r.__data__;if(!Yl||n.length<it-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ar(n)}return r.set(t,e),this.size=r.size,this}function Cr(t,e){var r=hp(t),n=!r&&pp(t),i=!r&&!n&&yp(t),o=!r&&!n&&!i&&bp(t),a=r||n||i||o,s=a?D(t.length,ol):[],u=s.length;for(var c in t)!e&&!pl.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Do(c,u))||s.push(c);return s}function Dr(t){var e=t.length;return e?t[Qn(0,e-1)]:nt}function xr(t,e){return Yo(Pi(t),Jr(e,0,t.length))}function Rr(t){return Yo(Pi(t))}function Mr(t,e,r){(r===nt||Fs(t[e],r))&&(r!==nt||e in t)||Qr(t,e,r)}function qr(t,e,r){var n=t[e];pl.call(t,e)&&Fs(n,r)&&(r!==nt||e in t)||Qr(t,e,r)}function Vr(t,e){for(var r=t.length;r--;)if(Fs(t[r][0],e))return r;return-1}function Yr(t,e,r,n){return ff(t,function(t,i,o){e(n,t,r(t),o)}),n}function Xr(t,e){return t&&Ri(e,Nu(e),t)}function $r(t,e){return t&&Ri(e,Lu(e),t)}function Qr(t,e,r){"__proto__"==e&&Al?Al(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Zr(t,e){for(var r=-1,n=e.length,i=Zc(n),o=null==t;++r<n;)i[r]=o?nt:Pu(t,e[r]);return i}function Jr(t,e,r){return t===t&&(r!==nt&&(t=t<=r?t:r),e!==nt&&(t=t>=e?t:e)),t}function tn(t,e,r,n,i,o){var a,u=e&lt,c=e&ft,l=e&pt;if(r&&(a=i?r(t,n,i,o):r(t)),a!==nt)return a;if(!tu(t))return t;var f=hp(t);if(f){if(a=So(t),!u)return Pi(t,a)}else{var p=kf(t),h=p==Kt||p==Vt;if(yp(t))return ki(t,u);if(p==Qt||p==Ut||h&&!i){if(a=c||h?{}:jo(t),!u)return c?Ni(t,$r(a,t)):Mi(t,Xr(a,t))}else{if(!wr[p])return i?t:{};a=Io(t,p,u)}}o||(o=new vr);var d=o.get(t);if(d)return d;if(o.set(t,a),_p(t))return t.forEach(function(n){a.add(tn(n,e,r,n,t,o))}),a;if(vp(t))return t.forEach(function(n,i){a.set(i,tn(n,e,r,i,t,o))}),a;var y=l?c?yo:ho:c?Lu:Nu,g=f?nt:y(t);return s(g||t,function(n,i){g&&(i=n,n=t[i]),qr(a,i,tn(n,e,r,i,t,o))}),a}function en(t){var e=Nu(t);return function(r){return rn(r,t,e)}}function rn(t,e,r){var n=r.length;if(null==t)return!n;for(t=nl(t);n--;){var i=r[n],o=e[i],a=t[i];if(a===nt&&!(i in t)||!o(a))return!1}return!0}function nn(t,e,r){if("function"!=typeof t)throw new al(at);return Sf(function(){t.apply(nt,r)},e)}function on(t,e,r,n){var i=-1,o=f,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;r&&(e=h(e,P(r))),n?(o=p,a=!1):e.length>=it&&(o=M,a=!1,e=new dr(e));t:for(;++i<s;){var l=t[i],d=null==r?l:r(l);if(l=n||0!==l?l:0,a&&d===d){for(var y=c;y--;)if(e[y]===d)continue t;u.push(l)}else o(e,d,n)||u.push(l)}return u}function an(t,e){var r=!0;return ff(t,function(t,n,i){return r=!!e(t,n,i)}),r}function sn(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(null!=a&&(s===nt?a===a&&!pu(a):r(a,s)))var s=a,u=o}return u}function un(t,e,r,n){var i=t.length;for(r=mu(r),r<0&&(r=-r>i?0:i+r),n=n===nt||n>i?i:mu(n),n<0&&(n+=i),n=r>n?0:_u(n);r<n;)t[r++]=e;return t}function cn(t,e){var r=[];return ff(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function ln(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=Ao),i||(i=[]);++o<a;){var s=t[o];e>0&&r(s)?e>1?ln(s,e-1,r,n,i):d(i,s):n||(i[i.length]=s)}return i}function fn(t,e){return t&&hf(t,e,Nu)}function pn(t,e){return t&&df(t,e,Nu)}function hn(t,e){return l(e,function(e){return Qs(t[e])})}function dn(t,e){e=wi(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[Xo(e[r++])];return r&&r==n?t:nt}function yn(t,e,r){var n=e(t);return hp(t)?n:d(n,r(t))}function gn(t){return null==t?t===nt?ne:$t:Cl&&Cl in nl(t)?Eo(t):qo(t)}function vn(t,e){return t>e}function mn(t,e){return null!=t&&pl.call(t,e)}function _n(t,e){return null!=t&&e in nl(t)}function bn(t,e,r){return t>=ql(e,r)&&t<Fl(e,r)}function wn(t,e,r){for(var n=r?p:f,i=t[0].length,o=t.length,a=o,s=Zc(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=h(l,P(e))),u=ql(l.length,u),s[a]=!r&&(e||i>=120&&l.length>=120)?new dr(a&&l):nt}l=t[0];var d=-1,y=s[0];t:for(;++d<i&&c.length<u;){var g=l[d],v=e?e(g):g;if(g=r||0!==g?g:0,!(y?M(y,v):n(c,v,r))){for(a=o;--a;){var m=s[a];if(!(m?M(m,v):n(t[a],v,r)))continue t}y&&y.push(v),c.push(g)}}return c}function En(t,e,r,n){return fn(t,function(t,i,o){e(n,r(t),i,o)}),n}function kn(t,e,r){e=wi(e,t),t=Ho(t,e);var n=null==t?t:t[Xo(va(e))];return null==n?nt:o(n,t,r)}function Tn(t){return eu(t)&&gn(t)==Ut}function On(t){return eu(t)&&gn(t)==ae}function Sn(t){return eu(t)&&gn(t)==Wt}function jn(t,e,r,n,i){return t===e||(null==t||null==e||!eu(t)&&!eu(e)?t!==t&&e!==e:In(t,e,r,n,jn,i))}function In(t,e,r,n,i,o){var a=hp(t),s=hp(e),u=a?zt:kf(t),c=s?zt:kf(e);u=u==Ut?Qt:u,c=c==Ut?Qt:c;var l=u==Qt,f=c==Qt,p=u==c;if(p&&yp(t)){if(!yp(e))return!1;a=!0,l=!1}if(p&&!l)return o||(o=new vr),a||bp(t)?co(t,e,r,n,i,o):lo(t,e,u,r,n,i,o);if(!(r&ht)){var h=l&&pl.call(t,"__wrapped__"),d=f&&pl.call(e,"__wrapped__");if(h||d){var y=h?t.value():t,g=d?e.value():e;return o||(o=new vr),i(y,g,r,n,o)}}return!!p&&(o||(o=new vr),fo(t,e,r,n,i,o))}function Cn(t){return eu(t)&&kf(t)==Yt}function An(t,e,r,n){var i=r.length,o=i,a=!n;if(null==t)return!o;for(t=nl(t);i--;){var s=r[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=r[i];var u=s[0],c=t[u],l=s[1];if(a&&s[2]){if(c===nt&&!(u in t))return!1}else{var f=new vr;if(n)var p=n(c,l,u,t,e,f);if(!(p===nt?jn(l,c,ht|dt,n,f):p))return!1}}return!0}function Dn(t){return!(!tu(t)||No(t))&&(Qs(t)?ml:He).test($o(t))}function xn(t){return eu(t)&&gn(t)==Jt}function Pn(t){return eu(t)&&kf(t)==te}function Rn(t){return eu(t)&&Js(t.length)&&!!br[gn(t)]}function Mn(t){return"function"==typeof t?t:null==t?Sc:"object"==typeof t?hp(t)?Fn(t[0],t[1]):zn(t):Rc(t)}function Nn(t){if(!Lo(t))return zl(t);var e=[];for(var r in nl(t))pl.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Ln(t){if(!tu(t))return Fo(t);var e=Lo(t),r=[];for(var n in t)("constructor"!=n||!e&&pl.call(t,n))&&r.push(n);return r}function Bn(t,e){return t<e}function Un(t,e){var r=-1,n=qs(t)?Zc(t.length):[];return ff(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function zn(t){var e=bo(t);return 1==e.length&&e[0][2]?Uo(e[0][0],e[0][1]):function(r){return r===t||An(r,t,e)}}function Fn(t,e){return Po(t)&&Bo(e)?Uo(Xo(t),e):function(r){var n=Pu(r,t);return n===nt&&n===e?Mu(r,t):jn(e,n,ht|dt)}}function qn(t,e,r,n,i){t!==e&&hf(e,function(o,a){if(tu(o))i||(i=new vr),Wn(t,e,a,r,qn,n,i);else{var s=n?n(V(t,a),o,a+"",t,e,i):nt;s===nt&&(s=o),Mr(t,a,s)}},Lu)}function Wn(t,e,r,n,i,o,a){var s=V(t,r),u=V(e,r),c=a.get(u);if(c)return void Mr(t,r,c);var l=o?o(s,u,r+"",t,e,a):nt,f=l===nt;if(f){var p=hp(u),h=!p&&yp(u),d=!p&&!h&&bp(u);l=u,p||h||d?hp(s)?l=s:Ws(s)?l=Pi(s):h?(f=!1,l=ki(u,!0)):d?(f=!1,l=Ii(u,!0)):l=[]:cu(u)||pp(u)?(l=s,pp(s)?l=wu(s):(!tu(s)||n&&Qs(s))&&(l=jo(u))):f=!1}f&&(a.set(u,l),i(l,u,n,o,a),a.delete(u)),Mr(t,r,l)}function Hn(t,e){var r=t.length;if(r)return e+=e<0?r:0,Do(e,r)?t[e]:nt}function Gn(t,e,r){var n=-1;return e=h(e.length?e:[Sc],P(mo())),C(Un(t,function(t,r,i){return{criteria:h(e,function(e){return e(t)}),index:++n,value:t}}),function(t,e){return Ai(t,e,r)})}function Kn(t,e){return Vn(t,e,function(e,r){return Mu(t,r)})}function Vn(t,e,r){for(var n=-1,i=e.length,o={};++n<i;){var a=e[n],s=dn(t,a);r(s,a)&&ni(o,wi(a,t),s)}return o}function Yn(t){return function(e){return dn(e,t)}}function Xn(t,e,r,n){var i=n?k:E,o=-1,a=e.length,s=t;for(t===e&&(e=Pi(e)),r&&(s=h(t,P(r)));++o<a;)for(var u=0,c=e[o],l=r?r(c):c;(u=i(s,l,u,n))>-1;)s!==t&&Sl.call(s,u,1),Sl.call(t,u,1);return t}function $n(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==o){var o=i;Do(i)?Sl.call(t,i,1):hi(t,i)}}return t}function Qn(t,e){return t+Ml(Gl()*(e-t+1))}function Zn(t,e,r,n){for(var i=-1,o=Fl(Rl((e-t)/(r||1)),0),a=Zc(o);o--;)a[n?o:++i]=t,t+=r;return a}function Jn(t,e){var r="";if(!t||e<1||e>xt)return r;do{e%2&&(r+=t),(e=Ml(e/2))&&(t+=t)}while(e);return r}function ti(t,e){return jf(Wo(t,e,Sc),t+"")}function ei(t){return Dr(Xu(t))}function ri(t,e){var r=Xu(t);return Yo(r,Jr(e,0,r.length))}function ni(t,e,r,n){if(!tu(t))return t;e=wi(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=Xo(e[i]),c=r;if(i!=a){var l=s[u];c=n?n(l,u,s):nt,c===nt&&(c=tu(l)?l:Do(e[i+1])?[]:{})}qr(s,u,c),s=s[u]}return t}function ii(t){return Yo(Xu(t))}function oi(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Zc(i);++n<i;)o[n]=t[n+e];return o}function ai(t,e){var r;return ff(t,function(t,n,i){return!(r=e(t,n,i))}),!!r}function si(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e===e&&i<=Lt){for(;n<i;){var o=n+i>>>1,a=t[o];null!==a&&!pu(a)&&(r?a<=e:a<e)?n=o+1:i=o}return i}return ui(t,e,Sc,r)}function ui(t,e,r,n){e=r(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=pu(e),c=e===nt;i<o;){var l=Ml((i+o)/2),f=r(t[l]),p=f!==nt,h=null===f,d=f===f,y=pu(f);if(a)var g=n||d;else g=c?d&&(n||p):s?d&&p&&(n||!h):u?d&&p&&!h&&(n||!y):!h&&!y&&(n?f<=e:f<e);g?i=l+1:o=l}return ql(o,Nt)}function ci(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var a=t[r],s=e?e(a):a;if(!r||!Fs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function li(t){return"number"==typeof t?t:pu(t)?Rt:+t}function fi(t){if("string"==typeof t)return t;if(hp(t))return h(t,fi)+"";if(pu(t))return cf?cf.call(t):"";var e=t+"";return"0"==e&&1/t==-Dt?"-0":e}function pi(t,e,r){var n=-1,i=f,o=t.length,a=!0,s=[],u=s;if(r)a=!1,i=p;else if(o>=it){var c=e?null:_f(t);if(c)return Y(c);a=!1,i=M,u=new dr}else u=e?[]:s;t:for(;++n<o;){var l=t[n],h=e?e(l):l;if(l=r||0!==l?l:0,a&&h===h){for(var d=u.length;d--;)if(u[d]===h)continue t;e&&u.push(h),s.push(l)}else i(u,h,r)||(u!==s&&u.push(h),s.push(l))}return s}function hi(t,e){return e=wi(e,t),null==(t=Ho(t,e))||delete t[Xo(va(e))]}function di(t,e,r,n){return ni(t,e,r(dn(t,e)),n)}function yi(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?oi(t,n?0:o,n?o+1:i):oi(t,n?o+1:0,n?i:o)}function gi(t,e){var r=t;return r instanceof m&&(r=r.value()),y(e,function(t,e){return e.func.apply(e.thisArg,d([t],e.args))},r)}function vi(t,e,r){var n=t.length;if(n<2)return n?pi(t[0]):[];for(var i=-1,o=Zc(n);++i<n;)for(var a=t[i],s=-1;++s<n;)s!=i&&(o[i]=on(o[i]||a,t[s],e,r));return pi(ln(o,1),e,r)}function mi(t,e,r){for(var n=-1,i=t.length,o=e.length,a={};++n<i;){var s=n<o?e[n]:nt;r(a,t[n],s)}return a}function _i(t){return Ws(t)?t:[]}function bi(t){return"function"==typeof t?t:Sc}function wi(t,e){return hp(t)?t:Po(t,e)?[t]:If(ku(t))}function Ei(t,e,r){var n=t.length;return r=r===nt?n:r,!e&&r>=n?t:oi(t,e,r)}function ki(t,e){if(e)return t.slice();var r=t.length,n=El?El(r):new t.constructor(r);return t.copy(n),n}function Ti(t){var e=new t.constructor(t.byteLength);return new wl(e).set(new wl(t)),e}function Oi(t,e){var r=e?Ti(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Si(t){var e=new t.constructor(t.source,Fe.exec(t));return e.lastIndex=t.lastIndex,e}function ji(t){return uf?nl(uf.call(t)):{}}function Ii(t,e){var r=e?Ti(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ci(t,e){if(t!==e){var r=t!==nt,n=null===t,i=t===t,o=pu(t),a=e!==nt,s=null===e,u=e===e,c=pu(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||n&&a&&u||!r&&u||!i)return 1;if(!n&&!o&&!c&&t<e||c&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!u)return-1}return 0}function Ai(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,s=r.length;++n<a;){var u=Ci(i[n],o[n]);if(u){if(n>=s)return u;return u*("desc"==r[n]?-1:1)}}return t.index-e.index}function Di(t,e,r,n){for(var i=-1,o=t.length,a=r.length,s=-1,u=e.length,c=Fl(o-a,0),l=Zc(u+c),f=!n;++s<u;)l[s]=e[s];for(;++i<a;)(f||i<o)&&(l[r[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function xi(t,e,r,n){for(var i=-1,o=t.length,a=-1,s=r.length,u=-1,c=e.length,l=Fl(o-s,0),f=Zc(l+c),p=!n;++i<l;)f[i]=t[i];for(var h=i;++u<c;)f[h+u]=e[u];for(;++a<s;)(p||i<o)&&(f[h+r[a]]=t[i++]);return f}function Pi(t,e){var r=-1,n=t.length;for(e||(e=Zc(n));++r<n;)e[r]=t[r];return e}function Ri(t,e,r,n){var i=!r;r||(r={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=n?n(r[s],t[s],s,r,t):nt;u===nt&&(u=t[s]),i?Qr(r,s,u):qr(r,s,u)}return r}function Mi(t,e){return Ri(t,wf(t),e)}function Ni(t,e){return Ri(t,Ef(t),e)}function Li(t,e){return function(r,n){var i=hp(r)?a:Yr,o=e?e():{};return i(r,t,mo(n,2),o)}}function Bi(t){return ti(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:nt,a=i>2?r[2]:nt;for(o=t.length>3&&"function"==typeof o?(i--,o):nt,a&&xo(r[0],r[1],a)&&(o=i<3?nt:o,i=1),e=nl(e);++n<i;){var s=r[n];s&&t(e,s,n,o)}return e})}function Ui(t,e){return function(r,n){if(null==r)return r;if(!qs(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=nl(r);(e?o--:++o<i)&&!1!==n(a[o],o,a););return r}}function zi(t){return function(e,r,n){for(var i=-1,o=nl(e),a=n(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===r(o[u],u,o))break}return e}}function Fi(t,e,r){function n(){return(this&&this!==Ar&&this instanceof n?o:t).apply(i?r:this,arguments)}var i=e&yt,o=Hi(t);return n}function qi(t){return function(e){e=ku(e);var r=F(e)?J(e):nt,n=r?r[0]:e.charAt(0),i=r?Ei(r,1).join(""):e.slice(1);return n[t]()+i}}function Wi(t){return function(e){return y(wc(ec(e).replace(pr,"")),t,"")}}function Hi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=lf(t.prototype),n=t.apply(r,e);return tu(n)?n:r}}function Gi(t,e,r){function n(){for(var a=arguments.length,s=Zc(a),u=a,c=vo(n);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:K(s,c);return(a-=l.length)<r?ro(t,e,Yi,n.placeholder,nt,s,l,nt,nt,r-a):o(this&&this!==Ar&&this instanceof n?i:t,this,s)}var i=Hi(t);return n}function Ki(t){return function(e,r,n){var i=nl(e);if(!qs(e)){var o=mo(r,3);e=Nu(e),r=function(t){return o(i[t],t,i)}}var a=t(e,r,n);return a>-1?i[o?e[a]:a]:nt}}function Vi(t){return po(function(e){var r=e.length,n=r,o=i.prototype.thru;for(t&&e.reverse();n--;){var a=e[n];if("function"!=typeof a)throw new al(at);if(o&&!s&&"wrapper"==go(a))var s=new i([],!0)}for(n=s?n:r;++n<r;){a=e[n];var u=go(a),c="wrapper"==u?bf(a):nt;s=c&&Mo(c[0])&&c[1]==(Et|mt|bt|kt)&&!c[4].length&&1==c[9]?s[go(c[0])].apply(s,c[3]):1==a.length&&Mo(a)?s[u]():s.thru(a)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&hp(n))return s.plant(n).value();for(var i=0,o=r?e[i].apply(this,t):n;++i<r;)o=e[i].call(this,o);return o}})}function Yi(t,e,r,n,i,o,a,s,u,c){function l(){for(var v=arguments.length,m=Zc(v),_=v;_--;)m[_]=arguments[_];if(d)var b=vo(l),w=B(m,b);if(n&&(m=Di(m,n,i,d)),o&&(m=xi(m,o,a,d)),v-=w,d&&v<c){var E=K(m,b);return ro(t,e,Yi,l.placeholder,r,m,E,s,u,c-v)}var k=p?r:this,T=h?k[t]:t;return v=m.length,s?m=Go(m,s):y&&v>1&&m.reverse(),f&&u<v&&(m.length=u),this&&this!==Ar&&this instanceof l&&(T=g||Hi(T)),T.apply(k,m)}var f=e&Et,p=e&yt,h=e&gt,d=e&(mt|_t),y=e&Tt,g=h?nt:Hi(t);return l}function Xi(t,e){return function(r,n){return En(r,t,e(n),{})}}function $i(t,e){return function(r,n){var i;if(r===nt&&n===nt)return e;if(r!==nt&&(i=r),n!==nt){if(i===nt)return n;"string"==typeof r||"string"==typeof n?(r=fi(r),n=fi(n)):(r=li(r),n=li(n)),i=t(r,n)}return i}}function Qi(t){return po(function(e){return e=h(e,P(mo())),ti(function(r){var n=this;return t(e,function(t){return o(t,n,r)})})})}function Zi(t,e){e=e===nt?" ":fi(e);var r=e.length;if(r<2)return r?Jn(e,t):e;var n=Jn(e,Rl(t/Z(e)));return F(e)?Ei(J(n),0,t).join(""):n.slice(0,t)}function Ji(t,e,r,n){function i(){for(var e=-1,u=arguments.length,c=-1,l=n.length,f=Zc(l+u),p=this&&this!==Ar&&this instanceof i?s:t;++c<l;)f[c]=n[c];for(;u--;)f[c++]=arguments[++e];return o(p,a?r:this,f)}var a=e&yt,s=Hi(t);return i}function to(t){return function(e,r,n){return n&&"number"!=typeof n&&xo(e,r,n)&&(r=n=nt),e=vu(e),r===nt?(r=e,e=0):r=vu(r),n=n===nt?e<r?1:-1:vu(n),Zn(e,r,n,t)}}function eo(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=bu(e),r=bu(r)),t(e,r)}}function ro(t,e,r,n,i,o,a,s,u,c){var l=e&mt,f=l?a:nt,p=l?nt:a,h=l?o:nt,d=l?nt:o;e|=l?bt:wt,(e&=~(l?wt:bt))&vt||(e&=~(yt|gt));var y=[t,e,i,h,f,d,p,s,u,c],g=r.apply(nt,y);return Mo(t)&&Of(g,y),g.placeholder=n,Ko(g,t,e)}function no(t){var e=rl[t];return function(t,r){if(t=bu(t),r=null==r?0:ql(mu(r),292)){var n=(ku(t)+"e").split("e");return n=(ku(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return e(t)}}function io(t){return function(e){var r=kf(e);return r==Yt?H(e):r==te?X(e):x(e,t(e))}}function oo(t,e,r,n,i,o,a,s){var u=e&gt;if(!u&&"function"!=typeof t)throw new al(at);var c=n?n.length:0;if(c||(e&=~(bt|wt),n=i=nt),a=a===nt?a:Fl(mu(a),0),s=s===nt?s:mu(s),c-=i?i.length:0,e&wt){var l=n,f=i;n=i=nt}var p=u?nt:bf(t),h=[t,e,r,n,i,l,f,o,a,s];if(p&&zo(h,p),t=h[0],e=h[1],r=h[2],n=h[3],i=h[4],s=h[9]=h[9]===nt?u?0:t.length:Fl(h[9]-c,0),!s&&e&(mt|_t)&&(e&=~(mt|_t)),e&&e!=yt)d=e==mt||e==_t?Gi(t,e,s):e!=bt&&e!=(yt|bt)||i.length?Yi.apply(nt,h):Ji(t,e,r,n);else var d=Fi(t,e,r);return Ko((p?yf:Of)(d,h),t,e)}function ao(t,e,r,n){return t===nt||Fs(t,cl[r])&&!pl.call(n,r)?e:t}function so(t,e,r,n,i,o){return tu(t)&&tu(e)&&(o.set(e,t),qn(t,e,nt,so,o),o.delete(e)),t}function uo(t){return cu(t)?nt:t}function co(t,e,r,n,i,o){var a=r&ht,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,f=!0,p=r&dt?new dr:nt;for(o.set(t,e),o.set(e,t);++l<s;){var h=t[l],d=e[l];if(n)var y=a?n(d,h,l,e,t,o):n(h,d,l,t,e,o);if(y!==nt){if(y)continue;f=!1;break}if(p){if(!v(e,function(t,e){if(!M(p,e)&&(h===t||i(h,t,r,n,o)))return p.push(e)})){f=!1;break}}else if(h!==d&&!i(h,d,r,n,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function lo(t,e,r,n,i,o,a){switch(r){case se:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ae:return!(t.byteLength!=e.byteLength||!o(new wl(t),new wl(e)));case qt:case Wt:case Xt:return Fs(+t,+e);case Gt:return t.name==e.name&&t.message==e.message;case Jt:case ee:return t==e+"";case Yt:var s=H;case te:var u=n&ht;if(s||(s=Y),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;n|=dt,a.set(t,e);var l=co(s(t),s(e),n,i,o,a);return a.delete(t),l;case re:if(uf)return uf.call(t)==uf.call(e)}return!1}function fo(t,e,r,n,i,o){var a=r&ht,s=ho(t),u=s.length;if(u!=ho(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:pl.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var p=!0;o.set(t,e),o.set(e,t);for(var h=a;++c<u;){l=s[c];var d=t[l],y=e[l];if(n)var g=a?n(y,d,l,e,t,o):n(d,y,l,t,e,o);if(!(g===nt?d===y||i(d,y,r,n,o):g)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var v=t.constructor,m=e.constructor;v!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(p=!1)}return o.delete(t),o.delete(e),p}function po(t){return jf(Wo(t,nt,ca),t+"")}function ho(t){return yn(t,Nu,wf)}function yo(t){return yn(t,Lu,Ef)}function go(t){for(var e=t.name+"",r=tf[e],n=pl.call(tf,e)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function vo(t){return(pl.call(r,"placeholder")?r:t).placeholder}function mo(){var t=r.iteratee||jc;return t=t===jc?Mn:t,arguments.length?t(arguments[0],arguments[1]):t}function _o(t,e){var r=t.__data__;return Ro(e)?r["string"==typeof e?"string":"hash"]:r.map}function bo(t){for(var e=Nu(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Bo(i)]}return e}function wo(t,e){var r=z(t,e);return Dn(r)?r:nt}function Eo(t){var e=pl.call(t,Cl),r=t[Cl];try{t[Cl]=nt;var n=!0}catch(t){}var i=yl.call(t);return n&&(e?t[Cl]=r:delete t[Cl]),i}function ko(t,e,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ql(e,t+a);break;case"takeRight":t=Fl(t,e-a)}}return{start:t,end:e}}function To(t){var e=t.match(Ne);return e?e[1].split(Le):[]}function Oo(t,e,r){e=wi(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=Xo(e[n]);if(!(o=null!=t&&r(t,a)))break;t=t[a]}return o||++n!=i?o:!!(i=null==t?0:t.length)&&Js(i)&&Do(a,i)&&(hp(t)||pp(t))}function So(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&pl.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function jo(t){return"function"!=typeof t.constructor||Lo(t)?{}:lf(kl(t))}function Io(t,e,r){var n=t.constructor;switch(e){case ae:return Ti(t);case qt:case Wt:return new n(+t);case se:return Oi(t,r);case ue:case ce:case le:case fe:case pe:case he:case de:case ye:case ge:return Ii(t,r);case Yt:return new n;case Xt:case ee:return new n(t);case Jt:return Si(t);case te:return new n;case re:return ji(t)}}function Co(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Me,"{\n/* [wrapped with "+e+"] */\n")}function Ao(t){return hp(t)||pp(t)||!!(jl&&t&&t[jl])}function Do(t,e){var r=typeof t;return!!(e=null==e?xt:e)&&("number"==r||"symbol"!=r&&Ke.test(t))&&t>-1&&t%1==0&&t<e}function xo(t,e,r){if(!tu(r))return!1;var n=typeof e;return!!("number"==n?qs(r)&&Do(e,r.length):"string"==n&&e in r)&&Fs(r[e],t)}function Po(t,e){if(hp(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!pu(t))||(Ie.test(t)||!je.test(t)||null!=e&&t in nl(e))}function Ro(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Mo(t){var e=go(t),n=r[e];if("function"!=typeof n||!(e in m.prototype))return!1;if(t===n)return!0;var i=bf(n);return!!i&&t===i[0]}function No(t){return!!dl&&dl in t}function Lo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||cl)}function Bo(t){return t===t&&!tu(t)}function Uo(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==nt||t in nl(r)))}}function zo(t,e){var r=t[1],n=e[1],i=r|n,o=i<(yt|gt|Et),a=n==Et&&r==mt||n==Et&&r==kt&&t[7].length<=e[8]||n==(Et|kt)&&e[7].length<=e[8]&&r==mt;if(!o&&!a)return t;n&yt&&(t[2]=e[2],i|=r&yt?0:vt);var s=e[3];if(s){var u=t[3];t[3]=u?Di(u,s,e[4]):s,t[4]=u?K(t[3],ct):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?xi(u,s,e[6]):s,t[6]=u?K(t[5],ct):e[6]),s=e[7],s&&(t[7]=s),n&Et&&(t[8]=null==t[8]?e[8]:ql(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Fo(t){var e=[];if(null!=t)for(var r in nl(t))e.push(r);return e}function qo(t){return yl.call(t)}function Wo(t,e,r){return e=Fl(e===nt?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=Fl(n.length-e,0),s=Zc(a);++i<a;)s[i]=n[e+i];i=-1;for(var u=Zc(e+1);++i<e;)u[i]=n[i];return u[e]=r(s),o(t,this,u)}}function Ho(t,e){return e.length<2?t:dn(t,oi(e,0,-1))}function Go(t,e){for(var r=t.length,n=ql(e.length,r),i=Pi(t);n--;){var o=e[n];t[n]=Do(o,r)?i[o]:nt}return t}function Ko(t,e,r){var n=e+"";return jf(t,Co(n,Qo(To(n),r)))}function Vo(t){var e=0,r=0;return function(){var n=Wl(),i=It-(n-r);if(r=n,i>0){if(++e>=jt)return arguments[0]}else e=0;return t.apply(nt,arguments)}}function Yo(t,e){var r=-1,n=t.length,i=n-1;for(e=e===nt?n:e;++r<e;){var o=Qn(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}function Xo(t){if("string"==typeof t||pu(t))return t;var e=t+"";return"0"==e&&1/t==-Dt?"-0":e}function $o(t){if(null!=t){try{return fl.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Qo(t,e){return s(Bt,function(r){var n="_."+r[0];e&r[1]&&!f(t,n)&&t.push(n)}),t.sort()}function Zo(t){if(t instanceof m)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Pi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Jo(t,e,r){e=(r?xo(t,e,r):e===nt)?1:Fl(mu(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var i=0,o=0,a=Zc(Rl(n/e));i<n;)a[o++]=oi(t,i,i+=e);return a}function ta(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var o=t[e];o&&(i[n++]=o)}return i}function ea(){var t=arguments.length;if(!t)return[];for(var e=Zc(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return d(hp(r)?Pi(r):[r],ln(e,1))}function ra(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===nt?1:mu(e),oi(t,e<0?0:e,n)):[]}function na(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===nt?1:mu(e),e=n-e,oi(t,0,e<0?0:e)):[]}function ia(t,e){return t&&t.length?yi(t,mo(e,3),!0,!0):[]}function oa(t,e){return t&&t.length?yi(t,mo(e,3),!0):[]}function aa(t,e,r,n){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&xo(t,e,r)&&(r=0,n=i),un(t,e,r,n)):[]}function sa(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:mu(r);return i<0&&(i=Fl(n+i,0)),w(t,mo(e,3),i)}function ua(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;return r!==nt&&(i=mu(r),i=r<0?Fl(n+i,0):ql(i,n-1)),w(t,mo(e,3),i,!0)}function ca(t){return(null==t?0:t.length)?ln(t,1):[]}function la(t){return(null==t?0:t.length)?ln(t,Dt):[]}function fa(t,e){return(null==t?0:t.length)?(e=e===nt?1:mu(e),ln(t,e)):[]}function pa(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n}function ha(t){return t&&t.length?t[0]:nt}function da(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:mu(r);return i<0&&(i=Fl(n+i,0)),E(t,e,i)}function ya(t){return(null==t?0:t.length)?oi(t,0,-1):[]}function ga(t,e){return null==t?"":Ul.call(t,e)}function va(t){var e=null==t?0:t.length;return e?t[e-1]:nt}function ma(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;return r!==nt&&(i=mu(r),i=i<0?Fl(n+i,0):ql(i,n-1)),e===e?Q(t,e,i):w(t,T,i,!0)}function _a(t,e){return t&&t.length?Hn(t,mu(e)):nt}function ba(t,e){return t&&t.length&&e&&e.length?Xn(t,e):t}function wa(t,e,r){return t&&t.length&&e&&e.length?Xn(t,e,mo(r,2)):t}function Ea(t,e,r){return t&&t.length&&e&&e.length?Xn(t,e,nt,r):t}function ka(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],o=t.length;for(e=mo(e,3);++n<o;){var a=t[n];e(a,n,t)&&(r.push(a),i.push(n))}return $n(t,i),r}function Ta(t){return null==t?t:Kl.call(t)}function Oa(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&xo(t,e,r)?(e=0,r=n):(e=null==e?0:mu(e),r=r===nt?n:mu(r)),oi(t,e,r)):[]}function Sa(t,e){return si(t,e)}function ja(t,e,r){return ui(t,e,mo(r,2))}function Ia(t,e){var r=null==t?0:t.length;if(r){var n=si(t,e);if(n<r&&Fs(t[n],e))return n}return-1}function Ca(t,e){return si(t,e,!0)}function Aa(t,e,r){return ui(t,e,mo(r,2),!0)}function Da(t,e){if(null==t?0:t.length){var r=si(t,e,!0)-1;if(Fs(t[r],e))return r}return-1}function xa(t){return t&&t.length?ci(t):[]}function Pa(t,e){return t&&t.length?ci(t,mo(e,2)):[]}function Ra(t){var e=null==t?0:t.length;return e?oi(t,1,e):[]}function Ma(t,e,r){return t&&t.length?(e=r||e===nt?1:mu(e),oi(t,0,e<0?0:e)):[]}function Na(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===nt?1:mu(e),e=n-e,oi(t,e<0?0:e,n)):[]}function La(t,e){return t&&t.length?yi(t,mo(e,3),!1,!0):[]}function Ba(t,e){return t&&t.length?yi(t,mo(e,3)):[]}function Ua(t){return t&&t.length?pi(t):[]}function za(t,e){return t&&t.length?pi(t,mo(e,2)):[]}function Fa(t,e){return e="function"==typeof e?e:nt,t&&t.length?pi(t,nt,e):[]}function qa(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(Ws(t))return e=Fl(t.length,e),!0}),D(e,function(e){return h(t,S(e))})}function Wa(t,e){if(!t||!t.length)return[];var r=qa(t);return null==e?r:h(r,function(t){return o(e,nt,t)})}function Ha(t,e){return mi(t||[],e||[],qr)}function Ga(t,e){return mi(t||[],e||[],ni)}function Ka(t){var e=r(t);return e.__chain__=!0,e}function Va(t,e){return e(t),t}function Ya(t,e){return e(t)}function Xa(){return Ka(this)}function $a(){return new i(this.value(),this.__chain__)}function Qa(){this.__values__===nt&&(this.__values__=gu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?nt:this.__values__[this.__index__++]}}function Za(){return this}function Ja(t){for(var e,r=this;r instanceof n;){var i=Zo(r);i.__index__=0,i.__values__=nt,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function ts(){var t=this.__wrapped__;if(t instanceof m){var e=t;return this.__actions__.length&&(e=new m(this)),e=e.reverse(),e.__actions__.push({func:Ya,args:[Ta],thisArg:nt}),new i(e,this.__chain__)}return this.thru(Ta)}function es(){return gi(this.__wrapped__,this.__actions__)}function rs(t,e,r){var n=hp(t)?c:an;return r&&xo(t,e,r)&&(e=nt),n(t,mo(e,3))}function ns(t,e){return(hp(t)?l:cn)(t,mo(e,3))}function is(t,e){return ln(ls(t,e),1)}function os(t,e){return ln(ls(t,e),Dt)}function as(t,e,r){return r=r===nt?1:mu(r),ln(ls(t,e),r)}function ss(t,e){return(hp(t)?s:ff)(t,mo(e,3))}function us(t,e){return(hp(t)?u:pf)(t,mo(e,3))}function cs(t,e,r,n){t=qs(t)?t:Xu(t),r=r&&!n?mu(r):0;var i=t.length;return r<0&&(r=Fl(i+r,0)),fu(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&E(t,e,r)>-1}function ls(t,e){return(hp(t)?h:Un)(t,mo(e,3))}function fs(t,e,r,n){return null==t?[]:(hp(e)||(e=null==e?[]:[e]),r=n?nt:r,hp(r)||(r=null==r?[]:[r]),Gn(t,e,r))}function ps(t,e,r){var n=hp(t)?y:I,i=arguments.length<3;return n(t,mo(e,4),r,i,ff)}function hs(t,e,r){var n=hp(t)?g:I,i=arguments.length<3;return n(t,mo(e,4),r,i,pf)}function ds(t,e){return(hp(t)?l:cn)(t,Is(mo(e,3)))}function ys(t){return(hp(t)?Dr:ei)(t)}function gs(t,e,r){return e=(r?xo(t,e,r):e===nt)?1:mu(e),(hp(t)?xr:ri)(t,e)}function vs(t){return(hp(t)?Rr:ii)(t)}function ms(t){if(null==t)return 0;if(qs(t))return fu(t)?Z(t):t.length;var e=kf(t);return e==Yt||e==te?t.size:Nn(t).length}function _s(t,e,r){var n=hp(t)?v:ai;return r&&xo(t,e,r)&&(e=nt),n(t,mo(e,3))}function bs(t,e){if("function"!=typeof e)throw new al(at);return t=mu(t),function(){if(--t<1)return e.apply(this,arguments)}}function ws(t,e,r){return e=r?nt:e,e=t&&null==e?t.length:e,oo(t,Et,nt,nt,nt,nt,e)}function Es(t,e){var r;if("function"!=typeof e)throw new al(at);return t=mu(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=nt),r}}function ks(t,e,r){e=r?nt:e;var n=oo(t,mt,nt,nt,nt,nt,nt,e);return n.placeholder=ks.placeholder,n}function Ts(t,e,r){e=r?nt:e;var n=oo(t,_t,nt,nt,nt,nt,nt,e);return n.placeholder=Ts.placeholder,n}function Os(t,e,r){function n(e){var r=p,n=h;return p=h=nt,m=e,y=t.apply(n,r)}function i(t){return m=t,g=Sf(s,e),_?n(t):y}function o(t){var r=t-v,n=t-m,i=e-r;return b?ql(i,d-n):i}function a(t){var r=t-v,n=t-m;return v===nt||r>=e||r<0||b&&n>=d}function s(){var t=ep();if(a(t))return u(t);g=Sf(s,o(t))}function u(t){return g=nt,w&&p?n(t):(p=h=nt,y)}function c(){g!==nt&&mf(g),m=0,p=v=h=g=nt}function l(){return g===nt?y:u(ep())}function f(){var t=ep(),r=a(t);if(p=arguments,h=this,v=t,r){if(g===nt)return i(v);if(b)return g=Sf(s,e),n(v)}return g===nt&&(g=Sf(s,e)),y}var p,h,d,y,g,v,m=0,_=!1,b=!1,w=!0;if("function"!=typeof t)throw new al(at);return e=bu(e)||0,tu(r)&&(_=!!r.leading,b="maxWait"in r,d=b?Fl(bu(r.maxWait)||0,e):d,w="trailing"in r?!!r.trailing:w),f.cancel=c,f.flush=l,f}function Ss(t){return oo(t,Tt)}function js(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new al(at);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(js.Cache||ar),r}function Is(t){if("function"!=typeof t)throw new al(at);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Cs(t){return Es(2,t)}function As(t,e){if("function"!=typeof t)throw new al(at);return e=e===nt?e:mu(e),ti(t,e)}function Ds(t,e){if("function"!=typeof t)throw new al(at);return e=null==e?0:Fl(mu(e),0),ti(function(r){var n=r[e],i=Ei(r,0,e);return n&&d(i,n),o(t,this,i)})}function xs(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new al(at);return tu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Os(t,e,{leading:n,maxWait:e,trailing:i})}function Ps(t){return ws(t,1)}function Rs(t,e){return sp(bi(e),t)}function Ms(){if(!arguments.length)return[];var t=arguments[0];return hp(t)?t:[t]}function Ns(t){return tn(t,pt)}function Ls(t,e){return e="function"==typeof e?e:nt,tn(t,pt,e)}function Bs(t){return tn(t,lt|pt)}function Us(t,e){return e="function"==typeof e?e:nt,tn(t,lt|pt,e)}function zs(t,e){return null==e||rn(t,e,Nu(e))}function Fs(t,e){return t===e||t!==t&&e!==e}function qs(t){return null!=t&&Js(t.length)&&!Qs(t)}function Ws(t){return eu(t)&&qs(t)}function Hs(t){return!0===t||!1===t||eu(t)&&gn(t)==qt}function Gs(t){return eu(t)&&1===t.nodeType&&!cu(t)}function Ks(t){if(null==t)return!0;if(qs(t)&&(hp(t)||"string"==typeof t||"function"==typeof t.splice||yp(t)||bp(t)||pp(t)))return!t.length;var e=kf(t);if(e==Yt||e==te)return!t.size;if(Lo(t))return!Nn(t).length;for(var r in t)if(pl.call(t,r))return!1;return!0}function Vs(t,e){return jn(t,e)}function Ys(t,e,r){r="function"==typeof r?r:nt;var n=r?r(t,e):nt;return n===nt?jn(t,e,nt,r):!!n}function Xs(t){if(!eu(t))return!1;var e=gn(t);return e==Gt||e==Ht||"string"==typeof t.message&&"string"==typeof t.name&&!cu(t)}function $s(t){return"number"==typeof t&&Bl(t)}function Qs(t){if(!tu(t))return!1;var e=gn(t);return e==Kt||e==Vt||e==Ft||e==Zt}function Zs(t){return"number"==typeof t&&t==mu(t)}function Js(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=xt}function tu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function eu(t){return null!=t&&"object"==typeof t}function ru(t,e){return t===e||An(t,e,bo(e))}function nu(t,e,r){return r="function"==typeof r?r:nt,An(t,e,bo(e),r)}function iu(t){return uu(t)&&t!=+t}function ou(t){if(Tf(t))throw new tl(ot);return Dn(t)}function au(t){return null===t}function su(t){return null==t}function uu(t){return"number"==typeof t||eu(t)&&gn(t)==Xt}function cu(t){if(!eu(t)||gn(t)!=Qt)return!1;var e=kl(t);if(null===e)return!0;var r=pl.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&fl.call(r)==gl}function lu(t){return Zs(t)&&t>=-xt&&t<=xt}function fu(t){return"string"==typeof t||!hp(t)&&eu(t)&&gn(t)==ee}function pu(t){return"symbol"==typeof t||eu(t)&&gn(t)==re}function hu(t){return t===nt}function du(t){return eu(t)&&kf(t)==ie}function yu(t){return eu(t)&&gn(t)==oe}function gu(t){if(!t)return[];if(qs(t))return fu(t)?J(t):Pi(t);if(Il&&t[Il])return W(t[Il]());var e=kf(t);return(e==Yt?H:e==te?Y:Xu)(t)}function vu(t){if(!t)return 0===t?t:0;if((t=bu(t))===Dt||t===-Dt){return(t<0?-1:1)*Pt}return t===t?t:0}function mu(t){var e=vu(t),r=e%1;return e===e?r?e-r:e:0}function _u(t){return t?Jr(mu(t),0,Mt):0}function bu(t){if("number"==typeof t)return t;if(pu(t))return Rt;if(tu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=tu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(xe,"");var r=We.test(t);return r||Ge.test(t)?jr(t.slice(2),r?2:8):qe.test(t)?Rt:+t}function wu(t){return Ri(t,Lu(t))}function Eu(t){return t?Jr(mu(t),-xt,xt):0===t?t:0}function ku(t){return null==t?"":fi(t)}function Tu(t,e){var r=lf(t);return null==e?r:Xr(r,e)}function Ou(t,e){return b(t,mo(e,3),fn)}function Su(t,e){return b(t,mo(e,3),pn)}function ju(t,e){return null==t?t:hf(t,mo(e,3),Lu)}function Iu(t,e){return null==t?t:df(t,mo(e,3),Lu)}function Cu(t,e){return t&&fn(t,mo(e,3))}function Au(t,e){return t&&pn(t,mo(e,3))}function Du(t){return null==t?[]:hn(t,Nu(t))}function xu(t){return null==t?[]:hn(t,Lu(t))}function Pu(t,e,r){var n=null==t?nt:dn(t,e);return n===nt?r:n}function Ru(t,e){return null!=t&&Oo(t,e,mn)}function Mu(t,e){return null!=t&&Oo(t,e,_n)}function Nu(t){return qs(t)?Cr(t):Nn(t)}function Lu(t){return qs(t)?Cr(t,!0):Ln(t)}function Bu(t,e){var r={};return e=mo(e,3),fn(t,function(t,n,i){Qr(r,e(t,n,i),t)}),r}function Uu(t,e){var r={};return e=mo(e,3),fn(t,function(t,n,i){Qr(r,n,e(t,n,i))}),r}function zu(t,e){return Fu(t,Is(mo(e)))}function Fu(t,e){if(null==t)return{};var r=h(yo(t),function(t){return[t]});return e=mo(e),Vn(t,r,function(t,r){return e(t,r[0])})}function qu(t,e,r){e=wi(e,t);var n=-1,i=e.length;for(i||(i=1,t=nt);++n<i;){var o=null==t?nt:t[Xo(e[n])];o===nt&&(n=i,o=r),t=Qs(o)?o.call(t):o}return t}function Wu(t,e,r){return null==t?t:ni(t,e,r)}function Hu(t,e,r,n){return n="function"==typeof n?n:nt,null==t?t:ni(t,e,r,n)}function Gu(t,e,r){var n=hp(t),i=n||yp(t)||bp(t);if(e=mo(e,4),null==r){var o=t&&t.constructor;r=i?n?new o:[]:tu(t)&&Qs(o)?lf(kl(t)):{}}return(i?s:fn)(t,function(t,n,i){return e(r,t,n,i)}),r}function Ku(t,e){return null==t||hi(t,e)}function Vu(t,e,r){return null==t?t:di(t,e,bi(r))}function Yu(t,e,r,n){return n="function"==typeof n?n:nt,null==t?t:di(t,e,bi(r),n)}function Xu(t){return null==t?[]:R(t,Nu(t))}function $u(t){return null==t?[]:R(t,Lu(t))}function Qu(t,e,r){return r===nt&&(r=e,e=nt),r!==nt&&(r=bu(r),r=r===r?r:0),e!==nt&&(e=bu(e),e=e===e?e:0),Jr(bu(t),e,r)}function Zu(t,e,r){return e=vu(e),r===nt?(r=e,e=0):r=vu(r),t=bu(t),bn(t,e,r)}function Ju(t,e,r){if(r&&"boolean"!=typeof r&&xo(t,e,r)&&(e=r=nt),r===nt&&("boolean"==typeof e?(r=e,e=nt):"boolean"==typeof t&&(r=t,t=nt)),t===nt&&e===nt?(t=0,e=1):(t=vu(t),e===nt?(e=t,t=0):e=vu(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=Gl();return ql(t+i*(e-t+Sr("1e-"+((i+"").length-1))),e)}return Qn(t,e)}function tc(t){return Kp(ku(t).toLowerCase())}function ec(t){return(t=ku(t))&&t.replace(Ve,Wr).replace(hr,"")}function rc(t,e,r){t=ku(t),e=fi(e);var n=t.length;r=r===nt?n:Jr(mu(r),0,n);var i=r;return(r-=e.length)>=0&&t.slice(r,i)==e}function nc(t){return t=ku(t),t&&ke.test(t)?t.replace(we,Hr):t}function ic(t){return t=ku(t),t&&De.test(t)?t.replace(Ae,"\\$&"):t}function oc(t,e,r){t=ku(t),e=mu(e);var n=e?Z(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Zi(Ml(i),r)+t+Zi(Rl(i),r)}function ac(t,e,r){t=ku(t),e=mu(e);var n=e?Z(t):0;return e&&n<e?t+Zi(e-n,r):t}function sc(t,e,r){t=ku(t),e=mu(e);var n=e?Z(t):0;return e&&n<e?Zi(e-n,r)+t:t}function uc(t,e,r){return r||null==e?e=0:e&&(e=+e),Hl(ku(t).replace(Pe,""),e||0)}function cc(t,e,r){return e=(r?xo(t,e,r):e===nt)?1:mu(e),Jn(ku(t),e)}function lc(){var t=arguments,e=ku(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function fc(t,e,r){return r&&"number"!=typeof r&&xo(t,e,r)&&(e=r=nt),(r=r===nt?Mt:r>>>0)?(t=ku(t),t&&("string"==typeof e||null!=e&&!mp(e))&&!(e=fi(e))&&F(t)?Ei(J(t),0,r):t.split(e,r)):[]}function pc(t,e,r){return t=ku(t),r=null==r?0:Jr(mu(r),0,t.length),e=fi(e),t.slice(r,r+e.length)==e}function hc(t,e,n){var i=r.templateSettings;n&&xo(t,e,n)&&(e=nt),t=ku(t),e=Op({},e,i,ao);var o,a,s=Op({},e.imports,i.imports,ao),u=Nu(s),c=R(s,u),l=0,f=e.interpolate||Ye,p="__p += '",h=il((e.escape||Ye).source+"|"+f.source+"|"+(f===Se?ze:Ye).source+"|"+(e.evaluate||Ye).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++_r+"]")+"\n";t.replace(h,function(e,r,n,i,s,u){return n||(n=i),p+=t.slice(l,u).replace(Xe,U),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),p+="';\n";var y=e.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(ve,""):p).replace(me,"$1").replace(_e,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=Vp(function(){return el(u,d+"return "+p).apply(nt,c)});if(g.source=p,Xs(g))throw g;return g}function dc(t){return ku(t).toLowerCase()}function yc(t){return ku(t).toUpperCase()}function gc(t,e,r){if((t=ku(t))&&(r||e===nt))return t.replace(xe,"");if(!t||!(e=fi(e)))return t;var n=J(t),i=J(e);return Ei(n,N(n,i),L(n,i)+1).join("")}function vc(t,e,r){if((t=ku(t))&&(r||e===nt))return t.replace(Re,"");if(!t||!(e=fi(e)))return t;var n=J(t);return Ei(n,0,L(n,J(e))+1).join("")}function mc(t,e,r){if((t=ku(t))&&(r||e===nt))return t.replace(Pe,"");if(!t||!(e=fi(e)))return t;var n=J(t);return Ei(n,N(n,J(e))).join("")}function _c(t,e){var r=Ot,n=St;if(tu(e)){var i="separator"in e?e.separator:i;r="length"in e?mu(e.length):r,n="omission"in e?fi(e.omission):n}t=ku(t);var o=t.length;if(F(t)){var a=J(t);o=a.length}if(r>=o)return t;var s=r-Z(n);if(s<1)return n;var u=a?Ei(a,0,s).join(""):t.slice(0,s);if(i===nt)return u+n;if(a&&(s+=u.length-s),mp(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=il(i.source,ku(Fe.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,f===nt?s:f)}}else if(t.indexOf(fi(i),s)!=s){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+n}function bc(t){return t=ku(t),t&&Ee.test(t)?t.replace(be,Gr):t}function wc(t,e,r){return t=ku(t),e=r?nt:e,e===nt?q(t)?rt(t):_(t):t.match(e)||[]}function Ec(t){var e=null==t?0:t.length,r=mo();return t=e?h(t,function(t){if("function"!=typeof t[1])throw new al(at);return[r(t[0]),t[1]]}):[],ti(function(r){for(var n=-1;++n<e;){var i=t[n];if(o(i[0],this,r))return o(i[1],this,r)}})}function kc(t){return en(tn(t,lt))}function Tc(t){return function(){return t}}function Oc(t,e){return null==t||t!==t?e:t}function Sc(t){return t}function jc(t){return Mn("function"==typeof t?t:tn(t,lt))}function Ic(t){return zn(tn(t,lt))}function Cc(t,e){return Fn(t,tn(e,lt))}function Ac(t,e,r){var n=Nu(e),i=hn(e,n);null!=r||tu(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=hn(e,Nu(e)));var o=!(tu(r)&&"chain"in r&&!r.chain),a=Qs(t);return s(i,function(r){var n=e[r];t[r]=n,a&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__);return(r.__actions__=Pi(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,d([this.value()],arguments))})}),t}function Dc(){return Ar._===this&&(Ar._=vl),this}function xc(){}function Pc(t){return t=mu(t),ti(function(e){return Hn(e,t)})}function Rc(t){return Po(t)?S(Xo(t)):Yn(t)}function Mc(t){return function(e){return null==t?nt:dn(t,e)}}function Nc(){return[]}function Lc(){return!1}function Bc(){return{}}function Uc(){return""}function zc(){return!0}function Fc(t,e){if((t=mu(t))<1||t>xt)return[];var r=Mt,n=ql(t,Mt);e=mo(e),t-=Mt;for(var i=D(n,e);++r<t;)e(r);return i}function qc(t){return hp(t)?h(t,Xo):pu(t)?[t]:Pi(If(ku(t)))}function Wc(t){var e=++hl;return ku(t)+e}function Hc(t){return t&&t.length?sn(t,Sc,vn):nt}function Gc(t,e){return t&&t.length?sn(t,mo(e,2),vn):nt}function Kc(t){return O(t,Sc)}function Vc(t,e){return O(t,mo(e,2))}function Yc(t){return t&&t.length?sn(t,Sc,Bn):nt}function Xc(t,e){return t&&t.length?sn(t,mo(e,2),Bn):nt}function $c(t){return t&&t.length?A(t,Sc):0}function Qc(t,e){return t&&t.length?A(t,mo(e,2)):0}e=null==e?Ar:Kr.defaults(Ar.Object(),e,Kr.pick(Ar,mr));var Zc=e.Array,Jc=e.Date,tl=e.Error,el=e.Function,rl=e.Math,nl=e.Object,il=e.RegExp,ol=e.String,al=e.TypeError,sl=Zc.prototype,ul=el.prototype,cl=nl.prototype,ll=e["__core-js_shared__"],fl=ul.toString,pl=cl.hasOwnProperty,hl=0,dl=function(){var t=/[^.]+$/.exec(ll&&ll.keys&&ll.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),yl=cl.toString,gl=fl.call(nl),vl=Ar._,ml=il("^"+fl.call(pl).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_l=Pr?e.Buffer:nt,bl=e.Symbol,wl=e.Uint8Array,El=_l?_l.allocUnsafe:nt,kl=G(nl.getPrototypeOf,nl),Tl=nl.create,Ol=cl.propertyIsEnumerable,Sl=sl.splice,jl=bl?bl.isConcatSpreadable:nt,Il=bl?bl.iterator:nt,Cl=bl?bl.toStringTag:nt,Al=function(){try{var t=wo(nl,"defineProperty");return t({},"",{}),t}catch(t){}}(),Dl=e.clearTimeout!==Ar.clearTimeout&&e.clearTimeout,xl=Jc&&Jc.now!==Ar.Date.now&&Jc.now,Pl=e.setTimeout!==Ar.setTimeout&&e.setTimeout,Rl=rl.ceil,Ml=rl.floor,Nl=nl.getOwnPropertySymbols,Ll=_l?_l.isBuffer:nt,Bl=e.isFinite,Ul=sl.join,zl=G(nl.keys,nl),Fl=rl.max,ql=rl.min,Wl=Jc.now,Hl=e.parseInt,Gl=rl.random,Kl=sl.reverse,Vl=wo(e,"DataView"),Yl=wo(e,"Map"),Xl=wo(e,"Promise"),$l=wo(e,"Set"),Ql=wo(e,"WeakMap"),Zl=wo(nl,"create"),Jl=Ql&&new Ql,tf={},ef=$o(Vl),rf=$o(Yl),nf=$o(Xl),of=$o($l),af=$o(Ql),sf=bl?bl.prototype:nt,uf=sf?sf.valueOf:nt,cf=sf?sf.toString:nt,lf=function(){function t(){}return function(e){if(!tu(e))return{};if(Tl)return Tl(e);t.prototype=e;var r=new t;return t.prototype=nt,r}}();r.templateSettings={escape:Te,evaluate:Oe,interpolate:Se,variable:"",imports:{_:r}},r.prototype=n.prototype,r.prototype.constructor=r,i.prototype=lf(n.prototype),i.prototype.constructor=i,m.prototype=lf(n.prototype),m.prototype.constructor=m,et.prototype.clear=Be,et.prototype.delete=$e,et.prototype.get=Qe,et.prototype.has=Ze,et.prototype.set=Je,tr.prototype.clear=er,tr.prototype.delete=rr,tr.prototype.get=nr,tr.prototype.has=ir,tr.prototype.set=or,ar.prototype.clear=sr,ar.prototype.delete=ur,ar.prototype.get=cr,ar.prototype.has=lr,ar.prototype.set=fr,dr.prototype.add=dr.prototype.push=yr,dr.prototype.has=gr,vr.prototype.clear=Er,vr.prototype.delete=kr,vr.prototype.get=Tr,vr.prototype.has=Or,vr.prototype.set=Ir;var ff=Ui(fn),pf=Ui(pn,!0),hf=zi(),df=zi(!0),yf=Jl?function(t,e){return Jl.set(t,e),t}:Sc,gf=Al?function(t,e){return Al(t,"toString",{configurable:!0,enumerable:!1,value:Tc(e),writable:!0})}:Sc,vf=ti,mf=Dl||function(t){return Ar.clearTimeout(t)},_f=$l&&1/Y(new $l([,-0]))[1]==Dt?function(t){return new $l(t)}:xc,bf=Jl?function(t){return Jl.get(t)}:xc,wf=Nl?function(t){return null==t?[]:(t=nl(t),l(Nl(t),function(e){return Ol.call(t,e)}))}:Nc,Ef=Nl?function(t){for(var e=[];t;)d(e,wf(t)),t=kl(t);return e}:Nc,kf=gn;(Vl&&kf(new Vl(new ArrayBuffer(1)))!=se||Yl&&kf(new Yl)!=Yt||Xl&&"[object Promise]"!=kf(Xl.resolve())||$l&&kf(new $l)!=te||Ql&&kf(new Ql)!=ie)&&(kf=function(t){var e=gn(t),r=e==Qt?t.constructor:nt,n=r?$o(r):"";if(n)switch(n){case ef:return se;case rf:return Yt;case nf:return"[object Promise]";case of:return te;case af:return ie}return e});var Tf=ll?Qs:Lc,Of=Vo(yf),Sf=Pl||function(t,e){return Ar.setTimeout(t,e)},jf=Vo(gf),If=function(t){var e=js(t,function(t){return r.size===ut&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ce,function(t,r,n,i){e.push(n?i.replace(Ue,"$1"):r||t)}),e}),Cf=ti(function(t,e){return Ws(t)?on(t,ln(e,1,Ws,!0)):[]}),Af=ti(function(t,e){var r=va(e);return Ws(r)&&(r=nt),Ws(t)?on(t,ln(e,1,Ws,!0),mo(r,2)):[]}),Df=ti(function(t,e){var r=va(e);return Ws(r)&&(r=nt),Ws(t)?on(t,ln(e,1,Ws,!0),nt,r):[]}),xf=ti(function(t){var e=h(t,_i);return e.length&&e[0]===t[0]?wn(e):[]}),Pf=ti(function(t){var e=va(t),r=h(t,_i);return e===va(r)?e=nt:r.pop(),r.length&&r[0]===t[0]?wn(r,mo(e,2)):[]}),Rf=ti(function(t){var e=va(t),r=h(t,_i);return e="function"==typeof e?e:nt,e&&r.pop(),r.length&&r[0]===t[0]?wn(r,nt,e):[]}),Mf=ti(ba),Nf=po(function(t,e){var r=null==t?0:t.length,n=Zr(t,e);return $n(t,h(e,function(t){return Do(t,r)?+t:t}).sort(Ci)),n}),Lf=ti(function(t){return pi(ln(t,1,Ws,!0))}),Bf=ti(function(t){var e=va(t);return Ws(e)&&(e=nt),pi(ln(t,1,Ws,!0),mo(e,2))}),Uf=ti(function(t){var e=va(t);return e="function"==typeof e?e:nt,pi(ln(t,1,Ws,!0),nt,e)}),zf=ti(function(t,e){return Ws(t)?on(t,e):[]}),Ff=ti(function(t){return vi(l(t,Ws))}),qf=ti(function(t){var e=va(t);return Ws(e)&&(e=nt),vi(l(t,Ws),mo(e,2))}),Wf=ti(function(t){var e=va(t);return e="function"==typeof e?e:nt,vi(l(t,Ws),nt,e)}),Hf=ti(qa),Gf=ti(function(t){var e=t.length,r=e>1?t[e-1]:nt;return r="function"==typeof r?(t.pop(),r):nt,Wa(t,r)}),Kf=po(function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,o=function(e){return Zr(e,t)};return!(e>1||this.__actions__.length)&&n instanceof m&&Do(r)?(n=n.slice(r,+r+(e?1:0)),n.__actions__.push({func:Ya,args:[o],thisArg:nt}),new i(n,this.__chain__).thru(function(t){return e&&!t.length&&t.push(nt),t})):this.thru(o)}),Vf=Li(function(t,e,r){pl.call(t,r)?++t[r]:Qr(t,r,1)}),Yf=Ki(sa),Xf=Ki(ua),$f=Li(function(t,e,r){pl.call(t,r)?t[r].push(e):Qr(t,r,[e])}),Qf=ti(function(t,e,r){var n=-1,i="function"==typeof e,a=qs(t)?Zc(t.length):[];return ff(t,function(t){a[++n]=i?o(e,t,r):kn(t,e,r)}),a}),Zf=Li(function(t,e,r){Qr(t,r,e)}),Jf=Li(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),tp=ti(function(t,e){if(null==t)return[];var r=e.length;return r>1&&xo(t,e[0],e[1])?e=[]:r>2&&xo(e[0],e[1],e[2])&&(e=[e[0]]),Gn(t,ln(e,1),[])}),ep=xl||function(){return Ar.Date.now()},rp=ti(function(t,e,r){var n=yt;if(r.length){var i=K(r,vo(rp));n|=bt}return oo(t,n,e,r,i)}),np=ti(function(t,e,r){var n=yt|gt;if(r.length){var i=K(r,vo(np));n|=bt}return oo(e,n,t,r,i)}),ip=ti(function(t,e){return nn(t,1,e)}),op=ti(function(t,e,r){return nn(t,bu(e)||0,r)});js.Cache=ar;var ap=vf(function(t,e){e=1==e.length&&hp(e[0])?h(e[0],P(mo())):h(ln(e,1),P(mo()));var r=e.length;return ti(function(n){for(var i=-1,a=ql(n.length,r);++i<a;)n[i]=e[i].call(this,n[i]);return o(t,this,n)})}),sp=ti(function(t,e){var r=K(e,vo(sp));return oo(t,bt,nt,e,r)}),up=ti(function(t,e){var r=K(e,vo(up));return oo(t,wt,nt,e,r)}),cp=po(function(t,e){return oo(t,kt,nt,nt,nt,e)}),lp=eo(vn),fp=eo(function(t,e){return t>=e}),pp=Tn(function(){return arguments}())?Tn:function(t){return eu(t)&&pl.call(t,"callee")&&!Ol.call(t,"callee")},hp=Zc.isArray,dp=Nr?P(Nr):On,yp=Ll||Lc,gp=Lr?P(Lr):Sn,vp=Br?P(Br):Cn,mp=Ur?P(Ur):xn,_p=zr?P(zr):Pn,bp=Fr?P(Fr):Rn,wp=eo(Bn),Ep=eo(function(t,e){return t<=e}),kp=Bi(function(t,e){if(Lo(e)||qs(e))return void Ri(e,Nu(e),t);for(var r in e)pl.call(e,r)&&qr(t,r,e[r])}),Tp=Bi(function(t,e){Ri(e,Lu(e),t)}),Op=Bi(function(t,e,r,n){Ri(e,Lu(e),t,n)}),Sp=Bi(function(t,e,r,n){Ri(e,Nu(e),t,n)}),jp=po(Zr),Ip=ti(function(t,e){t=nl(t);var r=-1,n=e.length,i=n>2?e[2]:nt;for(i&&xo(e[0],e[1],i)&&(n=1);++r<n;)for(var o=e[r],a=Lu(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(l===nt||Fs(l,cl[c])&&!pl.call(t,c))&&(t[c]=o[c])}return t}),Cp=ti(function(t){return t.push(nt,so),o(Rp,nt,t)}),Ap=Xi(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=yl.call(e)),t[e]=r},Tc(Sc)),Dp=Xi(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=yl.call(e)),pl.call(t,e)?t[e].push(r):t[e]=[r]},mo),xp=ti(kn),Pp=Bi(function(t,e,r){qn(t,e,r)}),Rp=Bi(function(t,e,r,n){qn(t,e,r,n)}),Mp=po(function(t,e){var r={};if(null==t)return r;var n=!1;e=h(e,function(e){return e=wi(e,t),n||(n=e.length>1),e}),Ri(t,yo(t),r),n&&(r=tn(r,lt|ft|pt,uo));for(var i=e.length;i--;)hi(r,e[i]);return r}),Np=po(function(t,e){return null==t?{}:Kn(t,e)}),Lp=io(Nu),Bp=io(Lu),Up=Wi(function(t,e,r){return e=e.toLowerCase(),t+(r?tc(e):e)}),zp=Wi(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Fp=Wi(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),qp=qi("toLowerCase"),Wp=Wi(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Hp=Wi(function(t,e,r){return t+(r?" ":"")+Kp(e)}),Gp=Wi(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),Kp=qi("toUpperCase"),Vp=ti(function(t,e){try{return o(t,nt,e)}catch(t){return Xs(t)?t:new tl(t)}}),Yp=po(function(t,e){return s(e,function(e){e=Xo(e),Qr(t,e,rp(t[e],t))}),t}),Xp=Vi(),$p=Vi(!0),Qp=ti(function(t,e){return function(r){return kn(r,t,e)}}),Zp=ti(function(t,e){return function(r){return kn(t,r,e)}}),Jp=Qi(h),th=Qi(c),eh=Qi(v),rh=to(),nh=to(!0),ih=$i(function(t,e){return t+e},0),oh=no("ceil"),ah=$i(function(t,e){return t/e},1),sh=no("floor"),uh=$i(function(t,e){return t*e},1),ch=no("round"),lh=$i(function(t,e){return t-e},0);return r.after=bs,r.ary=ws,r.assign=kp,r.assignIn=Tp,r.assignInWith=Op,r.assignWith=Sp,r.at=jp,r.before=Es,r.bind=rp,r.bindAll=Yp,r.bindKey=np,r.castArray=Ms,r.chain=Ka,r.chunk=Jo,r.compact=ta,r.concat=ea,r.cond=Ec,r.conforms=kc,r.constant=Tc,r.countBy=Vf,r.create=Tu,r.curry=ks,r.curryRight=Ts,r.debounce=Os,r.defaults=Ip,r.defaultsDeep=Cp,r.defer=ip,r.delay=op,r.difference=Cf,r.differenceBy=Af,r.differenceWith=Df,r.drop=ra,r.dropRight=na,r.dropRightWhile=ia,r.dropWhile=oa,r.fill=aa,r.filter=ns,r.flatMap=is,r.flatMapDeep=os,r.flatMapDepth=as,r.flatten=ca,r.flattenDeep=la,r.flattenDepth=fa,r.flip=Ss,r.flow=Xp,r.flowRight=$p,r.fromPairs=pa,r.functions=Du,r.functionsIn=xu,r.groupBy=$f,r.initial=ya,r.intersection=xf,r.intersectionBy=Pf,r.intersectionWith=Rf,r.invert=Ap,r.invertBy=Dp,r.invokeMap=Qf,r.iteratee=jc,r.keyBy=Zf,r.keys=Nu,r.keysIn=Lu,r.map=ls,r.mapKeys=Bu,r.mapValues=Uu,r.matches=Ic,r.matchesProperty=Cc,r.memoize=js,r.merge=Pp,r.mergeWith=Rp,r.method=Qp,r.methodOf=Zp,r.mixin=Ac,r.negate=Is,r.nthArg=Pc,r.omit=Mp,r.omitBy=zu,r.once=Cs,r.orderBy=fs,r.over=Jp,r.overArgs=ap,r.overEvery=th,r.overSome=eh,r.partial=sp,r.partialRight=up,r.partition=Jf,r.pick=Np,r.pickBy=Fu,r.property=Rc,r.propertyOf=Mc,r.pull=Mf,r.pullAll=ba,r.pullAllBy=wa,r.pullAllWith=Ea,r.pullAt=Nf,r.range=rh,r.rangeRight=nh,r.rearg=cp,r.reject=ds,r.remove=ka,r.rest=As,r.reverse=Ta,r.sampleSize=gs,r.set=Wu,r.setWith=Hu,r.shuffle=vs,r.slice=Oa,r.sortBy=tp,r.sortedUniq=xa,r.sortedUniqBy=Pa,r.split=fc,r.spread=Ds,r.tail=Ra,r.take=Ma,r.takeRight=Na,r.takeRightWhile=La,r.takeWhile=Ba,r.tap=Va,r.throttle=xs,r.thru=Ya,r.toArray=gu,r.toPairs=Lp,r.toPairsIn=Bp,r.toPath=qc,r.toPlainObject=wu,r.transform=Gu,r.unary=Ps,r.union=Lf,r.unionBy=Bf,r.unionWith=Uf,r.uniq=Ua,r.uniqBy=za,r.uniqWith=Fa,r.unset=Ku,r.unzip=qa,r.unzipWith=Wa,r.update=Vu,r.updateWith=Yu,r.values=Xu,r.valuesIn=$u,r.without=zf,r.words=wc,r.wrap=Rs,r.xor=Ff,r.xorBy=qf,r.xorWith=Wf,r.zip=Hf,r.zipObject=Ha,r.zipObjectDeep=Ga,r.zipWith=Gf,r.entries=Lp,r.entriesIn=Bp,r.extend=Tp,r.extendWith=Op,Ac(r,r),r.add=ih,r.attempt=Vp,r.camelCase=Up,r.capitalize=tc,r.ceil=oh,r.clamp=Qu,r.clone=Ns,r.cloneDeep=Bs,r.cloneDeepWith=Us,r.cloneWith=Ls,r.conformsTo=zs,r.deburr=ec,r.defaultTo=Oc,r.divide=ah,r.endsWith=rc,r.eq=Fs,r.escape=nc,r.escapeRegExp=ic,r.every=rs,r.find=Yf,r.findIndex=sa,r.findKey=Ou,r.findLast=Xf,r.findLastIndex=ua,r.findLastKey=Su,r.floor=sh,r.forEach=ss,r.forEachRight=us,r.forIn=ju,r.forInRight=Iu,r.forOwn=Cu,r.forOwnRight=Au,r.get=Pu,r.gt=lp,r.gte=fp,r.has=Ru,r.hasIn=Mu,r.head=ha,r.identity=Sc,r.includes=cs,r.indexOf=da,r.inRange=Zu,r.invoke=xp,r.isArguments=pp,r.isArray=hp,r.isArrayBuffer=dp,r.isArrayLike=qs,r.isArrayLikeObject=Ws,r.isBoolean=Hs,r.isBuffer=yp,r.isDate=gp,r.isElement=Gs,r.isEmpty=Ks,r.isEqual=Vs,r.isEqualWith=Ys,r.isError=Xs,r.isFinite=$s,r.isFunction=Qs,r.isInteger=Zs,r.isLength=Js,r.isMap=vp,r.isMatch=ru,r.isMatchWith=nu,r.isNaN=iu,r.isNative=ou,r.isNil=su,r.isNull=au,r.isNumber=uu,r.isObject=tu,r.isObjectLike=eu,r.isPlainObject=cu,r.isRegExp=mp,r.isSafeInteger=lu,r.isSet=_p,r.isString=fu,r.isSymbol=pu,r.isTypedArray=bp,r.isUndefined=hu,r.isWeakMap=du,r.isWeakSet=yu,r.join=ga,r.kebabCase=zp,r.last=va,r.lastIndexOf=ma,r.lowerCase=Fp,r.lowerFirst=qp,r.lt=wp,r.lte=Ep,r.max=Hc,r.maxBy=Gc,r.mean=Kc,r.meanBy=Vc,r.min=Yc,r.minBy=Xc,r.stubArray=Nc,r.stubFalse=Lc,r.stubObject=Bc,r.stubString=Uc,r.stubTrue=zc,r.multiply=uh,r.nth=_a,r.noConflict=Dc,r.noop=xc,r.now=ep,r.pad=oc,r.padEnd=ac,r.padStart=sc,r.parseInt=uc,r.random=Ju,r.reduce=ps,r.reduceRight=hs,r.repeat=cc,r.replace=lc,r.result=qu,r.round=ch,r.runInContext=t,r.sample=ys,r.size=ms,r.snakeCase=Wp,r.some=_s,r.sortedIndex=Sa,r.sortedIndexBy=ja,r.sortedIndexOf=Ia,r.sortedLastIndex=Ca,r.sortedLastIndexBy=Aa,r.sortedLastIndexOf=Da,r.startCase=Hp,r.startsWith=pc,r.subtract=lh,r.sum=$c,r.sumBy=Qc,r.template=hc,r.times=Fc,r.toFinite=vu,r.toInteger=mu,r.toLength=_u,r.toLower=dc,r.toNumber=bu,r.toSafeInteger=Eu,r.toString=ku,r.toUpper=yc,r.trim=gc,r.trimEnd=vc,r.trimStart=mc,r.truncate=_c,r.unescape=bc,r.uniqueId=Wc,r.upperCase=Gp,r.upperFirst=Kp,r.each=ss,r.eachRight=us,r.first=ha,Ac(r,function(){var t={};return fn(r,function(e,n){pl.call(r.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),r.VERSION="4.17.10",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){r[t].placeholder=r}),s(["drop","take"],function(t,e){m.prototype[t]=function(r){r=r===nt?1:Fl(mu(r),0);var n=this.__filtered__&&!e?new m(this):this.clone();return n.__filtered__?n.__takeCount__=ql(r,n.__takeCount__):n.__views__.push({size:ql(r,Mt),type:t+(n.__dir__<0?"Right":"")}),n},m.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==Ct||3==r;m.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:mo(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}}),s(["head","last"],function(t,e){var r="take"+(e?"Right":"");m.prototype[t]=function(){return this[r](1).value()[0]}}),s(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");m.prototype[t]=function(){return this.__filtered__?new m(this):this[r](1)}}),m.prototype.compact=function(){return this.filter(Sc)},m.prototype.find=function(t){return this.filter(t).head()},m.prototype.findLast=function(t){return this.reverse().find(t)},m.prototype.invokeMap=ti(function(t,e){return"function"==typeof t?new m(this):this.map(function(r){return kn(r,t,e)})}),m.prototype.reject=function(t){return this.filter(Is(mo(t)))},m.prototype.slice=function(t,e){t=mu(t);var r=this;return r.__filtered__&&(t>0||e<0)?new m(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==nt&&(e=mu(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},m.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},m.prototype.toArray=function(){return this.take(Mt)},fn(m.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=r[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(r.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,c=e instanceof m,l=u[0],f=c||hp(e),p=function(t){var e=a.apply(r,d([t],u));return o&&h?e[0]:e};f&&n&&"function"==typeof l&&1!=l.length&&(c=f=!1);var h=this.__chain__,y=!!this.__actions__.length,g=s&&!h,v=c&&!y;if(!s&&f){e=v?e:new m(this);var _=t.apply(e,u);return _.__actions__.push({func:Ya,args:[p],thisArg:nt}),new i(_,h)}return g&&v?t.apply(this,u):(_=this.thru(p),g?o?_.value()[0]:_.value():_)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=sl[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);r.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(hp(r)?r:[],t)}return this[n](function(r){return e.apply(hp(r)?r:[],t)})}}),fn(m.prototype,function(t,e){var n=r[e];if(n){var i=n.name+"";(tf[i]||(tf[i]=[])).push({name:e,func:n})}}),tf[Yi(nt,gt).name]=[{name:"wrapper",func:nt}],m.prototype.clone=j,m.prototype.reverse=$,m.prototype.value=tt,r.prototype.at=Kf,r.prototype.chain=Xa,r.prototype.commit=$a,r.prototype.next=Qa,r.prototype.plant=Ja,r.prototype.reverse=ts,r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=es,r.prototype.first=r.prototype.head,Il&&(r.prototype[Il]=Za),r}();Ar._=Kr,(i=function(){return Kr}.call(e,r,e,n))!==nt&&(n.exports=i)}).call(this)}).call(e,r(4),r(55)(t))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);c.call(this,t),l.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(t){t.end()}var a=r(17),s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=n;var u=r(11);u.inherits=r(9);var c=r(34),l=r(23);u.inherits(n,c);for(var f=s(l.prototype),p=0;p<f.length;p++){var h=f[p];n.prototype[h]||(n.prototype[h]=l.prototype[h])}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),n.prototype._destroy=function(t,e){this.push(null),this.end(),a.nextTick(e,t)}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(3)),u=(r.n(s),r(14)),c=r(19),l=r(28),f=r(67),p=r(29),h=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),d=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),h(e,[{key:"shouldComponentUpdate",value:function(t,e){return!s.isEqual(this.props.style,t.style)||this.props.isHidden!==t.isHidden||this.props.entity!==t.entity||this.props.damage!==t.damage||this.props.healing!==t.healing||this.props.option!==t.option||this.props.cards!==t.cards||this.props.controller!==t.controller||this.props.assetDirectory!==t.assetDirectory||this.props.cardArtDirectory!==t.cardArtDirectory}},{key:"render",value:function(){var t=this.props.entity,e=["card"];t.getTag(401)&&e.push("evil-glow");var r=this.props.cards&&this.props.cards.has(t.cardId);if(!t.cardId||this.props.isHidden&&!r)return a.createElement("div",{className:e.join(" ")},a.createElement(f.a,{hidden:!0,entity:this.props.entity,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,mulligan:this.props.mulligan}));var n=this.props.option&&this.props.optionCallback;e.push("revealed"),this.props.option&&e.push("playable"),n&&e.push("draggable"),t.getTag(220)&&e.push("combo"),t.getTag(386)&&e.push("powered-up"),(t.getTag(438)||t.getTag(549)||t.getTag(550))&&e.push("shifting"),t.getTag(419)&&e.push("choose-both"),this.props.mulligan&&e.push("mulligan");var i=t.cardId,o=null,s=null,h=null,d=null,y=null,g=t.getCardType();!g&&t.getTag(219)&&(g=5);var v=t.getClass();if(r){var m=this.props.cards&&this.props.cards.get(t.cardId);if(i=m.name,o=this.parseDescription(m),s=m.attack,h=m.cost,d=m.health,y=m.durability,!g)switch(m.type){case"MINION":g=4;break;case"WEAPON":g=7;break;case"SPELL":g=5;break;case"HERO_POWER":g=10}if(!v)switch(m.cardClass){case"DRUID":v=2;break;case"DREAM":case"HUNTER":v=3;break;case"MAGE":v=4;break;case"PALADIN":v=5;break;case"PRIEST":v=6;break;case"ROGUE":v=7;break;case"SHAMAN":v=8;break;case"WARLOCK":v=9;break;case"WARRIOR":v=10;break;default:v=12}}var _=null,b={color:t.isPremium()?"white":"black"};switch(g){case 4:if(e.push("card-minion"),t.getTag(402))break;var w=a.createElement(u.a,{attack:this.getStatValue(47,s),default:s}),E=a.createElement(c.a,{health:this.getStatValue(45,d),damage:this.props.defaultStats?0:t.getDamage(),default:d});_=a.createElement("div",{className:"stats"},w,E);break;case 7:e.push("card-weapon");var k=a.createElement(u.a,{attack:this.getStatValue(47,s),default:s}),T=a.createElement(p.a,{durability:this.getStatValue(187,y),damage:t.getDamage(),default:y});_=a.createElement("div",{className:"stats"},k,T),b={color:"white"};break;case 5:e.push("card-spell");break;case 10:e.push("card-hero-power")}return this.props.isHidden&&e.push("hidden-card"),a.createElement("div",{className:e.join(" "),style:this.props.style},a.createElement(f.a,{entity:t,hidden:!1,cardType:g,cardClass:v,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,mulligan:this.props.mulligan}),0!==t.getTag(402)?null:a.createElement(l.a,{cost:this.props.isHidden||this.props.defaultStats?h:t.getCost(),default:h}),a.createElement("h1",null,i),a.createElement("div",{className:"description"},a.createElement("p",{style:b,dangerouslySetInnerHTML:{__html:o}})),_,this.props.creator?a.createElement("div",{className:"created-by"},"Created by "+(this.props.cards&&this.props.cards.has(this.props.creator.cardId)?this.props.cards.get(this.props.creator.cardId).name:this.props.creator.cardId)):null)}},{key:"formatLanguageRule4",value:function(t){for(;t.indexOf("|4")>=0;){var e=t.replace(/\|4\(([^,]*),([^)]*)\)/,"$2");if(t===e)break;t=e}return t}},{key:"parseDescription",value:function(t){if(!t||!t.text&&!t.collectionText)return"";var e=t.collectionText||t.text;t.mechanics&&-1!==t.mechanics.indexOf("JADE_GOLEM")?e=this.formatJadeGolemText(t.text):this.props.entity.getTag(471)&&(e=this.formatKazakusPotionText(t.text));var r=function(t,e){return function(r,n){var i=+n;return 0!=+t||0!=+e?(i+=t,"*"+(i*=Math.pow(2,e))+"*"):""+i}},n=0,i=0,o=0;if(this.props.controller)switch(this.props.entity.getCardType()){case 5:n=this.props.controller.getTag(291),this.props.entity.getTag(404)>0&&(n*=2),i=this.props.controller.getTag(356),o=this.props.controller.getTag(357);break;case 10:n=this.props.controller.getTag(395),i=this.props.controller.getTag(366),o=this.props.controller.getTag(366)}return e=e.replace(/\$(\d+)/g,r(n,i)),e=e.replace(/#(\d+)/g,r(0,o)),e.match(/^\[x\]/)&&(e=e.replace(/^\[x\]/,"")),e=e.replace(String.fromCharCode(160)," "),e.indexOf("|4")>=0&&(e=this.formatLanguageRule4(e)),e.trim()}},{key:"getStatValue",value:function(t,e){switch(t){case 45:if(void 0!==this.props.customHealth)return this.props.customHealth;break;case 47:if(void 0!==this.props.customAtk)return this.props.customAtk;break;case 48:if(void 0!==this.props.customCost)return this.props.customCost}return this.props.defaultStats||this.props.isHidden?e:this.props.entity.getTag(t)}},{key:"formatJadeGolemText",value:function(t){if(!this.props.controller)return t;var e=this.props.controller.getTag(441)+1,r=-1!==[8,11,18].indexOf(e)?"n":"";return t.replace("{0}",e+"/"+e).replace("{1}",r)}},{key:"formatKazakusPotionText",value:function(t){var e=this;if(!this.props.setAside)return t;var r=this.props.entity.getTag(2),n=this.props.entity.getTag(3),i="",o="";return this.props.setAside.forEach(function(t){var a=t.getTag(2);if(a)if(a===r){var s=e.props.cards.get(t.cardId);if(s&&(i=s.text),o)return}else if(a===n){var u=e.props.cards.get(t.cardId);if(u&&(o=u.text),i)return}}),t.replace("{0}",i).replace("{1}",o)}}]),e}(a.Component);e.a=d},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(3)),u=(r.n(s),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),c=function(t){function e(t,r){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return o.onResize=function(){return o.measureHeight()},o.state={height:0},o}return o(e,t),u(e,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.request&&window.cancelAnimationFrame(this.request)}},{key:"componentDidUpdate",value:function(t,e,r){this.state.height||this.measureHeight()}},{key:"shouldComponentUpdate",value:function(t,e){return e.height!==this.state.height||!s.isEqual(t.layers,this.props.layers)||t.scale!==this.props.scale||t.square!==this.props.square||t.margin!==this.props.margin||t.assetDirectory!==this.props.assetDirectory||t.cardArtDirectory!==this.props.cardArtDirectory}},{key:"createStyle",value:function(){var t=Math.round(this.state.height*this.props.scale),e=Math.round(this.state.height);this.props.square&&(e=t);var r=Math.round(this.state.height*(1-this.props.scale)),n={width:t+"px",height:e+"px",marginTop:"0px"};return this.props.margin&&(n.marginTop=r+"px"),n}},{key:"createImageItem",value:function(t,r){if(!t||null===t.image&&!t.isArt)return null;var n=null;return n=t.isArt?null!==t.image&&this.props.cardArtDirectory&&this.props.cardArtDirectory.length>0?this.props.cardArtDirectory(t.image):this.props.assetDirectory(e.imageDirectory+"portrait.jpg"):this.props.assetDirectory(e.imageDirectory+t.image),a.createElement("img",{key:r,src:n,className:t.classes.join(" "),draggable:!1})}},{key:"updateRef",value:function(t){this.ref=t,this.state.height||this.measureHeight()}},{key:"measureHeight",value:function(){var t=this;if(this.ref)if(this.state.height){if(this.request)return;this.request=window.requestAnimationFrame(function(){t.request=null,t.setState({height:0})})}else this.setState({height:this.ref.clientHeight})}},{key:"render",value:function(){var t=this,e={height:"100%"};return this.state.height&&(e=this.createStyle()),a.createElement("div",{className:"visuals",style:e,ref:function(e){return t.updateRef(e)}},this.props.layers.map(this.createImageItem.bind(this)))}}]),e}(a.Component);c.imageDirectory="images/",e.a=c},function(t,e,r){function n(){i.call(this)}t.exports=n;var i=r(20).EventEmitter;r(9)(n,i),n.Readable=r(21),n.Writable=r(98),n.Duplex=r(99),n.Transform=r(100),n.PassThrough=r(101),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function a(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",r),t.removeListener("drain",n),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),t.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",r),t.on("drain",n),t._isStdio||e&&!1===e.end||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),t.on("error",s),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r,i){n(this,t),this._id=e,this.tags=r,this._cardId=i}return i(t,[{key:"getResourcesUsed",value:function(){return this.getTag(25)}},{key:"getResources",value:function(){return this.getTag(26)}},{key:"isExhausted",value:function(){return this.getTag(43)>0}},{key:"getDamage",value:function(){return this.getTag(44)}},{key:"getHealth",value:function(){return this.getTag(45)}},{key:"getAtk",value:function(){return this.getTag(47)}},{key:"getArmor",value:function(){return this.getTag(292)}},{key:"getCost",value:function(){return this.getTag(48)}},{key:"getZone",value:function(){return this.getTag(49)}},{key:"getController",value:function(){return this.getTag(50)}},{key:"getDurability",value:function(){return this.getTag(187)}},{key:"isPremium",value:function(){return this.getTag(12)>0}},{key:"isLegendary",value:function(){return 5===this.getTag(203)}},{key:"isTaunter",value:function(){return this.getTag(190)>0}},{key:"isStealthed",value:function(){return this.getTag(191)>0}},{key:"isImmune",value:function(){return this.getTag(240)>0}},{key:"isSilenced",value:function(){return this.getTag(188)>0}},{key:"isDivineShielded",value:function(){return this.getTag(194)>0}},{key:"getClass",value:function(){return this.getTag(199)}},{key:"getCardType",value:function(){return this.getTag(202)}},{key:"isFrozen",value:function(){return this.getTag(260)>0}},{key:"isEnraged",value:function(){return this.getTag(212)>0&&this.getDamage()>0}},{key:"cantBeTargeted",value:function(){return this.getTag(311)>0}},{key:"getZonePosition",value:function(){return this.getTag(263)}},{key:"isAsleep",value:function(t){return!(0!==this.getTag(271)||0!==this.getTag(197)||this.getTag(448)||this.getTag(457)||t&&1!==t.getTag(23))}},{key:"getTag",value:function(t){return this.tags?+this.tags.get(""+t)||0:0}},{key:"setTag",value:function(t,e){var r=""+t;if(e=+e,null===r)return console.warn("Cannot set invalid tag on entity #"+this.id),this;null===e&&(e=0);var n=this.tags;return 0===e?(n=n.withMutations(function(t){t.set(r,0).delete(r)}),n.has(r)&&console.error("Entity could not remove tag "+r+' (it is still " + tags.get(strkey) + ")')):n=n.set(r,e),n===this.tags?this:this.factory(n,this.cardId)}},{key:"getTags",value:function(){return this.tags}},{key:"setTags",value:function(t){var e=this.tags.merge(t);return e===this.tags?this:this.factory(e,this.cardId)}},{key:"replaceTags",value:function(t){return t===this.tags?this:this.factory(t,this.cardId)}},{key:"setCardId",value:function(t){return this.factory(this.tags,t)}},{key:"toString",value:function(){var t="Entity #"+this.id;return this.cardId&&(t+=" ("+this.cardId+")"),t}},{key:"factory",value:function(e,r){return new t(this.id,e,r)}},{key:"id",get:function(){return+this._id}},{key:"cardId",get:function(){return this._cardId}},{key:"hidden",get:function(){return!this.cardId}},{key:"revealed",get:function(){return!this.hidden}}]),t}();e.a=o},function(t,e,r){(function(t){function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===g(t)}function f(t){return"object"==typeof t&&null!==t}function p(t){return"[object Date]"===g(t)}function h(t){return"[object Error]"===g(t)||t instanceof Error}function d(t){return"function"==typeof t}function y(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function g(t){return Object.prototype.toString.call(t)}e.isArray=r,e.isBoolean=n,e.isNull=i,e.isNullOrUndefined=o,e.isNumber=a,e.isString=s,e.isSymbol=u,e.isUndefined=c,e.isRegExp=l,e.isObject=f,e.isDate=p,e.isError=h,e.isFunction=d,e.isPrimitive=y,e.isBuffer=t.isBuffer}).call(e,r(22).Buffer)},function(t,e,r){var n;!function(i,o){var a=function(){return a.get.apply(a,arguments)},s=a.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var e=[],r="";for(r in t)t.hasOwnProperty(r)&&e.push(r);return e},encode:function(t){return String(t).replace(/[,;"\\=\s%]/g,function(t){return encodeURIComponent(t)})},decode:function(t){return decodeURIComponent(t)},retrieve:function(t,e){return null==t?e:t}};a.defaults={},a.expiresMultiplier=86400,a.set=function(t,e,r){if(s.isPlainObject(t))for(var n in t)t.hasOwnProperty(n)&&this.set(n,t[n],e);else{r=s.isPlainObject(r)?r:{expires:r};var o=void 0!==r.expires?r.expires:this.defaults.expires||"",a=typeof o;"string"===a&&""!==o?o=new Date(o):"number"===a&&(o=new Date(+new Date+1e3*this.expiresMultiplier*o)),""!==o&&"toGMTString"in o&&(o=";expires="+o.toGMTString());var u=r.path||this.defaults.path;u=u?";path="+u:"";var c=r.domain||this.defaults.domain;c=c?";domain="+c:"";var l=r.secure||this.defaults.secure?";secure":"";!1===r.secure&&(l=""),i.cookie=s.encode(t)+"="+s.encode(e)+o+u+c+l}return this},a.setDefault=function(t,e,r){if(s.isPlainObject(t)){for(var n in t)void 0===this.get(n)&&this.set(n,t[n],e);return a}if(void 0===this.get(t))return this.set.apply(this,arguments)},a.remove=function(t){t=s.isArray(t)?t:s.toArray(arguments);for(var e=0,r=t.length;e<r;e++)this.set(t[e],"",-1);return this},a.removeSpecific=function(t,e){if(!e)return this.remove(t);t=s.isArray(t)?t:[t],e.expires=-1;for(var r=0,n=t.length;r<n;r++)this.set(t[r],"",e);return this},a.empty=function(){return this.remove(s.getKeys(this.all()))},a.get=function(t,e){var r=this.all();if(s.isArray(t)){for(var n={},i=0,o=t.length;i<o;i++){var a=t[i];n[a]=s.retrieve(r[a],e)}return n}return s.retrieve(r[t],e)},a.all=function(){if(""===i.cookie)return{};for(var t=i.cookie.split("; "),e={},r=0,n=t.length;r<n;r++){var o=t[r].split("="),a=s.decode(o.shift()),u=s.decode(o.join("="));e[a]=u}return e},a.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===a.set("_","_").get("_");return a.remove("_"),t},void 0!==(n=function(){return{cookie:a}}.call(e,r,e,t))&&(t.exports=n)}("undefined"==typeof document?null:document)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(t,r,o){n(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,o));return a.baseClassName="",a.baseClassName=t,a.state={isHovering:!1},a}return o(e,t),s(e,[{key:"playWithClick",value:function(){return!1}},{key:"getClassNames",value:function(){var t=this,e=["entity","in-play"];if(e.push(this.baseClassName),this.props.isTarget?e.push("target"):this.props.option&&e.push("playable"),this.props.entity&&(this.props.entity.isExhausted()&&e.push("exhausted"),this.props.entity.isStealthed()&&e.push("stealth"),this.props.entity.isDivineShielded()&&e.push("divine-shield"),this.props.entity.isTaunter()&&e.push("taunt"),this.props.entity.isFrozen()&&e.push("frozen"),this.props.descriptors)){var r=!1;this.props.descriptors.forEach(function(n){switch(n.type){case 1:t.props.entity.id==n.entityId?e.push("attacking"):t.props.entity.id==n.target&&e.push("defending");break;case 3:n.target==t.props.entity.id&&(r=!0);break;case 5:n.entityId==t.props.entity.id&&e.push("triggered")}n.metaData.forEach(function(e){0===e.type&&e.entities.contains(t.props.entity.id)&&(r=!0)})}),r&&e.push("spellTarget")}return this.state.isHovering&&e.push("hovering"),e}},{key:"click",value:function(t){t.preventDefault(),this.props.optionCallback(this.props.option)}},{key:"startHovering",value:function(t){this.setState({isHovering:!0})}},{key:"stopHovering",value:function(t){this.setState({isHovering:!1})}},{key:"render",value:function(){var t=this;if(!this.props.entity)return a.createElement("div",{className:this.getClassNames().concat(["no-entity"]).join(" ")});this.props.option,this.props.option&&this.props.option.hasTargets();return a.createElement("div",{className:this.getClassNames().join(" "),onMouseOver:function(e){t.startHovering(e)},onTouchStart:function(e){t.startHovering(e)},onMouseOut:function(e){t.stopHovering(e)},onTouchEnd:function(e){t.stopHovering(e)}},this.jsx())}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"render",value:function(){var t=["atk"];return null!==this.props.attack&&null!==this.props.default&&this.props.attack>this.props.default&&t.push("positive"),a.createElement("div",{className:t.join(" ")},null!==this.props.attack?this.props.attack:"?")}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"renderEntity",value:function(t,e,r){var n=t.cardId?" (CardID="+t.cardId+")":"";return a.createElement("span",null,"Entity #",t.id,n)}},{key:"sort",value:function(t){return t.getZonePosition()}},{key:"beforeRender",value:function(t){}},{key:"render",value:function(){var t=this,e=[];if(this.props.entities){var r=this.props.entities.toList().sortBy(this.sort.bind(this));this.beforeRender(r.count()),r.forEach(function(r,n){var i=t.props.options?t.props.options.get(r.id):null,o=t.renderEntity(r,i,n);o&&e.push(a.createElement("li",{key:r.id},o))})}var n=["entity-list"];return n.push(this.className()),a.createElement("ul",{className:n.join(" ")},e)}},{key:"shouldComponentUpdate",value:function(t,e){return this.props.entities!==t.entities||this.props.controller!==t.controller||this.props.options!==t.options||this.props.optionCallback!==t.optionCallback||this.props.cardOracle!==t.cardOracle||this.props.cards!==t.cards||this.props.descriptors!==t.descriptors||this.props.hideCards!==t.hideCards}}]),e}(a.Component);e.a=u},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){y&&h&&(y=!1,h.length?d=h.concat(d):g=-1,d.length&&s())}function s(){if(!y){var t=i(a);y=!0;for(var e=d.length;e;){for(h=d,d=[];++g<e;)h&&h[g].run();g=-1,e=d.length}h=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(t){f=n}}();var h,d=[],y=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,r){"use strict";(function(e){function r(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:r}:t.exports=e}).call(e,r(16))},function(t,e,r){function n(t,e){for(var r in t)e[r]=t[r]}function i(t,e,r){return a(t,e,r)}var o=r(22),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(n(o,e),e.Buffer=i),n(a,i),i.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,e,r)},i.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=a(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"render",value:function(){var t=["health"];return null!==this.props.health&&(this.props.damage>0?t.push("negative"):null!==this.props.default&&this.props.health>this.props.default&&t.push("positive")),a.createElement("div",{className:t.join(" ")},null!==this.props.health?this.props.health-this.props.damage:"?")}}]),e}(a.Component);e.a=u},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(r=this._events[t],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),c=r.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){e=t.exports=r(34),e.Stream=e,e.Readable=e,e.Writable=r(23),e.Duplex=r(5),e.Transform=r(37),e.PassThrough=r(97)},function(t,e,r){"use strict";(function(t){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,r)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,r,n):"string"==typeof e?l(t,e,r):h(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,n){return s(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function c(t,e){if(s(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function l(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(e,r);t=i(t,n);var a=t.write(e,r);return a!==n&&(t=t.slice(0,a)),t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=f(t,e),t}function h(t,e){if(o.isBuffer(e)){var r=0|d(e.length);return t=i(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&Z(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),o.alloc(+t)}function g(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(n)return H(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return A(this,e,r);case"latin1":case"binary":return D(this,e,r);case"base64":return j(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function _(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}var c;if(i){var l=-1;for(c=r;c<s;c++)if(o(t,c)===o(e,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var f=!0,p=0;p<u;p++)if(o(t,c+p)!==o(e,p)){f=!1;break}if(f)return c}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function E(t,e,r,n){return Y(H(e,t.length-r),t,r,n)}function k(t,e,r,n){return Y(G(e),t,r,n)}function T(t,e,r,n){return k(t,e,r,n)}function O(t,e,r,n){return Y(V(e),t,r,n)}function S(t,e,r,n){return Y(K(e,t.length-r),t,r,n)}function j(t,e,r){return 0===e&&r===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u,c,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return C(n)}function C(t){var e=t.length;if(e<=J)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=J));return r}function A(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=W(t[o]);return i}function P(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,r,n,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function L(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function B(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||B(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,r,n,23,4),r+4}function z(t,e,r,n,i){return i||B(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,r,n,52,8),r+8}function F(t){if(t=q(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function K(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function V(t){return $.toByteArray(F(t))}function Y(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function X(t){return t!==t}var $=r(88),Q=r(89),Z=r(90);e.Buffer=o,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=n(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return a(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return u(null,t,e,r)},o.allocUnsafe=function(t){return c(null,t)},o.allocUnsafeSlow=function(t){return c(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):v.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var a=i-n,s=r-e,u=Math.min(a,s),c=this.slice(n,i),l=t.slice(e,r),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":return k(this,t,e,r);case"latin1":case"binary":return T(this,t,e,r);case"base64":return O(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=o.prototype;else{var i=e-t;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),Q.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),Q.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),Q.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),Q.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){M(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){M(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);M(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);M(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return z(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return z(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,a=n-r;if(this===t&&r<e&&e<n)for(i=a-1;i>=0;--i)t[i+e]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var s=o.isBuffer(t)?t:H(new o(t,n).toString()),u=s.length;for(a=0;a<r-e;++a)this[a+e]=s[a%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,r(4))},function(t,e,r){"use strict";(function(e,n,i){function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){j(e,t)}}function a(t){return R.from(t)}function s(t){return R.isBuffer(t)||t instanceof M}function u(){}function c(t,e){C=C||r(5),t=t||{};var n=e instanceof C;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,a=t.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){m(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(t){if(C=C||r(5),!(L.call(l,this)||this instanceof C))return new l(t);this._writableState=new c(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),P.call(this)}function f(t,e){var r=new Error("write after end");t.emit("error",r),I.nextTick(e,r)}function p(t,e,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),I.nextTick(n,o),i=!1),i}function h(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=R.from(e,r)),e}function d(t,e,r,n,i,o){if(!r){var a=h(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,s,n,i,o);return u}function y(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function g(t,e,r,n,i){--e.pendingcb,r?(I.nextTick(i,n),I.nextTick(O,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),O(t,e))}function v(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function m(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(v(r),e)g(t,r,n,e,i);else{var o=E(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),n?A(_,t,r,o,i):_(t,r,o,i)}}function _(t,e,r,n){r||b(t,e),e.pendingcb--,n(),O(t,e)}function b(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function w(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,y(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(y(t,e,!1,e.objectMode?1:c.length,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function k(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),O(t,e)})}function T(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,I.nextTick(k,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function O(t,e){var r=E(e);return r&&(T(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}function S(t,e,r){e.ending=!0,O(t,e),r&&(e.finished?I.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function j(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var I=r(17);t.exports=l;var C,A=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:I.nextTick;l.WritableState=c;var D=r(11);D.inherits=r(9);var x={deprecate:r(96)},P=r(35),R=r(18).Buffer,M=i.Uint8Array||function(){},N=r(36);D.inherits(l,P),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var L;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(t){return!!L.call(this,t)||this===l&&(t&&t._writableState instanceof c)}})):L=function(t){return t instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&s(t);return o&&!R.isBuffer(t)&&(t=a(t)),"function"==typeof e&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=u),n.ended?f(this,r):(o||p(this,n,t,r))&&(n.pendingcb++,i=d(this,n,o,t,e,r)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},l.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||S(this,n,r)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),l.prototype.destroy=N.destroy,l.prototype._undestroy=N.undestroy,l.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,r(16),r(94).setImmediate,r(4))},function(t,e,r){"use strict";function n(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=n(t);if("string"!=typeof e&&(m.isEncoding===_||!_(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){this.encoding=i(t);var e;switch(this.encoding){case"utf16le":this.text=p,this.end=h,e=4;break;case"utf8":this.fillLast=c,e=4;break;case"base64":this.text=d,this.end=y,e=3;break;default:return this.write=g,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=a(e[n]))>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=a(e[n]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0)}function u(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}function c(t){var e=this.lastTotal-this.lastNeed,r=u(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){var r=s(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function p(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function d(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function y(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function g(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}var m=r(18).Buffer,_=m.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=f,o.prototype.text=l,o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(e){n(this,t),this.entity=e}return o(t,[{key:"applyTo",value:function(t){var e=this.entity;if(!e)return console.error("Cannot replace null entity"),t;var r=this.entity.id,n=t.getEntity(r);if(!n)return console.error("Cannot update non-existent entity #"+r),t;if(e===n)return console.warn("Update has no effect on entity #"+r),t;var o=t.entities;o=o.set(r,e);var a=t.entityTree;return a=a.withMutations(function(t){t.deleteIn([n.getController(),n.getZone(),r]).setIn([e.getController(),e.getZone(),r],e)}),new i.a(o,a,t.options,t.optionTree,t.time,t.choices,t.descriptors,t.diffs)}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=r(3),a=(r.n(o),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),s=function(){function t(e){n(this,t),this.diffs=e}return a(t,[{key:"applyTo",value:function(t){var e=t.diffs;return o.forEach(this.diffs,function(t){e=e.add(t)}),new i.a(t.entities,t.entityTree,t.options,t.optionTree,t.time,t.choices,t.descriptors,e)}}]),t}();e.a=s},function(t,e,r){!function(e,n,i){void 0!==t&&t.exports?t.exports=i():r(57)("bowser",i)}(0,0,function(){function t(t){function e(e){var r=t.match(e);return r&&r.length>1&&r[1]||""}function r(e){var r=t.match(e);return r&&r.length>1&&r[2]||""}var n,i=e(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(t),s=!o&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),f=/silk/i.test(t),p=/sailfish/i.test(t),h=/tizen/i.test(t),d=/(web|hpw)os/i.test(t),y=/windows phone/i.test(t),g=(/SamsungBrowser/i.test(t),!y&&/windows/i.test(t)),v=!i&&!f&&/macintosh/i.test(t),m=!s&&!p&&!h&&!d&&/linux/i.test(t),_=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=e(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t)&&!/tablet pc/i.test(t),E=!w&&/[^-]mobi/i.test(t),k=/xbox/i.test(t);/opera/i.test(t)?n={name:"Opera",opera:a,version:b||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?n={name:"Opera",opera:a,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(t)?n={name:"Samsung Internet for Android",samsungBrowser:a,version:b||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(t)?n={name:"Opera Coast",coast:a,version:b||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?n={name:"Yandex Browser",yandexbrowser:a,version:b||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?n={name:"UC Browser",ucbrowser:a,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?n={name:"Maxthon",maxthon:a,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?n={name:"Epiphany",epiphany:a,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?n={name:"Puffin",puffin:a,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?n={name:"Sleipnir",sleipnir:a,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?n={name:"K-Meleon",kMeleon:a,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:y?(n={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},_?(n.msedge=a,n.version=_):(n.msie=a,n.version=e(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?n={name:"Internet Explorer",msie:a,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?n={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?n={name:"Microsoft Edge",msedge:a,version:_}:/vivaldi/i.test(t)?n={name:"Vivaldi",vivaldi:a,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||b}:p?n={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?n={name:"SeaMonkey",seamonkey:a,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(n={name:"Firefox",firefox:a,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(n.firefoxos=a,n.osname="Firefox OS")):f?n={name:"Amazon Silk",silk:a,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?n={name:"PhantomJS",phantom:a,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?n={name:"SlimerJS",slimer:a,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?n={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:b||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:d?(n={name:"WebOS",osname:"WebOS",webos:a,version:b||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(n.touchpad=a)):/bada/i.test(t)?n={name:"Bada",osname:"Bada",bada:a,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:h?n={name:"Tizen",osname:"Tizen",tizen:a,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(t)?n={name:"QupZilla",qupzilla:a,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(t)?n={name:"Chromium",chromium:a,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(t)?n={name:"Chrome",chrome:a,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?n={name:"Android",version:b}:/safari|applewebkit/i.test(t)?(n={name:"Safari",safari:a},b&&(n.version=b)):i?(n={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},b&&(n.version=b)):n=/googlebot/i.test(t)?{name:"Googlebot",googlebot:a,version:e(/googlebot\/(\d+(\.\d+))/i)||b}:{name:e(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(n.name=n.name||"Blink",n.blink=a):(n.name=n.name||"Webkit",n.webkit=a),!n.version&&b&&(n.version=b)):!n.opera&&/gecko\//i.test(t)&&(n.name=n.name||"Gecko",n.gecko=a,n.version=n.version||e(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||!s&&!n.silk?!n.windowsphone&&i?(n[i]=a,n.ios=a,n.osname="iOS"):v?(n.mac=a,n.osname="macOS"):k?(n.xbox=a,n.osname="Xbox"):g?(n.windows=a,n.osname="Windows"):m&&(n.linux=a,n.osname="Linux"):(n.android=a,n.osname="Android");var T="";n.windows?T=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):n.windowsphone?T=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.mac?(T=e(/Mac OS X (\d+([_\.\s]\d+)*)/i),T=T.replace(/[_\s]/g,".")):i?(T=e(/os (\d+([_\s]\d+)*) like mac os x/i),T=T.replace(/[_\s]/g,".")):s?T=e(/android[ \/-](\d+(\.\d+)*)/i):n.webos?T=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?T=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?T=e(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(T=e(/tizen[\/\s](\d+(\.\d+)*)/i)),T&&(n.osversion=T);var O=!n.windows&&T.split(".")[0];return w||c||"ipad"==i||s&&(3==O||O>=4&&!E)||n.silk?n.tablet=a:(E||"iphone"==i||"ipod"==i||s||u||n.blackberry||n.webos||n.bada)&&(n.mobile=a),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=a:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=a:n.x=a,n}function e(t){return t.split(".").length}function r(t,e){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(r=0;r<t.length;r++)n.push(e(t[r]));return n}function n(t){for(var n=Math.max(e(t[0]),e(t[1])),i=r(t,function(t){var i=n-e(t);return t+=new Array(i+1).join(".0"),r(t.split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--n>=0;){if(i[0][n]>i[1][n])return 1;if(i[0][n]!==i[1][n])return-1;if(0===n)return 0}}function i(e,r,i){var o=s;"string"==typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(o=t(i));var a=""+o.version;for(var u in e)if(e.hasOwnProperty(u)&&o[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return n([a,e[u]])<0}return r}function o(t,e,r){return!i(t,e,r)}var a=!0,s=t("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(t){for(var e=0;e<t.length;++e){var r=t[e];if("string"==typeof r&&r in s)return!0}return!1},s.isUnsupportedBrowser=i,s.compareVersions=n,s.check=o,s._detect=t,s.detect=t,s})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"render",value:function(){var t=["cost"];return null!==this.props.default&&null!==this.props.cost&&(this.props.cost<this.props.default?t.push("positive"):this.props.cost>this.props.default&&t.push("negative")),a.createElement("div",{className:t.join(" ")},null!==this.props.cost?this.props.cost:"?")}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"render",value:function(){var t=["durability"];return this.props.damage>0?t.push("negative"):null!==this.props.default&&this.props.durability>this.props.default&&t.push("positive"),a.createElement("div",{className:t.join(" ")},this.props.durability-this.props.damage)}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"shouldComponentUpdate",value:function(t){return t.damage!==this.props.damage}},{key:"render",value:function(){return a.createElement("div",{className:"damage"},this.props.damage>0?-this.props.damage:"")}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"shouldComponentUpdate",value:function(t){return t.healing!==this.props.healing}},{key:"render",value:function(){return a.createElement("div",{className:"healing"},this.props.healing>0?"+"+this.props.healing:"")}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(13)),u=r(76),c=r(14),l=r(19),f=r(30),p=r(31),h=r(6),d=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),y=function(t){function e(t,r){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"minion",t,r))}return o(e,t),d(e,[{key:"jsx",value:function(){var t=this.props.entity,e=t.cardId,r={};this.props.cards&&this.props.cards.has(e)&&(r=this.props.cards.get(e));var n=0,i=0;this.props.descriptors&&this.props.descriptors.forEach(function(e){e.metaData.forEach(function(e){if(e.entities.has(t.id))switch(e.type){case 1:n+=e.data;break;case 2:i+=e.data}})}),r.mechanics&&-1!==r.mechanics.indexOf("AUTOATTACK")&&(t=t.setTag(457,1));var o=[a.createElement(u.a,{key:"art",entity:t,controller:this.props.controller,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,damage:n,healing:i,buffed:this.props.buffed}),a.createElement("div",{key:"stats",className:"stats"},0==t.getTag(402)?[a.createElement(c.a,{key:"attack",attack:t.getAtk(),default:r.attack}),a.createElement(l.a,{key:"health",health:t.getHealth(),damage:t.getDamage(),default:r.health})]:null,0!=n?a.createElement(f.a,{damage:n}):null,0!=i?a.createElement(p.a,{healing:i}):null)];return this.state.isHovering&&o.push(a.createElement("div",{key:"hover",className:"mouse-over"},a.createElement(h.a,{entity:t,assetDirectory:this.props.assetDirectory,cards:this.props.cards,isHidden:!1,controller:this.props.controller,cardArtDirectory:this.props.cardArtDirectory,option:null}))),o}}]),e}(s.a);e.a=y},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(e,r){n(this,t),this.player=e,this.choices=r}return o(t,[{key:"applyTo",value:function(t){var e=t.choices;return e=e.set(+this.player,this.choices),new i.a(t.entities,t.entityTree,t.options,t.optionTree,t.time,e,t.descriptors,t.diffs)}}]),t}();e.a=a},function(t,e,r){"use strict";(function(e,n){function i(t){return L.from(t)}function o(t){return L.isBuffer(t)||t instanceof B}function a(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?R(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function s(t,e){P=P||r(5),t=t||{};var n=e instanceof P;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new W,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(q||(q=r(24).StringDecoder),this.decoder=new q(t.encoding),this.encoding=t.encoding)}function u(t){if(P=P||r(5),!(this instanceof u))return new u(t);this._readableState=new s(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),N.call(this)}function c(t,e,r,n,o){var a=t._readableState;if(null===e)a.reading=!1,y(t,a);else{var s;o||(s=f(a,e)),s?t.emit("error",s):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===L.prototype||(e=i(e)),n?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):l(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?l(t,a,e,!1):m(t,a)):l(t,a,e,!1))):n||(a.reading=!1)}return p(a)}function l(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&g(t)),m(t,e)}function f(t,e){var r;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function p(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function h(t){return t>=K?t=K:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function d(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=h(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function y(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,g(t)}}function g(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(F("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?x.nextTick(v,t):v(t))}function v(t){F("emit readable"),t.emit("readable"),T(t)}function m(t,e){e.readingMore||(e.readingMore=!0,x.nextTick(_,t,e))}function _(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(F("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function b(t){return function(){var e=t._readableState;F("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&M(t,"data")&&(e.flowing=!0,T(t))}}function w(t){F("readable nexttick read 0"),t.read(0)}function E(t,e){e.resumeScheduled||(e.resumeScheduled=!0,x.nextTick(k,t,e))}function k(t,e){e.reading||(F("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),T(t),e.flowing&&!e.reading&&t.read(0)}function T(t){var e=t._readableState;for(F("flow",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){if(0===e.length)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=S(t,e.buffer,e.decoder),r}function S(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?j(t,e):I(t,e),n}function j(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n}return e.length-=n,i}function I(t,e){var r=L.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),0===(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}function C(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,x.nextTick(A,e,t))}function A(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var x=r(17);t.exports=u;var P,R=r(87);u.ReadableState=s;var M=(r(20).EventEmitter,function(t,e){return t.listeners(e).length}),N=r(35),L=r(18).Buffer,B=e.Uint8Array||function(){},U=r(11);U.inherits=r(9);var z=r(91),F=void 0;F=z&&z.debuglog?z.debuglog("stream"):function(){};var q,W=r(92),H=r(36);U.inherits(u,N);var G=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),u.prototype.destroy=H.destroy,u.prototype._undestroy=H.undestroy,u.prototype._destroy=function(t,e){this.push(null),e(t)},u.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=L.from(t,e),e=""),r=!0),c(this,t,e,!1,r)},u.prototype.unshift=function(t){return c(this,t,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(t){return q||(q=r(24).StringDecoder),this._readableState.decoder=new q(t),this._readableState.encoding=t,this};var K=8388608;u.prototype.read=function(t){F("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return F("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?C(this):g(this),null;if(0===(t=d(t,e))&&e.ended)return 0===e.length&&C(this),null;var n=e.needReadable;F("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,F("length less than watermark",n)),e.ended||e.reading?(n=!1,F("reading or ended",n)):n&&(F("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=d(r,e)));var i;return i=t>0?O(t,e):null,null===i?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&C(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(t,e){function r(t,e){F("onunpipe"),t===p&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function i(){F("onend"),t.end()}function o(){F("cleanup"),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("drain",g),t.removeListener("error",u),t.removeListener("unpipe",r),p.removeListener("end",i),p.removeListener("end",f),p.removeListener("data",s),v=!0,!h.awaitDrain||t._writableState&&!t._writableState.needDrain||g()}function s(e){F("ondata"),m=!1,!1!==t.write(e)||m||((1===h.pipesCount&&h.pipes===t||h.pipesCount>1&&-1!==D(h.pipes,t))&&!v&&(F("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,m=!0),p.pause())}function u(e){F("onerror",e),f(),t.removeListener("error",u),0===M(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",l),f()}function l(){F("onfinish"),t.removeListener("close",c),f()}function f(){F("unpipe"),p.unpipe(t)}var p=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1,F("pipe count=%d opts=%j",h.pipesCount,e);var d=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr,y=d?i:f;h.endEmitted?x.nextTick(y):p.once("end",y),t.on("unpipe",r);var g=b(p);t.on("drain",g);var v=!1,m=!1;return p.on("data",s),a(t,"error",u),t.once("close",c),t.once("finish",l),t.emit("pipe",p),h.flowing||(F("pipe resume"),p.resume()),t},u.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=D(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},u.prototype.on=function(t,e){var r=N.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&g(this):x.nextTick(w,this))}return r},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var t=this._readableState;return t.flowing||(F("resume"),t.flowing=!0,E(this,t)),this},u.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(F("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){if(F("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)){e.push(i)||(n=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<G.length;o++)t.on(G[o],this.emit.bind(this,G[o]));return this._read=function(e){F("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=O}).call(e,r(4),r(16))},function(t,e,r){t.exports=r(20).EventEmitter},function(t,e,r){"use strict";function n(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(a.nextTick(o,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,e){t.emit("error",e)}var a=r(17);t.exports={destroy:n,undestroy:i}},function(t,e,r){"use strict";function n(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);s.call(this,t),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(this,null,null)}function a(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=i;var s=r(5),u=r(11);u.inherits=r(9),u.inherits(i,s),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(t,e){var r=this;s.prototype._destroy.call(this,t,function(t){e(t),r.emit("close")})}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(25),o=r(26),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e,r,i){n(this,t),this.id=+e,this.tag=+r,this.value=+i}return a(t,[{key:"applyTo",value:function(t){var e=t.getEntity(this.id);if(!e)return console.error("Cannot change tag on non-existent entity #"+this.id),t;var r=e.setTag(this.tag,this.value);if(r===e)return t;var n={entity:this.id,tag:this.tag,previous:e.getTag(this.tag),current:this.value};return t.apply(new i.a(r)).apply(new o.a([n]))}}]),t}();e.a=s},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=r(26),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this.entity=e}return a(t,[{key:"applyTo",value:function(t){if(!this.entity)return console.error("Cannot add null entity"),t;var e=this.entity,r=+e.id;if(r<1)return console.error("Cannot add entity: Invalid entity id"),t;var n=t.entities;n.has(r)&&console.warn("Overwriting entity with id #"+r),n=n.set(r,e);var a=t.entityTree;a=a.setIn([e.getController(),e.getZone(),r],e);var s=[];return e.getTags().forEach(function(t,e){s.push({entity:r,tag:+e,previous:null,current:t})}),t=new i.a(n,a,t.options,t.optionTree,t.time,t.choices,t.descriptors,t.diffs),t.apply(new o.a(s))}}]),t}();e.a=s},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(2),o=(r.n(i),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),a=function(){function t(e,r,o,a,s){n(this,t),this._entityId=e,this._target=r,this._blockType=o,this._triggerKeyword=a,this._metaData=s,this._metaData||(this._metaData=i.Set())}return o(t,[{key:"entityId",get:function(){return this._entityId}},{key:"target",get:function(){return this._target}},{key:"type",get:function(){return this._blockType}},{key:"triggerKeyword",get:function(){return this._triggerKeyword}},{key:"metaData",get:function(){return this._metaData}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(e){n(this,t),this.descriptor=e}return o(t,[{key:"applyTo",value:function(t){var e=t.descriptors.push(this.descriptor);return new i.a(t.entities,t.entityTree,t.options,t.optionTree,t.time,t.choices,e,t.diffs)}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(){n(this,t)}return o(t,[{key:"applyTo",value:function(t){var e=t.descriptors.pop();return e===t.descriptors?t:new i.a(t.entities,t.entityTree,t.options,t.optionTree,t.time,t.choices,e,t.diffs)}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=r(40),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this.metaData=e}return a(t,[{key:"applyTo",value:function(t){var e=t.descriptors.peek();if(!e)return console.warn("Ignoring MetaData outside of Block"),t;var r=t.descriptors.pop(),n=e.metaData.add(this.metaData);return e=new o.a(e.entityId,e.target,e.type,e.triggerKeyword,n),r=r.push(e),new i.a(t.entities,t.entityTree,t.options,t.optionTree,t.time,t.choices,r,t.diffs)}}]),t}();e.a=s},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){n(this,t)}return i(t,[{key:"onBeforeMutate",value:function(t,e){}},{key:"onAfterMutate",value:function(t,e){}}]),t}();e.a=o},function(t,e,r){t.exports=r(46)},function(t,e,r){"use strict";function n(t,e,r){new s.a(t).setOptions(r).fromUrl(e)}function i(t){return new s.a(t)}function o(){return"0.11.0+60.ga6bd36b"}function a(t){s.a.destroy(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.renderHSReplay=n,e.launcher=i,e.release=o,e.destroy=a;var s=r(47)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(48),o=r.n(i),a=r(0),s=(r.n(a),r(49)),u=(r.n(s),r(50)),c=r(86),l=r(110),f=r(112),p=r(113),h=r(118),d=r(12),y=(r.n(d),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),g=function(){function t(e){var r=this;n(this,t),this.target=e,this.customLocale=!!d.cookie.get("joust_locale"),this.opts={debug:!1,logger:function(t){var e=t.message?t.message:t;console.error(e)},locale:d.cookie.get("joust_locale","enUS"),selectLocale:function(t,e){r.customLocale=!0,r.locale(t,function(){r._onSelectLocale&&r._onSelectLocale(t),e&&e()})},replayBlob:null,replayFilename:null,enableKeybindings:!0},this.opts.assetDirectory=function(t){return"assets/"+t},this.opts.cardArtDirectory=function(t){return"https://art.hearthstonejson.com/v1/256x/"+t+".jpg"},this._build=null,this.hsjson=null,this.startFromTurn=0,this.ready=!1}return y(t,null,[{key:"destroy",value:function(t){s.unmountComponentAtNode(t)}}]),y(t,[{key:"width",value:function(t){return this.opts.width=t,this}},{key:"height",value:function(t){return this.opts.height=t,this}},{key:"assets",value:function(t){var e=null;return e="string"==typeof t?function(e){return t+e}:t,this.opts.assetDirectory=e,this}},{key:"cardArt",value:function(t){var e=null;return e="string"==typeof t?function(e){return t+e+".jpg"}:t,this.opts.cardArtDirectory=e,this}},{key:"metadataSource",value:function(t){return console.warn("Launcher.metadataSource is deprecated"),this}},{key:"setOptions",value:function(t){for(var e in t)e&&(this.opts[e]=t[e]);return this}},{key:"onTurn",value:function(t){return this.turnCb=t,this}},{key:"onToggleReveal",value:function(t){return this.opts.onToggleReveal=t,this}},{key:"onToggleSwap",value:function(t){return this.opts.onToggleSwap=t,this}},{key:"onFullscreen",value:function(t){return this.opts.onFullscreen=t,this}},{key:"startPaused",value:function(t){return this.shouldStartPaused=void 0===t||!!t,this}},{key:"onReady",value:function(t){return this.opts.onReady=t,this}},{key:"startAtTurn",value:function(t){return this.startFromTurn=t,this}},{key:"startRevealed",value:function(t){return this.opts.startRevealed=t,this}},{key:"startSwapped",value:function(t){return this.opts.startSwapped=t,this}},{key:"fullscreen",value:function(t){return this.ref&&(t?this.ref.enterFullscreen():this.ref.exitFullscreen()),this}},{key:"logger",value:function(t){return this.opts.logger=t,this}},{key:"events",value:function(t){return this.opts.events=t,this.track("init",{count:1}),this}},{key:"debug",value:function(t){return void 0!==t&&null!==t||(t=!0),this.opts.debug=t,this}},{key:"locale",value:function(t,e){return this.opts.locale=t,this.ready?(this.fetchLocale(e),this.render()):e&&e(),this}},{key:"onSelectLocale",value:function(t){this._onSelectLocale=t}},{key:"play",value:function(){this.opts.scrubber.play(),this.shouldStartPaused=!1}},{key:"pause",value:function(){this.opts.scrubber.pausePlayback(),this.shouldStartPaused=!0}},{key:"toggle",value:function(){this.opts.scrubber.toggle()}},{key:"rewind",value:function(){this.opts.scrubber.rewind()}},{key:"stripBattletags",value:function(t){return void 0===t&&(t=!0),this.opts.stripBattletags=t,this}},{key:"enableKeybindings",value:function(){return this.opts.enableKeybindings=!0,this.render(),this}},{key:"disableKeybindings",value:function(){return this.opts.enableKeybindings=!1,this.render(),this}},{key:"addPlayerName",value:function(t){return this.opts.playerNames||(this.opts.playerNames=[]),this.opts.playerNames[this.opts.playerNames.length]=t,this}},{key:"fromUrl",value:function(t,e){var r=this,n=new c.a;n.debug=this.opts.debug;var i=new p.a,o=new l.a(null,this.startFromTurn);this.turnCb&&o.on("turn",this.turnCb);var a=new f.a,s=new h.a(this.opts.cardArtDirectory,this.opts.assetDirectory);s.canPreload()&&s.consume();var u=fetch(t).then(function(t){var e=t.status,n=200===e;if(r.track("replay_load_error",{error:!n},{statusCode:e}),!n)throw new Error("Could not load replay (status code "+e+")");return t.text()});return u.then(function(e){var u=[n,i,o,s];r.opts.replayBlob=new Blob([e],{type:"application/xml"}),r.opts.replayFilename=t.substr(t.lastIndexOf("/")+1)+".hreplay.xml",u.forEach(function(t){t.on("error",r.log.bind(r))}),Promise.all([new Promise(function(t){o.once("ready",function(){return t()})}),new Promise(function(t){n.once("build",function(e){r._build=e,r.fetchLocale(t)})}),new Promise(function(t){n.once("end",function(){return t()})})]).then(function(){o.play(),r.shouldStartPaused&&o.pausePlayback(),r.opts.onReady&&r.opts.onReady(),r.track("startup",{count:1,duration:(Date.now()-r.opts.startupTime)/1e3})}),n.pipe(i).pipe(o).pipe(a);var c=e.split(""),l=!0,f=!1,p=void 0;try{for(var h,d=c[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var y=h.value;if(!n.writable)break;n.write(y)}}catch(t){f=!0,p=t}finally{try{!l&&d.return&&d.return()}finally{if(f)throw p}}n.end(),r.opts.cardArtDirectory&&n.pipe(s)}),u.catch(function(){r.opts.loadingError=!0,r.render()}),n.on("error",function(t){n.end(),r.opts.loadingError=!0,r.render()}),n.once("error",function(){return r.track("decoder_error",{count:1})}),this.opts.sink=a,this.opts.scrubber=o,this.opts.cardOracle=n,this.opts.mulliganOracle=n,this.opts.startupTime=+Date.now(),this.ready=!0,this.render(e),this.track("starting_from_turn",{fromTurn:!!this.startFromTurn,turn:+this.startFromTurn}),this}},{key:"log",value:function(t){this.opts.logger(t)}},{key:"track",value:function(t,e,r){this.opts.events&&(r||(r={}),this.opts.events(t,e,r))}},{key:"fetchLocale",value:function(t){var e=this,r=this._build||"latest";this.hsjson||(this.hsjson=new o.a);var n=Date.now();this.hsjson.get(r,this.opts.locale).then(function(i){e.ref?e.ref.setCards(i):e.cards=i,e.track("metadata",{duration:(Date.now()-n)/1e3},{cards:i.length,build:r,has_build:"latest"!==r,cached:e.hsjson.cached,fallback:e.hsjson.fallback}),t&&t()})}},{key:"render",value:function(t){var e=this;this.ready&&s.render(a.createElement(u.a,Object.assign({},Object.assign({},this.opts,{ref:function(t){return e.ref=t}}))),"string"==typeof this.target?document.getElementById(this.target):this.target,function(){e.cards&&(e.ref.setCards(e.cards),e.cards=null),"function"==typeof t&&t()})}},{key:"build",get:function(){return this._build}},{key:"selectedLocale",get:function(){return this.customLocale?this.opts.locale:null}},{key:"replayDuration",get:function(){return this.opts.scrubber.getDuration()}},{key:"secondsWatched",get:function(){return this.opts.scrubber.secondsWatched}},{key:"percentageWatched",get:function(){return this.opts.scrubber.percentageWatched}},{key:"turn",get:function(){return this.opts.scrubber.getCurrentTurn()},set:function(t){var e=this.opts.scrubber.getHistory().turnMap.get(t);e&&this.opts.scrubber.seek(e.time)}},{key:"playing",get:function(){return this.opts.scrubber.isPlaying()},set:function(t){t?this.play():this.pause()}},{key:"fullscreenSupported",get:function(){return this.ref?this.ref.isFullscreenAvailable():null}}]),t}();e.a=g},function(t,e,r){!function(e,r){t.exports=r()}(0,function(){"use strict";var t=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){t.exports=e=window.fetch,e.Headers=window.Headers,e.Request=window.Request,e.Response=window.Response}),e=(t.Headers,t.Request,t.Response,function(){function t(){}return t.prototype.has=function(t){return!1},t.prototype.set=function(t,e){},t.prototype.get=function(t){return null},t}()),r=function(){function t(){}return t.prototype._available=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},t.prototype.has=function(t){return!!this._available()&&"string"==typeof localStorage[t]},t.prototype.set=function(t,e){if(this._available()){var r=JSON.stringify(e);do{try{localStorage.setItem(t,r);break}catch(t){try{localStorage.removeItem(localStorage.key(0))}catch(t){break}}}while(localStorage.length)}},t.prototype.get=function(t){return this._available()?JSON.parse(localStorage[t]):null},t}(),n=function(){function t(t){this.cache={},this.backend=t}return t.prototype.has=function(t){return void 0!==this.cache[t]||this.backend.has(t)},t.prototype.set=function(t,e){this.cache[t]=e,this.backend.set(t,e)},t.prototype.get=function(t){return void 0!==this.cache[t]?this.cache[t]:this.backend.get(t)},t}(),i={18336:4,20457:1,22115:1,22611:1};return function(){function t(t){var i=this;this.storagePrefix="hsjson-",this.endpoint="https://api.hearthstonejson.com/v1/",this.defaultLocale="enUS",this.cached=null,this.fallback=null,this.createUrl=function(t,e){return i.endpoint+t+"/"+e+"/cards.json"},this.extractBuild=function(t){var e=new RegExp(i.endpoint.replace(/[\/.]/g,"\\$&")),r=/((\d+)|(latest))\/[a-zA-Z]+\/cards\.json/,n=new RegExp("^"+e.source+r.source+"$"),o=n.exec(t);if(!o)throw new Error('No build found in url "'+t+'"');return o[1]},null===t?this.storage=new e:void 0===t?this.storage=new n(new r):t&&(this.storage=t)}return t.prototype.get=function(t,e){var r=this;return"latest"===t?this.getLatest(e):(e||(e=this.defaultLocale),this.fallback=!1,this.getSpecificBuild(t,e).catch(function(){return r.fallback=!0,r.fetchLatestBuild(e)}))},t.prototype.getLatest=function(t){return t||(t=this.defaultLocale),this.fallback=!1,this.fetchLatestBuild(t)},t.prototype.getSpecificBuild=function(t,e){var r=this,n=this.generateKey(t,e),i=!1;if(this.storage.has(n)){var o=this.storage.get(n);if("object"==typeof o&&"number"==typeof o.revision&&Array.isArray(o.cards)&&o.revision>=this.getRevision(t))return this.cached=!0,Promise.resolve(o.cards);i=!0}return this.cached=!1,this.fetchSpecificBuild(t,e,i).catch(function(n){return r.fetchSpecificBuild(t,e,!0)})},t.prototype.fetchSpecificBuild=function(t,e,r){var n=this,i=new Headers;return i.set("accept","application/json; charset=utf-8"),fetch(this.createUrl(t,e),{method:"GET",mode:"cors",cache:r?"reload":"default",headers:i}).then(function(t){var e=t.status;if(200!==e)throw new Error("Expected status code 200, got "+e);return t.json()}).then(function(r){return n.store(t,e,r),r})},t.prototype.fetchLatestBuild=function(t){var e=this;return this.fetchLatestBuildNumber(t).then(function(r){return e.getSpecificBuild(r,t)})},t.prototype.fetchLatestBuildNumber=function(t){var e=this;return fetch(this.createUrl("latest",t),{method:"HEAD",mode:"cors",cache:"no-store"}).then(function(t){var r=t.status;if(200!==r)throw new Error("Expected status code 200, got "+r);var n=e.extractBuild(t.url);if(isNaN(+n))throw new Error("Expected numeric build number");return+n})},t.prototype.store=function(t,e,r){if(r.length){var n=this.generateKey(t,e);this.storage.set(n,{revision:this.getRevision(t),cards:r})}},t.prototype.generateKey=function(t,e){if("latest"===t)throw new Error('Refusing to generate key for "latest" metadata');return this.storagePrefix+t+"_"+e},t.prototype.getRevision=function(t){var e=0;return"number"==typeof i[t]&&(e=i[t]),e},t}()})},function(t,e){t.exports=ReactDOM},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(51)),u=r(60),c=r(63),l=r(2),f=(r.n(l),r(12)),p=(r.n(f),r(85)),h=r.n(p),d=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),y=function(t){function e(t){n(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.fullscreenErrorTimeout=null,r.hasCheckedForSwap=!1,r.swapPlayers=!0,r.state={gameState:null,swapPlayers:!!r.props.startSwapped,isFullscreen:!1,isFullscreenAvailable:h.a&&h.a.enabled,fullscreenError:!1,isRevealingCards:void 0===r.props.startRevealed||r.props.startRevealed,cardOracle:l.Map(),mulliganOracle:null,isLogVisible:!1,isLogMounted:!1},r}return o(e,t),d(e,[{key:"componentDidMount",value:function(){var t=this;this.cb=this.setGameState.bind(this),this.props.sink.once("gamestate",function(){!!+f.cookie.get("joust_event_log","0")&&t.setState({isLogVisible:!0,isLogMounted:!0})}),this.props.sink.on("gamestate",this.cb.bind(this)),this.state.isFullscreenAvailable&&(h.a.onchange(function(){h.a.isFullscreen?t.onAttainFullscreen():t.onReleaseFullscreen()}),h.a.onerror(function(){t.setState({fullscreenError:!0}),t.clearFullscreenErrorTimeout(),t.fullscreenErrorTimeout=window.setTimeout(function(){t.setState({fullscreenError:!1})},3e3)})),this.cardOracleCb=this.updateCardOracle.bind(this),this.mulliganOracleCb=this.updateMulliganOracle.bind(this),this.props.cardOracle&&this.props.cardOracle.on("cards",this.cardOracleCb),this.props.cardOracle&&this.props.mulliganOracle.on("mulligans",this.mulliganOracleCb)}},{key:"track",value:function(t,e,r){this.props.events&&this.props.events(t,e,r||{})}},{key:"setGameState",value:function(t){this.setState({gameState:t})}},{key:"clearFullscreenErrorTimeout",value:function(){this.fullscreenErrorTimeout&&(window.clearTimeout(this.fullscreenErrorTimeout),this.fullscreenErrorTimeout=null)}},{key:"componentWillUnmount",value:function(){this.props.sink.removeListener("gamestate",this.cb),this.clearFullscreenErrorTimeout(),this.props.cardOracle.removeListener("cards",this.cardOracleCb),this.props.cardOracle.removeListener("mulligans",this.mulliganOracleCb)}},{key:"onClickExit",value:function(t){t.preventDefault(),this.props.exitGame&&this.props.exitGame()}},{key:"onAttainFullscreen",value:function(){this.setState({isFullscreen:!0}),"orientation"in screen&&"function"==typeof screen.orientation.lock&&screen.orientation.lock("landscape").catch(function(t){console.warn(t)}),this.props.onFullscreen&&this.props.onFullscreen(!0),this.triggerResize()}},{key:"onReleaseFullscreen",value:function(){this.setState({isFullscreen:!1}),"orientation"in screen&&"function"==typeof screen.orientation.unlock&&screen.orientation.unlock(),this.props.onFullscreen&&this.props.onFullscreen(!1),this.triggerResize()}},{key:"isFullscreenAvailable",value:function(){return this.state.isFullscreenAvailable}},{key:"enterFullscreen",value:function(){this.state.isFullscreenAvailable&&h.a.request(this.ref)}},{key:"exitFullscreen",value:function(){this.state.isFullscreenAvailable&&h.a.exit()}},{key:"updateCardOracle",value:function(t){this.setState({cardOracle:t})}},{key:"updateMulliganOracle",value:function(t){this.setState({mulliganOracle:t})}},{key:"setCards",value:function(t){var e=null;if(t){if(!t.length)return void console.error("Got invalid card data to metadata callback (expected card data array)");e=l.Map(),e=e.withMutations(function(e){t.forEach(function(t){e=e.set(t.id,t)})})}this.setState({cards:e})}},{key:"triggerResize",value:function(){try{var t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}catch(t){}}},{key:"checkForSwap",value:function(){var t=this;if(this.state.gameState){var e=this.state.gameState.getPlayers();if(e.length){var r=e[0],n=this.state.gameState.entityTree.get(r.playerId).get(3);n&&n.count()>0&&(this.hasCheckedForSwap=!0,n.forEach(function(e){if(!e.revealed)return t.swapPlayers=!1,!1}))}}}},{key:"render",value:function(){var t=this;this.hasCheckedForSwap||this.checkForSwap();var e=[];this.props.exitGame&&e.push(a.createElement("div",{id:"joust-quit",key:"exit"},a.createElement("a",{href:"#",onClick:this.onClickExit.bind(this)},"Exit Game")));var r=this.swapPlayers!==this.state.swapPlayers,n=a.createElement(c.a,{key:"game",state:this.state.gameState,interaction:this.props.interaction,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,cards:this.state.cards,swapPlayers:r,hasStarted:this.props.scrubber.canInteract(),cardOracle:this.state.cardOracle,mulliganOracle:this.state.mulliganOracle,hideCards:!this.state.isRevealingCards,playerNames:this.props.playerNames||null,loadingError:this.props.loadingError,stripBattletags:this.props.stripBattletags}),i=a.createElement(u.a,{key:"log",state:this.state.gameState,cards:this.state.cards,cardOracle:this.state.cardOracle,tail:this.props.scrubber.getHistory().tail,currentTime:this.props.scrubber.getCurrentTime(),isHidden:!this.state.isLogVisible,stripBattletags:this.props.stripBattletags});e.push(a.createElement("div",{key:"game-wrapper",className:"game-wrapper"},n,this.state.isLogMounted||this.state.isLogVisible?i:null)),this.props.scrubber&&e.push(a.createElement(s.a,{key:"scrubber",scrubber:this.props.scrubber,swapPlayers:function(){var e=!t.state.swapPlayers;t.setState({swapPlayers:e}),t.props.onToggleSwap&&t.props.onToggleSwap(e)},isSwapped:r,isFullscreen:this.state.isFullscreen,isFullscreenAvailable:this.state.isFullscreenAvailable,fullscreenError:this.state.fullscreenError,onClickFullscreen:function(){return t.enterFullscreen()},onClickMinimize:function(){return t.exitFullscreen()},isRevealingCards:this.state.isRevealingCards,canRevealCards:!!this.state.cardOracle,onClickHideCards:function(){t.setState({isRevealingCards:!1}),t.props.onToggleReveal&&t.props.onToggleReveal(!1)},onClickRevealCards:function(){t.setState({isRevealingCards:!0}),t.props.onToggleReveal&&t.props.onToggleReveal(!0)},isLogVisible:this.state.isLogVisible,toggleLog:function(){var e=!t.state.isLogVisible;t.setState({isLogVisible:e,isLogMounted:!0}),f.cookie.set("joust_event_log",""+ +e,{expires:365,path:"/"})},enableKeybindings:this.props.enableKeybindings,locale:this.props.locale,onSelectLocale:this.props.selectLocale&&function(e,r){return t.props.selectLocale(e,r)},replayBlob:this.props.replayBlob,replayFilename:this.props.replayFilename}));var o={};this.state.isFullscreen||(this.props.width&&(o.width=this.props.width),this.props.height&&(o.height=this.props.height));var l=["joust-widget","game-widget"];return this.state.isFullscreen&&l.push("joust-fullscreen"),a.createElement("div",{className:l.join(" "),ref:function(e){return t.ref=e},style:o,onContextMenu:function(t){return t.preventDefault()}},e)}},{key:"shouldComponentUpdate",value:function(t,e){return this.state.cardOracle===e.cardOracle||!this.props.scrubber||!this.props.scrubber.isPlaying()}}]),e}(a.Component);e.a=y},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(52)),u=r(54),c=r(56),l=r(12),f=(r.n(l),r(3)),p=(r.n(f),r(58)),h=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),d=function(t){function e(t){n(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));r.updateListener=function(){return r.updateState()};var o=+l.cookie.get("joust_speed","1");return-1===e.SPEEDS.indexOf(o)&&(o=1),r.state={playing:!1,canInteract:!1,canRewind:!1,canPlay:!1,speed:o,isShowingSettings:!1},r.props.scrubber.setSpeed(r.state.speed),r.onKeyDown=r.onKeyDown.bind(r),r}return o(e,t),h(e,[{key:"componentDidMount",value:function(){this.registerListeners(this.props)}},{key:"componentWillUpdate",value:function(t,e){f.isEqual(t,this.props)||this.removeListeners(this.props)}},{key:"componentDidUpdate",value:function(t,e,r){f.isEqual(t,this.props)||this.registerListeners(this.props)}},{key:"shouldComponentUpdate",value:function(t,e,r){return!f.isEqual(e,this.state)||t.isSwapped!==this.props.isSwapped||t.isFullscreen!==this.props.isFullscreen||t.isFullscreenAvailable!==this.props.isFullscreenAvailable||t.fullscreenError!==this.props.fullscreenError||t.isRevealingCards!==this.props.isRevealingCards||t.canRevealCards!==this.props.canRevealCards||t.isLogVisible!==this.props.isLogVisible||t.locale!==this.props.locale}},{key:"registerListeners",value:function(t){t.scrubber.on("update",this.updateListener),t.enableKeybindings&&document.addEventListener("keydown",this.onKeyDown)}},{key:"removeListeners",value:function(t){t.scrubber.removeListener("update",this.updateListener),t.enableKeybindings&&document.removeEventListener("keydown",this.onKeyDown)}},{key:"onKeyDown",value:function(t){if(this.state.canInteract&&!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)){var r=document.activeElement&&document.activeElement.tagName;if("TEXTAREA"!=r&&"INPUT"!=r&&"SELECT"!=r){var n=!0;switch(t.keyCode){case 32:case 75:this.props.scrubber.toggle();break;case 37:case 74:this.props.scrubber.skipBack();break;case 39:case 76:this.props.scrubber.nextTurn();break;case 38:this.props.scrubber.previousAction();break;case 40:this.props.scrubber.nextAction();break;case 36:this.props.scrubber.rewind();break;case 35:this.props.scrubber.fastForward();break;case 88:if(!this.props.canRevealCards)return;this.props.isRevealingCards?this.props.onClickHideCards&&this.props.onClickHideCards():this.props.onClickRevealCards&&this.props.onClickRevealCards();break;case 87:case 187:var i=e.SPEEDS.indexOf(this.state.speed)+1;e.SPEEDS[i]&&this.selectSpeed(e.SPEEDS[i]);break;case 83:case 189:var o=e.SPEEDS.indexOf(this.state.speed)-1;e.SPEEDS[o]&&this.selectSpeed(e.SPEEDS[o]);break;case 67:this.props.swapPlayers();break;case 70:if(!this.props.isFullscreenAvailable)return;this.props.isFullscreen?this.props.onClickMinimize():this.props.onClickFullscreen();break;default:n=!1}n&&t.preventDefault()}}}},{key:"updateState",value:function(){var t=this.props.scrubber;this.setState({playing:t.isPlaying(),canInteract:t.canInteract(),canPlay:t.canPlay(),canRewind:t.canRewind(),speed:t.getSpeed(),duration:t.getDuration(),currentTime:t.getCurrentTime()})}},{key:"componentWillUnmount",value:function(){this.removeListeners(this.props)}},{key:"render",value:function(){var t=this,r=this.state.playing?a.createElement(c.a,{title:"Pause",align:"left"},a.createElement("button",{onClick:function(){return t.pause()},disabled:!this.state.canInteract,className:"joust-scrubber-button-wide"},a.createElement("i",{className:"joust-fa joust-fa-pause"}))):a.createElement(c.a,{title:"Play",align:"left"},a.createElement("button",{onClick:function(){return t.play()},disabled:!this.state.canPlay,className:"joust-scrubber-button-wide"},a.createElement("i",{className:"joust-fa joust-fa-play"}))),n=a.createElement(c.a,{title:"Restart",align:"left"},a.createElement("button",{onClick:function(){return t.rewind()},disabled:!this.state.canRewind,className:"joust-scrubber-button-wide"},a.createElement("i",{className:"joust-fa joust-fa-fast-backward"}))),i=a.createElement(c.a,{title:"Playback speed",desktop:"%s (W/S)"},a.createElement(u.a,{speed:this.state.speed,speeds:e.SPEEDS,selectSpeed:function(e){return t.selectSpeed(e)},disabled:!this.state.canInteract})),o=this.props.isFullscreen?a.createElement(c.a,{title:"Restore",align:"right",desktop:"%s (F)"},a.createElement("button",{onClick:this.props.onClickMinimize},a.createElement("i",{className:"joust-fa joust-fa-window-restore"}))):a.createElement(c.a,{title:this.props.fullscreenError?"Error entering fullscreen.":"Fullscreen",align:"right",forceShow:this.props.fullscreenError,desktop:this.props.fullscreenError?null:"%s (F)"},a.createElement("button",{onClick:function(){return t.props.isFullscreenAvailable&&t.props.onClickFullscreen()},disabled:!this.props.isFullscreenAvailable},a.createElement("i",{className:"joust-fa joust-fa-arrows-alt"}))),l=this.props.isRevealingCards?a.createElement(c.a,{title:"Hide cards",desktop:"%s (X)"},a.createElement("button",{onClick:this.props.onClickHideCards},a.createElement("i",{className:"joust-fa joust-fa-eye-slash"}))):a.createElement(c.a,{title:"Reveal cards",desktop:"%s (X)"},a.createElement("button",{onClick:this.props.onClickRevealCards,disabled:!this.props.canRevealCards},a.createElement("i",{className:"joust-fa joust-fa-eye"}))),f=a.createElement(c.a,{title:"Swap players",desktop:"%s (C)"},a.createElement("button",{onClick:this.props.swapPlayers,disabled:!this.state.canInteract},a.createElement("i",{className:"joust-fa joust-fa-unsorted"}))),h=(a.createElement(c.a,{title:this.props.isLogVisible?"Hide event log":"Show event log"},a.createElement("button",{onClick:this.props.toggleLog,disabled:!this.state.canInteract},a.createElement("i",{className:"joust-fa joust-fa-bars"}))),a.createElement("button",{onClick:function(){return t.setState({isShowingSettings:!t.state.isShowingSettings})}},a.createElement("i",{className:"joust-fa joust-fa-cog"}))),d=this.state.isShowingSettings?h:a.createElement(c.a,{title:"Settings"},h);return a.createElement("div",{className:"joust-scrubber"},this.state.canRewind&&!this.state.canPlay?n:r,i,a.createElement(s.a,{duration:this.state.duration,at:this.state.currentTime,seek:this.props.scrubber.seek.bind(this.props.scrubber),turnMap:this.props.scrubber.getHistory().turnMap,swapPlayers:this.props.isSwapped,disabled:!this.state.canInteract,ref:function(e){return t.props.scrubber.setInhibitor(e)}}),l,f,this.state.isShowingSettings&&a.createElement(p.a,{locale:this.props.locale,onSelectLocale:this.props.onSelectLocale&&function(e,r){return t.selectLocale(e,r)},isLogVisible:this.props.isLogVisible,onToggleLog:function(){return t.props.toggleLog()},onClose:function(){return t.setState({isShowingSettings:!1})},replayBlob:this.props.replayBlob,replayFilename:this.props.replayFilename}),d,o)}},{key:"play",value:function(){this.props.scrubber.play()}},{key:"pause",value:function(){this.props.scrubber.pausePlayback()}},{key:"rewind",value:function(){var t=!1;this.props.scrubber.hasEnded()&&(t=!0),this.props.scrubber.rewind(),t&&this.props.scrubber.play()}},{key:"selectSpeed",value:function(t){t=Math.max(t,0),l.cookie.set("joust_speed",""+t,{expires:365,path:"/"}),this.props.scrubber.setSpeed(t)}},{key:"selectLocale",value:function(t,e){l.cookie.set("joust_locale",t,{expires:365,path:"/"}),this.props.onSelectLocale(t,e)}}]),e}(a.Component);e.a=d,d.SPEEDS=[.75,1,1.5,2,3,4,8]},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(53)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(t){n(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.state={isDragging:!1},r.mouseMove=r.onMouseMove.bind(r),r.mouseUp=r.onMouseUp.bind(r),r.touchMove=r.onTouchMove.bind(r),r}return o(e,t),u(e,[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp),document.addEventListener("touchmove",this.touchMove),document.addEventListener("touchend",this.mouseUp),document.addEventListener("touchcancel",this.mouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp),document.removeEventListener("touchmove",this.touchMove),document.removeEventListener("touchend",this.mouseUp),document.removeEventListener("touchcancel",this.mouseUp)}},{key:"onMouseDown",value:function(t){0!==t.button||this.props.disabled||(t.preventDefault(),this.setState({isDragging:!0}),this.seek(t.clientX))}},{key:"onMouseMove",value:function(t){if(this.state.isDragging)return t.buttons?void this.seek(t.clientX):void this.setState({isDragging:!1})}},{key:"onMouseUp",value:function(t){this.setState({isDragging:!1})}},{key:"onTouchStart",value:function(t){if(t.touches[0]&&!this.props.disabled){t.preventDefault();var e=t.touches[0];this.setState({isDragging:!0}),this.seek(e.clientX)}}},{key:"onTouchMove",value:function(t){if(this.state.isDragging&&!this.props.disabled&&t.touches[0]){t.preventDefault();var e=t.touches[0];this.seek(e.clientX)}}},{key:"seek",value:function(t){var e=this.ref.getBoundingClientRect(),r=Math.min(Math.max(e.left,t),e.right),n=e.right-e.left;r-=e.left;var i=this.props.duration/n*r;this.props.seek(i)}},{key:"render",value:function(){var t=this,e=this.props.turnMap.get(1),r=e&&e.time>0?a.createElement(s.a,{key:0,mulligan:!0,duration:e.time,totalDuration:this.props.duration}):null,n=this.props.turnMap.map(function(e,r,n){for(var i=0,o=1;!n.has(r+o)&&r+o<n.count();)o++;if(n.has(r+o)){i=n.get(r+o).time-e.time}else i=t.props.duration-e.time;return a.createElement(s.a,{key:r,state:e,invert:t.props.swapPlayers,duration:i,totalDuration:t.props.duration,turnNumber:r})}).toArray(),i=100/this.props.duration*this.props.at,o=["joust-scrubber-timeline"];return n.length||o.push("no-turns"),this.props.disabled?o.push("disabled"):this.state.isDragging&&o.push("dragging"),a.createElement("div",{className:o.join(" "),ref:function(e){return t.ref=e},onMouseDown:this.onMouseDown.bind(this),onTouchStart:this.onTouchStart.bind(this)},a.createElement("div",{className:"joust-scrubber-progress",style:{width:i+"%"}}),r,n)}},{key:"isInhibiting",value:function(){return this.state.isDragging}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"render",value:function(){if(!this.props.totalDuration)return null;var t=["joust-scrubber-turn"],e=100/this.props.totalDuration*this.props.duration,r={width:e+"%"};if(this.props.state){var n=0,i=this.props.state.getPlayer(1);i&&(n+=i.getTag(24)?1:0);var o=this.props.state.game;o&&t.push(!!((o.getTag(20)+n)%2)!=this.props.invert?"top":"bottom")}else this.props.mulligan&&t.push("mulligan");var s=this.props.turnNumber%2?Math.floor(this.props.turnNumber/2)+1:null;return s&&(t.push("text"),t.push(s%2?"odd":"even")),a.createElement("section",{className:t.join(" "),style:r},this.props.mulligan?"M":s)}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(3)),u=(r.n(s),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"changeSpeed",value:function(t){this.props.selectSpeed(+t.target.value)}},{key:"shouldComponentUpdate",value:function(t,e){return t.speed!==this.props.speed||s.isEqual(t.speeds,this.props.speed)||t.selectSpeed!==this.props.selectSpeed||t.disabled!==this.props.disabled}},{key:"render",value:function(){var t=this,e=this.props.speeds.map(function(t){return a.createElement("option",{key:t,value:""+t},t,""," ")});return a.createElement("select",{onChange:function(e){return t.changeSpeed(e)},value:""+this.props.speed,disabled:this.props.disabled},e)}}]),e}(a.Component);e.a=c},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(27),s=(r.n(a),r(0)),u=(r.n(s),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),c=function(t){function e(t,r){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return o.state={isHovering:!1,mobile:a.ios||a.android||a.windowsphone},o}return o(e,t),u(e,[{key:"startHovering",value:function(t){this.setState({isHovering:!0})}},{key:"stopHovering",value:function(t){this.setState({isHovering:!1})}},{key:"shouldShow",value:function(){return this.state.isHovering||this.props.forceShow}},{key:"render",value:function(){var t=this,e=["joust-tooltipper-tooltip"];return this.props.align&&e.push(this.props.align),s.createElement("div",{className:"joust-tooltipper",onMouseOver:function(e){t.startHovering(e)},onTouchStart:function(e){t.startHovering(e)},onMouseOut:function(e){t.stopHovering(e)},onTouchEnd:function(e){t.stopHovering(e)}},this.shouldShow()?s.createElement("div",{className:e.join(" ")},s.createElement("span",null,this.tooltip)):null,this.props.children)}},{key:"mobile",get:function(){return this.state.mobile}},{key:"desktop",get:function(){return!this.mobile}},{key:"tooltip",get:function(){var t=this.props.title||"";return this.props.mobile&&this.mobile?t=this.props.mobile.replace(/%s/,t):this.props.desktop&&this.desktop&&(t=this.props.desktop.replace(/%s/,t)),t}}]),e}(s.Component);e.a=c},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(59)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"downloadXML",value:function(){var t=this.props,e=t.replayBlob,r=t.replayFilename,n=window.URL.createObjectURL(e),i=document.createElement("a");i.style.display="none",i.href=n,i.setAttribute("download",r),void 0===i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}},{key:"render",value:function(){var t=this;return a.createElement("div",{className:"joust-scrubber-settings"},this.props.onClose&&a.createElement("header",null,a.createElement("span",null,"Settings"),a.createElement("a",{title:"Close",onClick:function(){return t.props.onClose()}},"")),a.createElement("section",null,a.createElement("label",null,a.createElement("span",null,"Card Language:"),a.createElement(s.a,{locale:this.props.locale,selectLocale:function(e,r){return t.props.onSelectLocale(e,r)},disabled:!this.props.onSelectLocale}))),a.createElement("section",null,a.createElement("label",{className:"joust-scrubber-settings-checkbox"},a.createElement("input",{type:"checkbox",checked:this.props.isLogVisible,onChange:function(e){return t.props.onToggleLog()}}),a.createElement("span",null,"Show Event Log"))),this.props.replayBlob&&a.createElement("section",null,a.createElement("a",{onClick:function(){return t.downloadXML()}},"Download XML")),a.createElement("footer",null,a.createElement("a",{href:"https://github.com/HearthSim/Joust/issues",target:"_blank"},"Report Issue"),a.createElement("a",{href:"https://hearthsim.info/joust/",target:"_blank",title:"Joust 0.11.0+60.ga6bd36b"},"About")))}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(3)),u=(r.n(s),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),c=function(t){function e(t,r){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return o.state={loading:!1},o}return o(e,t),u(e,[{key:"changeLocale",value:function(t){var e=this,r=t.target.value;this.setState({loading:!0}),this.props.selectLocale(r,function(){e.setState({loading:!1})})}},{key:"render",value:function(){var t=this,e={enUS:"English",zhTW:"Chinese (TW)",zhCN:"Chinese (CN)",frFR:"French",deDE:"German",itIT:"Italian",jaJP:"Japanese",koKR:"Korean",plPL:"Polish",ptBR:"Portuguese",ruRU:"Russian",esES:"Spanish (ES)",esMX:"Spanish (MX)",thTH:"Thai"},r=s.map(e,function(t,e){return a.createElement("option",{key:e,value:e},t)});return a.createElement("select",{onChange:function(e){return t.changeLocale(e)},value:this.props.locale,disabled:this.props.disabled||this.state.loading},r)}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(3)),u=(r.n(s),r(61)),c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function(t){function e(t){n(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.state={lines:r.parseHistory(t.tail)},r}return o(e,t),c(e,[{key:"shouldComponentUpdate",value:function(t,e){return this.props.tail&&this.props.tail.state!==t.tail.state||this.props.currentTime!==t.currentTime||this.props.cards!==t.cards||this.props.cardOracle!==t.cardOracle||this.props.isHidden!==t.isHidden}},{key:"componentWillReceiveProps",value:function(t){this.props.tail!==t.tail&&this.setState({lines:this.parseHistory(t.tail)})}},{key:"parseHistory",value:function(t){var e=[],r=void 0,n=t;if(n)for(e.push({type:1,data:-1,time:n.state.time});r=n.next;)this.analyzeGameStateDiff(n.state,r.state).forEach(function(t){return e.push(t)}),n=r;return this.simplify(e)}},{key:"simplify",value:function(t){for(var e=[],r=0;r<t.length-1;r++){var n=t[r],i=t[r+1];if(n.targetId==i.targetId)if(4==n.type&&16==i.type||16==n.type&&4==i.type){var o=4==n.type?n:i,a=16==n.type?n:i;e.push({type:28,time:n.time,indent:i.indent,entityId:o.entityId,targetId:a.entityId}),r++}else n.entityId==i.entityId&&(6==n.type&&7==i.type||7==n.type&&6==i.type)?(e.push({type:29,time:n.time,entityId:n.entityId,targetId:n.targetId,indent:i.indent,data:6==n.type?n.data:i.data,data2:6==n.type?i.data:n.data}),r++):e.push(n);else 39==n.type&&1==i.type||e.push(n)}return t.length&&e.push(t[t.length-1]),e}},{key:"render",value:function(){var t=this;if(this.props.isHidden)return null;var e=this.state.lines.filter(function(e){return e.time<=t.props.currentTime}).length,r=Math.max(0,e-20),n=this.state.lines.slice(r).map(function(e,n){return a.createElement(u.a,{key:n+r,first:!n,type:e.type,entityId:e.entityId,targetId:e.targetId,player:e.player,data:e.data,data2:e.data2,indent:e.indent,inactive:e.time>=t.props.currentTime,cardOracle:t.props.cardOracle,cards:t.props.cards,stripBattletags:t.props.stripBattletags})});return a.createElement("div",{className:"joust-log",onContextMenu:function(t){return t.stopPropagation()}},n)}},{key:"analyzeGameStateDiff",value:function(t,e){var r=[],n=this.getTurn(t,e);return n&&r.push(n),this.analyzeDescriptors(t,e).forEach(function(t){return r.push(t)}),e.diffs.isEmpty()||this.analyzeDiffs(e).forEach(function(t){return r.push(t)}),r}},{key:"getTurn",value:function(t,e){var r=this.newLogItemData(e),n=e.game,i=t.game;return(n.getTag(20)>i.getTag(20)||!t.getPlayers().every(function(t){return 4==t.getTag(305)})&&e.getPlayers().every(function(t){return 4==t.getTag(305)}))&&(r.type=1,r.data=Math.floor((n.getTag(20)+1)/2),this.setLidPlayer(r,e,function(t){return 1==t.getTag(23)})),r.type?r:null}},{key:"analyzeDescriptors",value:function(t,e){var r=this,n=this.newLogItemData(e),i=[],o=function(t){n.type=t,i.push(n),n=r.newLogItemData(e,n.entityId)};return e.descriptors.filterNot(function(e){return t.descriptors.contains(e)}).forEach(function(t){var i=e.getEntity(t.entityId);n.entityId=t.entityId,n.targetId=t.target;var a=t.type;if(1==a){var s=t.metaData.find(function(t){return 1==t.type});n.data=s&&s.data,o(10)}else if(3!=a&&5!=a||!n.entityId)7==a&&i&&(r.setLidPlayer(n,e,function(t){return t.playerId==i.getController()}),o(3));else{5==t.type&&i&&i.getTag(219)&&o(13);var u=new Map,c=new Map;t.metaData.forEach(function(t){var e=t.type;1!=e&&2!=e||t.entities.forEach(function(r){var n=1==e?u:c;n.set(r,t.data+(n.get(r)||0))})}),u.forEach(function(t,i){r.setLidTarget(n,e,i),n.data=t,o(14)}),c.forEach(function(t,i){r.setLidTarget(n,e,i),n.data=t,o(15)})}}),i}},{key:"analyzeDiffs",value:function(t){var e=this,r=this.newLogItemData(t),n=[],i=0,o=function(i){i&&(r.type=i,n.push(r),r=e.newLogItemData(t))};if(t.diffs.forEach(function(n){var a=t.getEntity(n.entity),s=t.descriptor;e.setLidEntity(r,t,n.entity),e.setLidTarget(r,t,s&&s.entityId),e.setLidPlayer(r,t,function(t){return t.playerId==a.getController()}),49==n.tag?(2==n.previous&&3==n.current&&r.targetId&&4==t.getEntity(r.targetId).getZone()&&(r.indent=!0),o(e.getZoneChangeLine(n,a.getCardType()))):null!==n.previous&&(r.data=n.current,1==a.getZone()&&o(e.getInPlayLine(n,t,a,r)),o(e.getLine(n)),47==n.tag&&a&&r.targetId&&n.previous<n.current?i|=+("OG_279"==a.cardId):45==n.tag&&a&&n.previous<n.current&&(i|=+("OG_279"==a.cardId)<<1))}),3==i){var a=s.find(t.getPlayers(),function(t){return!!t.getTag(23)}),u=t.entities.find(function(t){return"OG_279"==t.cardId&&t.getController()==a.playerId});u&&(r.entityId=u.id,r.data=u.getAtk(),r.data2=u.getHealth(),o(30))}return n}},{key:"getLine",value:function(t){switch(t.tag){case 50:return 34;case 17:switch(t.current){case 8:return 26;case 4:return 27}}return null}},{key:"getInPlayLine",value:function(t,e,r,n){switch(t.tag){case 47:if(r&&n.targetId){if(t.previous<t.current)return n.data=t.current-t.previous,6;if(t.previous>t.current)return n.data=t.current,8}break;case 45:if(r){if(t.previous<t.current)return n.data=t.current-t.previous,7;if(t.previous>t.current)return n.data=t.current,9}break;case 292:if(t.previous<t.current)return n.data=t.current-t.previous,5;break;case 194:return 18;case 190:return 19;case 191:return 25;case 260:return 24;case 197:return 23;case 188:return 22;case 189:return 21;case 240:return 20;case 334:if(t.current){var i=e.getEntity(n.entityId);return this.setLidEntity(n,e,i&&i.getTag(27)),this.setLidTarget(n,e,t.current),38}return null;case 198:return 16==t.current?(this.setLidPlayer(n,e,function(t){return 1==t.getTag(23)}),39):null}return null}},{key:"getZoneChangeLine",value:function(t,e){switch(t.previous){case 1:switch(t.current){case 2:return 36;case 3:return 37;case 4:return-1!==[4,3,7].indexOf(e)&&11;case 6:return-1!==[4,3,10].indexOf(e)&&16}break;case 2:switch(t.current){case 3:return 2;case 4:case 5:case 6:return 33;case 1:return 35}break;case 3:switch(t.current){case 2:return 17;case 4:case 5:case 6:return 31}break;case 6:switch(t.current){case 3:return 12;case 1:return-1!==[4,3,10].indexOf(e)&&4}break;case null:case 0:case 4:switch(t.current){case 2:return 32;case 3:return 12;case 1:return-1!==[4,3,10,7].indexOf(e)&&4}}return null}},{key:"getCardData",value:function(t,e){var r=t.getEntity(e);return this.props.cards.get(r?r.cardId:this.props.cardOracle.get(e))}},{key:"setLidEntity",value:function(t,e,r){r&&(t.entityId=r)}},{key:"setLidTarget",value:function(t,e,r){r&&(t.targetId=r)}},{key:"setLidPlayer",value:function(t,e,r){var n=e.getPlayers().find(function(t){return r(t)});t.player=n&&n.name}},{key:"newLogItemData",value:function(t,e){return{type:0,data:0,time:t.time,entityId:e,indent:t.descriptors.count()>1||16==t.game.getTag(198)}}}]),e}(a.Component);e.a=l},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(62)),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function(t){function e(t){n(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.state={entityData:r.lookupEntity(r.props.entityId),targetData:r.lookupEntity(r.props.targetId)},r}return o(e,t),c(e,[{key:"shouldComponentUpdate",value:function(t){var e=!(!t.entityId&&!t.targetId);return this.props.inactive!==t.inactive||this.props.cards!==t.cards&&e||this.props.cardOracle!==t.cardOracle&&e||this.props.type!==t.type||this.props.time!==t.time||this.props.entityId!==t.entityId||this.props.targetId!==t.targetId||this.props.player!==t.player||this.props.data!==t.data||this.props.data2!==t.data2||this.props.indent!==t.indent}},{key:"componentWillReceiveProps",value:function(t){var e={};this.props.entityId!==t.entityId&&(e.entityData=this.lookupEntity(t.entityId)),this.props.targetId!==t.targetId&&(e.targetData=this.lookupEntity(t.targetId)),this.setState(e)}},{key:"render",value:function(){var t="",e=["line"];this.props.inactive&&e.push("inactive"),1==this.props.type?(e.push("header"),this.props.first||(t+="\r\n"),t+="# "):this.indent()&&(e.push("indent"),t+="\t");var r=a.createElement(s.a,{key:"entity",cards:this.props.cards,cardId:this.props.cardOracle&&this.props.cardOracle.get(this.props.entityId)}),n=a.createElement(s.a,{key:"target",cards:this.props.cards,cardId:this.props.cardOracle&&this.props.cardOracle.get(this.props.targetId)}),i={player:this.getPlayerName(),entity:r,target:n,source:n,data:this.props.data},o=this.parseLine(i).split(" "),c=o.map(function(t){var e=t.match(/^(.*)%(\w+)%(.*)$/);if(null===e)return t;var r=e[2];return void 0!==i[r]?"object"!==u(i[r])?e[1]+i[r]+e[3]:i[r]:t}).map(function(t,e){return"object"!==(void 0===t?"undefined":u(t))?(e>0?" ":"")+t+" ":t});return a.createElement("div",{className:e.join(" ")},t?a.createElement("pre",null,t):null,c)}},{key:"indent",value:function(){switch(this.props.type){case 2:case 33:case 14:case 12:return this.props.indent;case 1:case 3:case 10:case 26:case 27:case 39:case 17:return!1}return!0}},{key:"parseLine",value:function(t){switch(this.props.type){case 1:return-1==this.props.data?"Mulligan":"Turn %data%: %player%";case 27:return"%player% wins!";case 26:return"%player% concedes";case 2:return this.state.targetData?"%player% draws %entity% from %source%":"%player% draws %entity%";case 4:return this.state.entityData&&"WEAPON"===this.state.entityData.type?"%source% creates %entity%":"%source% summons %entity%";case 28:return"%entity% replaces %target%";case 5:return this.state.targetData?"%entity% gains %data% armor from %source%":"%entity% gains %data% armor";case 6:return this.state.targetData?"%entity% gains +%data% attack from %source%":"%entity% gains +%data% attack";case 7:return this.state.targetData?"%entity% gains +%data% health":"%entity% gains +%data% health from %source%";case 8:return"%source% sets %entity%'s attack to %data%";case 9:return"%source% sets %entity%'s health to %data%";case 10:return this.props.data?"%entity% attacks %target% for %data%":"%entity% attacks %target%";case 11:return this.state.entityData&&"WEAPON"===this.state.entityData.type?"%entity% breaks":"%entity% dies";case 31:return"%player% discards %entity%";case 33:return"%player% discards %entity% from their deck";case 12:return this.state.targetData?"%player% receives %entity% from %source%":"%player% receives %entity%";case 32:return this.state.targetData?"%entity% from %source% is added to %player%'s deck":"%entity% is added to %player%'s deck";case 13:return"%entity% triggers";case 14:return this.state.targetData&&"WEAPON"==this.state.targetData.type?this.state.entityData?"%target% loses %data% durability from %entity%":"%target% loses %data% durability":this.props.data?"%entity% damages %target% for %data%":"%entity% hits %target%";case 15:return"%entity% heals %target% for %data%";case 16:return this.state.targetData?"%source% removes %entity%":"%entity% is removed";case 17:return"%player% mulligans %entity%";case 22:return this.state.targetData?"%entity% is silenced by %source%":"%entity% is silenced";case 24:return this.props.data?this.state.targetData?"%source% freezes %entity%":"%entity% gets frozen":"%entity% is no longer frozen";case 34:return this.state.targetData?"%player% steals %entity% using %source%":"%player% steals %entity%";case 35:return"%source% brings %entity% into play";case 36:return"%source% returns %entity% to %player%'s deck";case 37:return"%source% returns %entity% to %player%'s hand";case 38:return"%entity% equips %target%";case 39:return"%player% ends their turn";case 18:case 23:case 19:case 21:case 25:case 20:return t.status=this.getStatusKeyword(),this.props.data?this.state.targetData?"%entity% gains %status% from %source%":"%entity% gains %status%":"%entity% loses %status%";case 30:return t.stats=this.props.data+"/"+this.props.data2,"%entity% gets buffed to %stats%";case 3:;return this.state.targetData?this.state.entityData&&"HERO_POWER"===this.state.entityData.type?"%player% uses %entity% targeting %target%":"%player% plays %entity% targeting %target%":this.state.entityData&&"HERO_POWER"===this.state.entityData.type?"%player% uses %entity%":"%player% plays %entity%";case 29:return t.stats="+"+this.props.data+"/+"+this.props.data2,this.state.targetData?"%entity% gains %stats% from %target%":"%entity% gains %stats%"}}},{key:"getStatusKeyword",value:function(){switch(this.props.type){case 18:return"Divine Shield";case 23:return"Charge";case 19:return"Taunt";case 21:return"Windfury";case 25:return"Stealth";case 20:return"Immunity"}}},{key:"lookupEntity",value:function(t){if(t&&this.props.cardOracle&&this.props.cards){var e=this.props.cardOracle.get(t);return this.props.cards.get(e)}}},{key:"getPlayerName",value:function(){var t=(this.props.player||"").trim();if(this.props.stripBattletags){var e=/^(.*)#\d+$/.exec(t);e&&(t=e[1])}return t}}]),e}(a.Component);e.a=l},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"shouldComponentUpdate",value:function(t,e){return this.props.cardId!==t.cardId||this.props.cards!==t.cards}},{key:"render",value:function(){var t="a card",e=["entity"];if(this.props.cards&&this.props.cardId&&this.props.cards.has(this.props.cardId)){var r=this.props.cards.get(this.props.cardId);t="["+r.name+"]","HERO"==r.type||"HERO_POWER"==r.type?e.push("special"):r.rarity&&e.push(r.rarity.toString().toLowerCase())}return a.createElement("span",{className:e.join(" ")},t)}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(64)),u=r(83),c=r(27),l=(r.n(c),r(12)),f=(r.n(l),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),p=function(t){function e(t,r){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),a=!1;return!!+l.cookie.get("joust_ludicrous","0")||(a=!(c.webkit||c.blink||c.gecko)),o.state={warnAboutBrowser:a},o}return o(e,t),f(e,[{key:"render",value:function(){var t=this;if(this.props.loadingError){var r=function(){document.location.reload()};return a.createElement(u.a,null,a.createElement("p",null,"Error loading replay."),a.createElement("p",null,a.createElement("a",{href:"#",onClick:r,onTouchStart:r},"Try again")))}if(this.state.warnAboutBrowser){var n=function(e){e.preventDefault(),t.setState({warnAboutBrowser:!1}),l.cookie.set("joust_ludicrous","1",{expires:365,path:"/"})};return a.createElement(u.a,null,a.createElement("p",null,a.createElement("small",null,"Sorry, your browser is out of standard right now.",a.createElement("br",null),"Please consider using Chrome or Firefox instead.")),a.createElement("p",null,a.createElement("a",{href:"#",onClick:n,onTouchStart:n},"Continue anyway")))}var i=this.props.state;if(!i)return this.renderLoadingScreen(this.props.playerNames);var o=i.entityTree,c=i.optionTree,f=i.entities;if(!f)return this.renderLoadingScreen(this.props.playerNames);var p=i.game;if(!p)return this.renderLoadingScreen(this.props.playerNames);if(0===i.getPlayerCount())return this.renderLoadingScreen(this.props.playerNames);var h=f.filter(e.filterByCardType(2));if(void 0!==this.props.hasStarted&&!this.props.hasStarted)return this.renderLoadingScreen(h.map(function(t){return t.name}).toArray());var d=i.options.filter(function(t){return!!t&&2===t.type}).first(),y=h.count();switch(y){case 2:var g=h.first(),v=h.last();if(this.props.swapPlayers){var m=[v,g];g=m[0],v=m[1]}return a.createElement(s.a,{entity:p,player1:g,player2:v,entities:o,options:c,choices:i.choices,endTurnOption:d,optionCallback:this.props.interaction&&this.props.interaction.sendOption.bind(this.props.interaction),cards:this.props.cards,cardOracle:this.props.cardOracle,mulliganOracle:this.props.mulliganOracle,descriptors:this.props.state.descriptors,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,hideCards:this.props.hideCards,stripBattletags:this.props.stripBattletags});default:return a.createElement("div",null,"Unsupported player count (",y,").")}}},{key:"renderLoadingScreen",value:function(t){return Array.isArray(t)&&this.props.stripBattletags&&(t=t.map(function(t){var e=/^(.*)#\d+$/.exec(t.trim());return e?e[1]:t})),a.createElement(u.a,{players:t})}}],[{key:"filterByCardType",value:function(t){return function(e){return!!e&&e.getCardType()===t}}}]),e}(a.Component);e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(2)),u=(r.n(s),r(65)),c=r(82),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"render",value:function(){var t=this.props.entities,e=this.props.options,r=this.props.player1,n=this.props.player2,i=r.getTag(23)?r:n,o=s.Map(),l=s.Map();return a.createElement("div",{className:"game"},a.createElement(u.a,{player:r,isTop:!0,isCurrent:i===r,entities:t.get(r.playerId)||o,options:e.get(r.playerId)||l,choices:this.props.choices.get(r.id),optionCallback:this.props.optionCallback,cardOracle:this.props.cardOracle,mulliganOracle:this.props.mulliganOracle,cards:this.props.cards,descriptors:this.props.descriptors,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,hideCards:this.props.hideCards,stripBattletags:this.props.stripBattletags}),this.props.optionCallback&&a.createElement(c.a,{option:this.props.endTurnOption,optionCallback:this.props.optionCallback,onlyOption:0===e.count(),currentPlayer:i}),a.createElement(u.a,{player:n,isTop:!1,isCurrent:i===n,entities:t.get(n.playerId)||o,options:e.get(n.playerId)||l,choices:this.props.choices.get(n.id),optionCallback:this.props.optionCallback,cardOracle:this.props.cardOracle,mulliganOracle:this.props.mulliganOracle,cards:this.props.cards,descriptors:this.props.descriptors,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,stripBattletags:this.props.stripBattletags}))}},{key:"shouldComponentUpdate",value:function(t,e){return this.props.entity!==t.entity||this.props.player1!==t.player1||this.props.player2!==t.player2||this.props.entities!==t.entities||this.props.options!==t.options||this.props.choices!==t.choices||this.props.endTurnOption!==t.endTurnOption||this.props.optionCallback!==t.optionCallback||this.props.cardOracle!==t.cardOracle||this.props.cards!==t.cards||this.props.descriptors!==t.descriptors||this.props.hideCards!==t.hideCards}}]),e}(a.Component);e.a=f},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(66),s=r(0),u=(r.n(s),r(10)),c=r(69),l=r(70),f=r(71),p=r(2),h=(r.n(p),r(75)),d=r(77),y=r(79),g=r(80),v=r(6),m=r(32),_=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),b=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),_(e,[{key:"render",value:function(){var t=this,e=function(t){return function(e){return!!e&&e.getCardType()===t}},r=!1,n=p.Map(),i=p.Map(),o=this.props.entities.get(6)||n,_=null;this.props.descriptors.count()>0&&!this.props.choices&&this.props.descriptors.forEach(function(e,n){var i=(t.props.descriptors.get(n+1),e.type);if(7===i||5===i||9===i){var a=null;if(t.props.entities.forEach(function(t){t.forEach(function(t){e.entityId===t.id&&(7===i||t.getTag(219)||t.getTag(401)?a=t:5===i&&t.getTag(410)&&968===e.triggerKeyword?a=t:9===i&&(a=t))})}),a){if(9===i){var c=t.props.entities.get(6);if(c){var l=c.find(function(t){return"OG_279"===t.cardId});if(l)return l=l.setTag(271,1),_=s.createElement("div",{className:"played"},s.createElement(m.a,{entity:l,option:null,optionCallback:null,assetDirectory:t.props.assetDirectory,cards:t.props.cards,controller:t.props.player,cardArtDirectory:t.props.cardArtDirectory})),!1}}if(10!==a.getTag(202)||a.getTag(43)||(r=!0),!_){var f=a.getTag(202),p=!1;if(!a.cardId&&t.props.cardOracle&&t.props.cardOracle.has(+a.id)||a.getTag(438)){var h=t.props.cardOracle.get(a.id);a=new u.a(a.id,a.getTags(),h),p=!0,t.props.cards&&t.props.cards.has(h)&&(f=t.props.cards.get(h).type)}if(-1!=[7,5,4,10,"WEAPON","SPELL","MINION","HERO_POWER"].indexOf(f)||a.getTag(219)){var d=null,y=a.getTag(385);y&&t.props.entities.forEach(function(t){t.forEach(function(t){t.id===y&&(d=t)})}),_=s.createElement("div",{className:"played"},s.createElement(v.a,{entity:a,creator:d,option:null,optionCallback:null,assetDirectory:t.props.assetDirectory,cards:t.props.cards,isHidden:p,controller:t.props.player,cardArtDirectory:t.props.cardArtDirectory,setAside:o}))}}}if(_&&r)return!1}});var b=this.props.entities.get(1)||p.Map(),w=this.props.options.get(1)||p.Map(),E=[];b.forEach(function(t){var e=t.getTag(40);e&&-1===E.indexOf(e)&&E.push(e)});var k=b.filter(e(3)).first();k||(k=(this.props.entities.get(4)||p.Map()).filter(e(3)).first());var T=s.createElement(f.a,{entity:k,option:k?w.get(k.id):null,secrets:this.props.entities.get(7)||p.Map(),optionCallback:this.props.optionCallback,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,controller:this.props.player,descriptors:this.props.descriptors,cardOracle:this.props.cardOracle}),O=b.filter(e(10)).first(),S=s.createElement(a.a,{entity:O,option:O?w.get(O.id):null,optionCallback:this.props.optionCallback,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,controller:this.props.player,activated:r}),j=s.createElement(d.a,{entity:b.filter(e(7)).first(),cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,controller:this.props.player}),I=s.createElement(h.a,{entities:b.filter(e(4))||n,options:w||i,optionCallback:this.props.optionCallback,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,controller:this.props.player,descriptors:this.props.descriptors,buffedEntities:E}),C=s.createElement(c.a,{entities:this.props.entities.get(2)||n,options:this.props.options.get(2)||i,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,controller:this.props.player,fatigue:this.props.player.getTag(22)+1}),A=s.createElement(l.a,{entities:(!this.props.choices||1!==this.props.choices.type)&&this.props.entities.get(3)||n,options:this.props.options.get(3)||i,optionCallback:this.props.optionCallback,cards:this.props.cards,cardOracle:this.props.cardOracle,isTop:this.props.isTop,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,controller:this.props.player,hideCards:this.props.hideCards,setAside:o}),D=null;if(this.props.choices){var x=this.props.choices.choices.map(function(e){var r=null,n=e.entityId;return t.props.entities.forEach(function(t){if(t.has(n))return r=t.get(n),!1}),null===r&&console.error("Entity #"+n+" from choice could not be found for player #"+t.props.player.id+" (playerId="+t.props.player.playerId+")"),r}).filter(function(t){return!!t});D=s.createElement(y.a,{entities:x,cards:this.props.cards,cardOracle:this.props.cardOracle,mulliganOracle:this.props.mulliganOracle,isTop:this.props.isTop,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,controller:this.props.player,isMulligan:1===this.props.choices.type,choices:this.props.choices&&this.props.choices.choices,hideCards:this.props.hideCards})}var P=this.cleanPlayerName(),R=P?s.createElement("div",{className:"name",title:P},P):null,M=(s.createElement(g.a,{rank:this.props.player.rank,legendRank:this.props.player.legendRank,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory}),this.props.player.getTag(26)+this.props.player.getTag(295)),N=M-this.props.player.getTag(25),L=["crystal"];N>0?L.push("full"):this.props.player.getTag(393)>0?L.push("locked"):L.push("empty");var B=s.createElement("div",{className:"tray"},s.createElement("span",null,N,"/",M),s.createElement("img",{src:this.props.assetDirectory("images/mana_crystal.png"),className:L.join(" ")})),U=s.createElement("section",{className:"tall"},s.createElement("div",{className:"equipment"},s.createElement("section",{className:"entities"},T,s.createElement("section",null,j,S)),s.createElement("section",{className:"details"},R,B)),A),z=s.createElement("section",{className:"short"},C,I),F=["player"];this.props.isTop&&F.push("top"),this.props.choices&&F.push("inactive"),this.props.isCurrent&&4===this.props.player.getTag(305)&&F.push("current");var q=null;switch(this.props.player.getTag(17)){case 4:q=s.createElement("div",{className:"gameresult"},P," wins!"),F.push("inactive-colored");break;case 5:var W=null;W=this.props.player.conceded?P+" concedes":P+" loses",q=s.createElement("div",{className:"gameresult"},W),F.push("inactive");break;case 6:q=s.createElement("div",{className:"gameresult"},P," ties"),F.push("inactive")}return this.props.isTop?s.createElement("div",{className:F.join(" ")},q,D,_,U,z):s.createElement("div",{className:F.join(" ")},q,D,_,z,U)}},{key:"shouldComponentUpdate",value:function(t,e){return this.props.player!==t.player||this.props.entities!==t.entities||this.props.options!==t.options||this.props.choices!==t.choices||this.props.optionCallback!==t.optionCallback||this.props.cardOracle!==t.cardOracle||this.props.cards!==t.cards||this.props.descriptors!==t.descriptors||this.props.isCurrent!==t.isCurrent||this.props.hideCards!==t.hideCards}},{key:"cleanPlayerName",value:function(){if(!this.props.player.name)return null;var t=this.props.player.name.trim();if(this.props.stripBattletags){var e=/^(.*)#\d+$/.exec(t);t=e?e[1]:t}return t}}]),e}(s.Component);e.a=b},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(13)),u=r(28),c=r(6),l=r(68),f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),p=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},h=function(t){function e(t,r){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"heroPower",t,r))}return o(e,t),f(e,[{key:"playWithClick",value:function(){return!0}},{key:"getClassNames",value:function(){var t=p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getClassNames",this).call(this);return this.props.activated&&t.push("highlight"),t}},{key:"jsx",value:function(){var t=null;if(this.props.cards&&this.props.cards.has(this.props.entity.cardId)){t=this.props.cards.get(this.props.entity.cardId).cost}var e=this.props.entity,r=[a.createElement(l.a,{key:"art",entity:e,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory})];return this.state.isHovering&&r.push(a.createElement("div",{key:"hover",className:"mouse-over"},a.createElement(c.a,{entity:e,assetDirectory:this.props.assetDirectory,cards:this.props.cards,isHidden:!1,controller:this.props.controller,cardArtDirectory:this.props.cardArtDirectory,option:null}))),e.isExhausted()||r.push(a.createElement(u.a,{key:"cost",cost:e.getCost(),default:t})),r}}]),e}(s.a);e.a=h},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(7)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"render",value:function(){var t=[],e=this.props.entity,r=null,n=null,i=null,o=null,u=this.cardClassToString();if(this.props.hidden)t.push({image:"cardback.png",classes:["inhand-base","cardback"]});else{switch(this.props.cardType){case 4:r="inhand-minion",e.isPremium()?(n="inhand_minion_premium.png",i="premium-minion-overlay.png",o=u+"-color"):n="inhand_minion_"+u+".png";break;case 7:r="inhand-weapon",e.isPremium()?(n="inhand_weapon_premium.png",i="premium-weapon-overlay.png",o=u+"-color"):n="inhand_weapon_neutral.png";break;case 5:case 10:default:r="inhand-spell",e.isPremium()?(n="inhand_spell_premium.png",i="premium-spell-overlay.png",o=u+"-color"):n="inhand_spell_"+u+".png"}t.push({image:e.cardId,isArt:!0,classes:[r]})}return t.push({image:n,classes:["inhand-base"]}),e.isPremium()&&t.push({image:i,classes:["inhand-base",o]}),!this.props.hidden&&e.cardId&&e.isLegendary()&&(4===this.props.cardType&&t.push({image:"inhand_minion_legendary"+(e.isPremium()?"_premium":"")+".png",classes:["inhand-legendary"]}),5===this.props.cardType&&t.push({image:"inhand_spell_legendary"+(e.isPremium()?"_premium":"")+".png",classes:["inhand-legendary"]})),this.props.mulligan&&t.push({image:"inhand_mulligan.png",classes:["inhand-mulligan"]}),a.createElement(s.a,{layers:t,scale:.71,square:!1,margin:!1,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory})}},{key:"cardClassToString",value:function(){switch(this.props.cardClass){case 2:return"druid";case 11:case 3:return"hunter";case 4:return"mage";case 5:return"paladin";case 6:return"priest";case 7:return"rogue";case 8:return"shaman";case 9:return"warlock";case 10:return"warrior";default:return"neutral"}}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(7)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"render",value:function(){var t=[],e=this.props.entity;t.push({image:e.cardId,isArt:!0,classes:["hero-power-portrait"]});var r="hero_power.png";return e.isExhausted()&&(r="hero_power_exhausted.png"),t.push({image:r,classes:["hero-power-frame"]}),a.createElement(s.a,{layers:t,scale:1,square:!0,margin:!0,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory})}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(15)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"className",value:function(){return"deck"}},{key:"render",value:function(){var t=null,e=[this.className()];switch(this.props.entities.size){case 0:t=this.props.fatigue+" damage dealt by next card draw",e.push("fatigue");break;case 1:t="1 card remaining";break;default:t=this.props.entities.size+" cards remaining"}return a.createElement("div",{className:e.join(" "),title:t},a.createElement("figure",null,a.createElement("img",{src:this.props.assetDirectory("images/cardback.png")}),a.createElement("figcaption",null,this.props.entities.size||-this.props.fatigue)))}},{key:"shouldComponentUpdate",value:function(t,r){return this.props.fatigue!==t.fatigue||c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"shouldComponentUpdate",this).call(this,t,r)}}]),e}(s.a);e.a=l},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(15)),u=r(10),c=r(6),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},p=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"shouldComponentUpdate",value:function(t,r){return this.props.setAside!==t.setAside||f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"shouldComponentUpdate",this).call(this,t,r)}},{key:"className",value:function(){return"hand"}},{key:"renderEntity",value:function(t,e,r){var n={},i=!1,o=void 0,s=void 0;if(this.props.hideCards)t=new u.a(t.id,t.getTags());else if(!t.cardId&&this.props.cardOracle&&this.props.cardOracle.has(+t.id)){var l=this.props.cardOracle.get(t.id);if(t=new u.a(t.id,t.getTags(),l),"OG_280"===l){var f=this.props.cardOracle.findKey(function(t){return"OG_279"===t}),p=f&&this.props.setAside.get(f);p&&(o=p.getHealth(),s=p.getAtk())}i=!0}return a.createElement(c.a,{entity:t,option:e,style:n,optionCallback:this.props.optionCallback,assetDirectory:this.props.assetDirectory,cards:this.props.cards,isHidden:i,controller:this.props.controller,cardArtDirectory:this.props.cardArtDirectory,customHealth:o,customAtk:s,customCost:void 0,setAside:this.props.setAside})}}]),e}(s.a);e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(13)),u=r(14),c=r(30),l=r(31),f=r(19),p=r(72),h=r(73),d=r(74),y=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),g=function(t){function e(t,r){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"hero",t,r))}return o(e,t),y(e,[{key:"jsx",value:function(){var t=this,e=this.props.entity,r=this.props.secrets,n=r.some(function(t){return!!t.getTag(462)}),i=r.count(),o=n?"!":i>1?""+i:"?",s=this.props.secrets.reduce(function(e,r){var n=r.cardId;if(!r.revealed){if(!t.props.cardOracle||!t.props.cardOracle.has(r.id))return e;n=t.props.cardOracle.get(r.id)}return e&&(e+=", "),t.props.cards&&t.props.cards.has(n)&&(n=t.props.cards.get(n).name||n),e+=n},""),y=0,g=0;return this.props.descriptors&&this.props.descriptors.forEach(function(t){t.metaData.forEach(function(t){if(t.entities.has(e.id))switch(t.type){case 1:y+=t.data;break;case 2:g+=t.data}})}),[a.createElement(d.a,{key:"art",entity:e,secrets:this.props.secrets,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,damage:y,healing:g}),a.createElement("div",{key:"stats",className:"stats"},e.getAtk()?a.createElement(u.a,{attack:e.getAtk()}):null,a.createElement(f.a,{health:e.getHealth(),damage:e.getDamage()}),e.getArmor()?a.createElement(p.a,{armor:e.getArmor()}):null,n||i>0?a.createElement(h.a,{text:o,title:s}):null,0!=y?a.createElement(c.a,{damage:y}):null,0!=g?a.createElement(l.a,{healing:g}):null)]}}]),e}(s.a);e.a=g},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"render",value:function(){return a.createElement("div",{className:"armor"},this.props.armor)}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"render",value:function(){return a.createElement("div",{className:"secret-text",title:this.props.title},this.props.text)}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(7)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"shouldComponentUpdate",value:function(t,e,r){return t.entity!==this.props.entity||t.damage!==this.props.damage||t.healing!==this.props.healing||t.controller!==this.props.controller||t.assetDirectory!==this.props.assetDirectory||t.cardArtDirectory!==this.props.cardArtDirectory||t.secrets!==this.props.secrets}},{key:"render",value:function(){var t=[],e=this.props.entity;if(t.push({image:e.cardId,isArt:!0,classes:["hero-portrait"]}),t.push({image:"hero_frame.png",classes:["hero-frame"]}),e.isFrozen()&&t.push({image:"inplay_hero_frozen.png",classes:["hero-frozen"]}),e.isImmune()&&t.push({image:"inplay_hero_immune.png",classes:["hero-immune"]}),e.getAtk()>0&&t.push({image:"hero_attack.png",classes:["hero-attack"]}),e.getArmor()>0&&t.push({image:"hero_armor.png",classes:["hero-armor"]}),this.props.secrets.some(function(t){return!!t.getTag(462)}))t.push({image:"quest.png",classes:["secret"]});else if(this.props.secrets.count()>0){var r="secret_sheathed.png",n=this.props.secrets.first();if(!n.getTag(43))switch(n.getClass()){case 3:r="secret_hunter.png";break;case 4:r="secret_mage.png";break;case 5:r="secret_paladin.png"}t.push({image:r,classes:["secret"]})}return(e.getTag(45)-e.getTag(44)<=0||1!=e.getTag(49))&&t.push({image:"skull.png",classes:["skull"]}),this.props.damage&&this.props.damage>0?t.push({image:"damage.png",classes:["dmg"]}):this.props.healing&&this.props.healing>0&&t.push({image:"healing.png",classes:["heal"]}),a.createElement(s.a,{layers:t,scale:1,square:!0,margin:!1,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory})}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(3)),u=(r.n(s),r(15)),c=r(32),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},p=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"shouldComponentUpdate",value:function(t,r){return!s.isEqual(t.buffedEntities,this.props.buffedEntities)||f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"shouldComponentUpdate",this).call(this,t,r)}},{key:"className",value:function(){return"field"}},{key:"renderEntity",value:function(t,e){return a.createElement(c.a,{entity:t,option:e,optionCallback:this.props.optionCallback,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory,cards:this.props.cards,controller:this.props.controller,descriptors:this.props.descriptors,buffed:t&&this.props.buffedEntities&&-1!==this.props.buffedEntities.indexOf(t.id)})}}]),e}(u.a);e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(7)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"shouldComponentUpdate",value:function(t){return t.entity!==this.props.entity||t.damage!==this.props.damage||t.healing!==this.props.healing||t.controller!==this.props.controller||t.assetDirectory!==this.props.assetDirectory||t.cardArtDirectory!==this.props.cardArtDirectory||t.buffed!==this.props.buffed}},{key:"render",value:function(){var t=[],e=this.props.entity,r=this.props.controller,n="";return e.isPremium()&&(n="_premium"),e.isTaunter()&&t.push({image:"inplay_minion_taunt"+n+".png",classes:["inplay-taunt"]}),t.push({image:e.cardId,isArt:!0,classes:["inplay-portrait"]}),e.isStealthed()&&t.push({image:"inplay_minion_stealth.png",classes:["inplay-stealth"]}),e.cantBeTargeted()&&t.push({image:"inplay_minion_untargetable.png",classes:["inplay-untargetable"]}),e.getTag(402)?t.push({image:"inplay_minion_hide_stats"+n+".png",classes:["inplay-base"]}):t.push({image:"inplay_minion"+n+".png",classes:["inplay-base"]}),e.isLegendary()&&t.push({image:"inplay_minion_legendary"+n+".png",classes:["inplay-legendary"]}),e.isFrozen()&&t.push({image:"inplay_minion_frozen.png",classes:["inplay-frozen"]}),e.isDivineShielded()&&t.push({image:"inplay_minion_divine_shield.png",classes:["inplay-divine-shield"]}),e.isImmune()&&t.push({image:"inplay_minion_immune.png",classes:["inplay-immune"]}),e.isSilenced()&&t.push({image:"inplay_minion_silenced.png",classes:["inplay-silenced"]}),e.isEnraged()&&t.push({image:"inplay_minion_enraged.png",classes:["inplay-enraged"]}),this.props.buffed&&t.push({image:"inplay_minion_buffed.png",classes:["inplay-buffed"]}),e.getTag(403)>0?t.push({image:"icon_inspire.png",classes:["icon-inspire"]}):e.getTag(217)>0?t.push({image:"icon_deathrattle.png",classes:["icon-deathrattle"]}):e.getTag(363)>0?t.push({image:"icon_poisonous.png",classes:["icon-poisonous"]}):e.getTag(32)>0&&t.push({image:"icon_trigger.png",classes:["icon-trigger"]}),e.isAsleep(r)&&t.push({image:"effect_sleep.png",classes:["effect-sleep"]}),this.props.damage&&this.props.damage>0?t.push({image:"damage.png",classes:["dmg"]}):this.props.healing&&this.props.healing>0?t.push({image:"healing.png",classes:["heal"]}):e.getTag(45)-e.getTag(44)<=0&&t.push({image:"skull.png",classes:["skull"]}),a.createElement(s.a,{layers:t,scale:.86,square:!1,margin:!1,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory})}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(14)),u=r(29),c=r(78),l=r(13),f=r(6),p=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=function(t){function e(t,r){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"weapon",t,r))}return o(e,t),p(e,[{key:"jsx",value:function(){var t=this.props.entity,e=null,r=null;if(this.props.cards&&this.props.cards.has(t.cardId)){var n=this.props.cards.get(t.cardId);e=n.attack,r=n.durability}var i=[a.createElement(c.a,{key:"art",entity:t,cards:this.props.cards,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory}),a.createElement("div",{className:"stats",key:"stats"},a.createElement(s.a,{attack:t.getAtk(),default:e}),a.createElement(u.a,{durability:t.getDurability(),damage:t.getDamage(),default:r}))];return this.state.isHovering&&i.push(a.createElement("div",{key:"hover",className:"mouse-over"},a.createElement(f.a,{entity:t,assetDirectory:this.props.assetDirectory,cards:this.props.cards,isHidden:!1,controller:this.props.controller,cardArtDirectory:this.props.cardArtDirectory,option:null}))),i}}]),e}(l.a);e.a=h},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(7)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"render",value:function(){var t=[],e=this.props.entity;t.push({image:e.cardId,isArt:!0,classes:["hero-weapon-portrait"]});var r="inplay_weapon.png";return e.isExhausted()&&(r="inplay_weapon_dome.png"),e.getTag(403)>0?t.push({image:"icon_inspire.png",classes:["icon-inspire"]}):e.getTag(217)>0?t.push({image:"icon_deathrattle.png",classes:["icon-deathrattle"]}):e.getTag(363)>0?t.push({image:"icon_poisonous.png",classes:["icon-poisonous"]}):e.getTag(32)>0&&t.push({image:"icon_trigger.png",classes:["icon-trigger"]}),t.push({image:r,classes:["hero-weapon-frame"]}),a.createElement(s.a,{layers:t,scale:1,square:!0,margin:!0,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory})}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(15)),u=r(10),c=r(6),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"className",value:function(){return"choices"}},{key:"sort",value:function(t){return this.props.choices.get(t.id).index}},{key:"lookup",value:function(t){return this.props.cardOracle?this.props.cardOracle.get(t)||null:null}},{key:"renderEntity",value:function(t,e,r){var n=!1,i=t.cardId||this.lookup(t.id);if(this.props.isMulligan&&"GAME_005"===i)return null;this.props.hideCards?t=new u.a(t.id,t.getTags()):!t.cardId&&i&&(t=new u.a(t.id,t.getTags(),i),n=!0);var o=!1;return this.props.isMulligan&&this.props.mulliganOracle&&!0===this.props.mulliganOracle.get(t.id)&&(o=!0),a.createElement(c.a,{entity:t,option:e,optionCallback:this.props.optionCallback,assetDirectory:this.props.assetDirectory,cards:this.props.cards,isHidden:n,controller:this.props.controller,cardArtDirectory:this.props.cardArtDirectory,mulligan:o})}}]),e}(s.a);e.a=f},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(81)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"render",value:function(){return this.props.rank>0?a.createElement("div",{className:"rank"},a.createElement(s.a,{rank:this.props.rank,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory}),a.createElement("div",{className:"rank-text"},this.props.rank)):this.props.legendRank>0?a.createElement("div",{className:"rank"},a.createElement(s.a,{legendRank:this.props.legendRank,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory}),a.createElement("div",{className:"legend-text"},this.props.legendRank)):null}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(7)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"render",value:function(){var t=[];return this.props.rank>0&&this.props.rank<=25?(t.push({image:"Medal_Ranked_"+this.props.rank,isArt:!0,classes:["rank-portrait"]}),t.push({image:"rank_frame_"+Math.floor((this.props.rank-1)/5)+".png",classes:["rank-frame"]})):this.props.legendRank>0&&t.push({image:"legend_rank.png",classes:["rank-frame"]}),a.createElement(s.a,{layers:t,scale:1,square:!1,margin:!1,assetDirectory:this.props.assetDirectory,cardArtDirectory:this.props.cardArtDirectory})}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"endTurn",value:function(){this.props.option&&this.props.optionCallback&&this.props.optionCallback(this.props.option)}},{key:"render",value:function(){var t=["endTurnButton"];return this.props.option&&t.push("playable"),this.props.onlyOption&&t.push("only-option"),a.createElement("div",{className:t.join(" ")},a.createElement("button",{disabled:!this.props.option||!this.props.optionCallback,onClick:this.endTurn.bind(this)},"End Turn"))}}]),e}(a.Component);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(84)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.messages=["Sorting decks...","Summoning heroes...","Nerfing cards...","Buffing cards...","Painting cards...","Tossing coin...","Calculating lethal...","Dusting collection...","Deploying anti-cheats...","Writing new spinner text...","Warming frozen boots...","Finding room for another...","Watching your back...","Overloading...","Unlocking Overload...","Armoring up...","Enraging Worgen...","Feeding Hungry Crab...","Rolling Need...","Disguising Toast...","Spinning up...","Summoning Boom Bots...","Piloting Shredder...","Poisoning seeds...","Hatching Dragon Eggs...","Getting everyone in here...","Funneling Cakes...","Managing Coliseum...","Excavating Evil...","Finding Golden Monkey...","Stealing Artifacts...","Spreading Madness...","Spreading C'Thun's word...","Guarding the Menagerie...","Clawing Spirits...","Purifying...","Loading Cannon...","Patching Patches...","Rerolling Quests...","Hunting for Dinosaurs...",'"Well met!"','"Taz\'dingo!"',"Trading for value...","Prep-Coin-Conceding...","Befriending recent opponent...","Going face...","Stream-sniping...","Curving perfectly...","Milling Reno...","Creeping power...","Massing Void Rays...","Assembling Exodia pieces..."],t}return o(e,t),u(e,[{key:"render",value:function(){var t=String.fromCharCode(160);if(this.props.players&&this.props.players.length)switch(this.props.players.length){case 1:t=this.props.players[0];break;case 2:t=this.props.players[0]+" vs. "+this.props.players[1]}return a.createElement("div",{className:"joust-loading-screen"},this.props.children?this.props.children:a.createElement("p",null,a.createElement(s.a,{interval:2,messages:this.messages})),a.createElement("p",{className:"participants"},t))}}]),e}(a.Component);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(t){n(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.state={message:0,sequence:r.generateSequence()},r}return o(e,t),s(e,[{key:"componentDidMount",value:function(){this.scheduleUpdates()}},{key:"componentWillReceiveProps",value:function(t){t.messages.length!=this.props.messages.length&&(clearInterval(this.interval),this.setState({message:0,sequence:this.generateSequence()}),this.scheduleUpdates())}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"scheduleUpdates",value:function(){this.interval=setInterval(this.cycleMessage.bind(this),1e3*this.props.interval)}},{key:"render",value:function(){var t=this.props.messages[this.state.sequence[this.state.message]];return t=t.replace("...",String.fromCharCode(8230)),a.createElement("span",null,t)}},{key:"generateSequence",value:function(){for(var t=[],e=this.props.messages.length,r=0;r<e;r++)t[r]=r;if(!1!==this.props.random)for(var n=0;n<e-1;n++){var i=Math.floor(n+Math.floor(Math.random()*(e-n))),o=[t[i],t[n]];t[n]=o[0],t[i]=o[1]}return t}},{key:"cycleMessage",value:function(){this.setState({message:(this.state.message+1)%this.props.messages.length})}}]),e}(a.Component);e.a=u},function(t,e){!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=void 0!==t&&t.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var t,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=r.length,o={};n<i;n++)if((t=r[n])&&t[1]in e){for(n=0;n<t.length;n++)o[r[0][n]]=t[n];return o}return!1}(),o={change:i.fullscreenchange,error:i.fullscreenerror},a={request:function(t){var r=i.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[r]():t[r](n&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){e[i.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,r){var n=o[t];n&&e.addEventListener(n,r,!1)},off:function(t,r){var n=o[t];n&&e.removeEventListener(n,r,!1)},raw:i};if(!i)return void(r?t.exports=!1:window.screenfull=!1);Object.defineProperties(a,{isFullscreen:{get:function(){return Boolean(e[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[i.fullscreenEnabled])}}}),r?t.exports=a:window.screenfull=a}()},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(33),s=r(8),u=(r.n(s),r(2)),c=(r.n(u),r(38)),l=r(39),f=r(10),p=r(102),h=r(103),d=r(104),y=r(105),g=(r.n(y),r(106)),v=r(107),m=r(40),_=r(41),b=r(42),w=r(43),E=r(108),k=r(109),T=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),O=function(t){function e(t){n(this,e),t=t||{},t.objectMode=!0;var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.gameId=null,r.currentGame=null,r.nodeStack=[],r.timeOffset=null,r.cardIds=u.Map(),r.mulligans=u.Map(),r.playerMap=u.Map(),r.choiceMap=u.Map(),r.build=null,r.debug=!1,r.sax=new y.SAXStream(!0,{}),r.sax.on("opentag",r.onOpenTag.bind(r)),r.sax.on("closetag",r.onCloseTag.bind(r)),r.sax.on("error",function(t){return r.emit("error",t)}),r.once("end",function(){r.sax.end()}),r}return o(e,t),T(e,[{key:"_transform",value:function(t,e,r){this.sax.write(t),r()}},{key:"parseTimestamp",value:function(t){return t.match(/^\d{2}:\d{2}:\d{2}/)&&(t="1970-01-01T"+t),new Date(t).getTime()}},{key:"onOpenTag",value:function(t){if(null!==this.gameId&&this.gameId!==this.currentGame)return void this.nodeStack.push(t);switch(t.name){case"Game":var e=t.attributes.id;e&&(this.gameId=+e,this.currentGame=+e);break;case"GameEntity":case"Player":case"FullEntity":case"ShowEntity":case"ChangeEntity":t.attributes.tags=u.Map();break;case"Choices":case"ChosenEntities":case"SendChoices":t.attributes.choices=u.Map();break;case"HSReplay":this.version=t.attributes.version,this.version?this.version.match(/^1\.[3-7](\.[0-9]+)?$/)||console.warn("HSReplay version",this.version,"is unsupported"):console.warn("Replay does not contain HSReplay version");var r=t.attributes.build;void 0!==r&&(this.build=+r),this.build||console.warn("Replay does not contain Hearthstone build number"),this.emit("build",this.build);break;case"Action":case"Block":var n=new m.a(+t.attributes.entity,+t.attributes.target,+t.attributes.type,+t.attributes.triggerKeyword||null);t.descriptor=n,this.push(new _.a(n));break;case"MetaData":t.attributes.entities=u.Set()}this.nodeStack.push(t)}},{key:"onCloseTag",value:function(t){var e=this,r=this.nodeStack.pop();if(r.name!==t)return void this.emit("error",new Error("HSReplay: Stack/Node missmatch (Stack: "+r.name+", Node: "+t+")"));if(!this.gameId||this.gameId===this.currentGame){var n=null;switch(t){case"Game":null===this.currentGame&&(this.gameId=1);break;case"GameEntity":case"FullEntity":var i=this.resolveEntityId(r.attributes.id),o=r.attributes.cardID||null;this.revealEntity(i,o);var s=new f.a(i,r.attributes.tags,o||null);n=new l.a(s);break;case"Player":var u=+r.attributes.id,y=+r.attributes.rank,m=+r.attributes.legendRank,_=""+r.attributes.name;_||this.playerMap.forEach(function(t,e){if(t.id===u)return console.warn("Transferring player name",'"'+e+'"',"to entity #"+t.id),_=e,y=t.rank,m=t.legendRank,!1}),this.playerMap=this.playerMap.set(_,{id:u,rank:y,legendRank:m});var T=new p.a(u,r.attributes.tags,+r.attributes.playerID,_,y,m);n=new l.a(T);break;case"ShowEntity":case"ChangeEntity":var O=this.resolveEntityId(r.attributes.entity),S=r.attributes.cardID||null,j=r.attributes.tags;this.revealEntity(O,S,j),n=new h.a(O,S,j,"ChangeEntity"==t);break;case"HideEntity":n=new k.a(this.resolveEntityId(r.attributes.entity),+r.attributes.zone);break;case"Tag":var I=this.nodeStack.pop();I.attributes.tags=I.attributes.tags.set(""+r.attributes.tag,+r.attributes.value),this.nodeStack.push(I);break;case"TagChange":n=new c.a(this.resolveEntityId(r.attributes.entity),+r.attributes.tag,+r.attributes.value);break;case"Choice":var C=this.nodeStack.pop(),A=r.attributes.entity&&this.resolveEntityId(r.attributes.entity),D=new d.a(+r.attributes.index,A);C.attributes.choices=C.attributes.choices.set(A,D),this.nodeStack.push(C);break;case"Choices":var x=this.resolveEntityId(r.attributes.entity),P=+r.attributes.type,R=new v.a(r.attributes.choices,P);n=new a.a(x,R),this.choiceMap=this.choiceMap.set(+r.attributes.id,x),1===P&&r.attributes.choices.forEach(function(t){e.mulligans=e.mulligans.set(t.entityId,!0)});break;case"ChosenEntities":case"SendChoices":var M=null;if(r.attributes.type&&r.attributes.type,r.attributes.entity)M=r.attributes.entity&&this.resolveEntityId(r.attributes.entity);else if(r.attributes.id){var N=+r.attributes.id;this.choiceMap.has(N)&&(M=this.choiceMap.get(+r.attributes.id))}null!==M&&(n=new g.a(M)),r.attributes.choices.forEach(function(t){!0===e.mulligans.get(t.entityId,null)&&(e.mulligans=e.mulligans.set(t.entityId,!1)),e.emit("mulligans",e.mulligans)});break;case"Action":case"Block":n=new b.a;break;case"Info":var L=this.nodeStack.pop();L.attributes.entities=L.attributes.entities.add(this.resolveEntityId(r.attributes.entity)),this.nodeStack.push(L);break;case"MetaData":var B=new E.a(+r.attributes.meta,+r.attributes.data||+r.attributes.entity||0,r.attributes.entities);n=new w.a(B);break;case"Option":case"Options":case"Target":case"SendOption":break;case"HSReplay":case"Deck":case"Card":case"SubOption":break;default:console.error(new Error('HSReplay: Unknown tag "'+r.name+'"'))}null!==n&&this.push(n)}}},{key:"resolveEntityId",value:function(t){if(!isNaN(+t))return+t;if(void 0===t)return console.warn("Cannot resolve missing entity id"),0;var e=""+t;return"UNKNOWN HUMAN PLAYER"===e?(console.warn("Cannot resolve entity for "+e),0):(console.warn("HSReplay: Using player names as entity reference is deprecated"),this.playerMap.has(e)?t=this.playerMap.get(e).id:console.warn('Could not resolve entity id "'+t+'"'),+t)}},{key:"revealEntity",value:function(t,e,r){if(e&&t&&(t=+t,e=""+e,!this.cardIds.has(t))){r&&(r.has("438")||r.has("549"))&&(e="OG_123"),r&&r.has("550")&&(e="UNG_929");var n=this.cardIds.set(t,e);n!==this.cardIds&&(this.cardIds=n,this.emit("cards",this.cardIds))}}},{key:"getCardMap",value:function(){return this.cardIds}},{key:"getMulligans",value:function(){return this.mulligans}}]),e}(s.Transform);e.a=O},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function i(t){var e=n(t),r=e[0],i=e[1];return 3*(r+i)/4-i}function o(t,e,r){return 3*(e+r)/4-r}function a(t){for(var e,r=n(t),i=r[0],a=r[1],s=new p(o(t,i,a)),u=0,c=a>0?i-4:i,l=0;l<c;l+=4)e=f[t.charCodeAt(l)]<<18|f[t.charCodeAt(l+1)]<<12|f[t.charCodeAt(l+2)]<<6|f[t.charCodeAt(l+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;return 2===a&&(e=f[t.charCodeAt(l)]<<2|f[t.charCodeAt(l+1)]>>4,s[u++]=255&e),1===a&&(e=f[t.charCodeAt(l)]<<10|f[t.charCodeAt(l+1)]<<4|f[t.charCodeAt(l+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e),s}function s(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function u(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(s(n));return i.join("")}function c(t){for(var e,r=t.length,n=r%3,i=[],o=0,a=r-n;o<a;o+=16383)i.push(u(t,o,o+16383>a?a:o+16383));return 1===n?(e=t[r-1],i.push(l[e>>2]+l[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(l[e>>10]+l[e>>4&63]+l[e<<2&63]+"=")),i.join("")}e.byteLength=i,e.toByteArray=a,e.fromByteArray=c;for(var l=[],f=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,y=h.length;d<y;++d)l[d]=h[d],f[h.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,p=r?-1:1,h=t[e+f];for(f+=p,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=c}return(h?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?p/u:p*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+h]=255&a,h+=d,a/=256,c-=8);t[r+h-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,r){t.copy(e,r)}var o=r(18).Buffer,a=r(93);t.exports=function(){function t(){n(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e=o.allocUnsafe(t>>>0),r=this.head,n=0;r;)i(r.data,e,n),n+=r.data.length,r=r.next;return e},t}(),a&&a.inspect&&a.inspect.custom&&(t.exports.prototype[a.inspect.custom]=function(){var t=a.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(t){function n(t,e){this._id=t,this._clearFn=e}var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new n(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new n(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(95),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,r(4))},function(t,e,r){(function(t,e){!function(t,r){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return c[u]=n,s(u),u++}function i(t){delete c[t]}function o(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}function a(t){if(l)setTimeout(a,0,t);else{var e=c[t];if(e){l=!0;try{o(e)}finally{i(t),l=!1}}}}if(!t.setImmediate){var s,u=1,c={},l=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&a(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),s=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},s=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;s=function(e){var r=f.createElement("script");r.onreadystatechange=function(){a(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():function(){s=function(t){setTimeout(a,0,t)}}(),p.setImmediate=n,p.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,r(4),r(16))},function(t,e,r){(function(e){function r(t,e){function r(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(n("noDeprecation"))return t;var i=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(e,r(4))},function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);i.call(this,t)}t.exports=n;var i=r(37),o=r(11);o.inherits=r(9),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(23)},function(t,e,r){t.exports=r(5)},function(t,e,r){t.exports=r(21).Transform},function(t,e,r){t.exports=r(21).PassThrough},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(10),s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t){function e(t,r,o,a,s,u,c){n(this,e);var l=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return l._playerId=o,l._name=a,l._rank=s,l._legendRank=u,l._conceded=c,l}return o(e,t),s(e,[{key:"toString",value:function(){return"Player #"+this.id+" (playerId: "+this.playerId+', name: "'+this.name+'")'}},{key:"factory",value:function(t,r){return 8===this.getTag(17)&&(this._conceded=!0),new e(this.id,t,this.playerId,this.name,this.rank,this.legendRank,this.conceded)}},{key:"playerId",get:function(){return this._playerId}},{key:"name",get:function(){return this._name}},{key:"rank",get:function(){return this._rank}},{key:"legendRank",get:function(){return this._legendRank}},{key:"conceded",get:function(){return this._conceded}}]),e}(a.a);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(2),o=(r.n(i),r(25)),a=r(26),s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(){function t(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,t),this.entityId=e,this.cardId=r,this.tags=i,this.replaceTags=o}return s(t,[{key:"applyTo",value:function(t){var e=this,r=+this.entityId,n=t.getEntity(r);if(!n)return console.error("Cannot show non-existent entity #"+r),t;var s=n.setCardId(this.cardId);this.replaceTags&&(s=s.setTags(i.Map())),s=s.setTags(this.tags);var u=[];return this.tags.forEach(function(t,i){u.push({entity:r,tag:+i,previous:e.replaceTags?null:n.getTags().has(i)?n.getTag(+i):null,current:t})}),t.apply(new o.a(s)).apply(new a.a(u))}}]),t}();e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r){n(this,t),this._index=e,this._entityId=r}return i(t,[{key:"index",get:function(){return this._index}},{key:"entityId",get:function(){return this._entityId}}]),t}();e.a=o},function(t,e,r){(function(t){!function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=e.MAX_BUFFER_LENGTH,i.opt=r||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=q.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(L)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),d(i,"onready")}function i(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),n=0,i=0,o=A.length;i<o;i++){var a=t[A[i]].length;if(a>r)switch(A[i]){case"textNode":g(t);break;case"cdata":y(t,"oncdata",t.cdata),t.cdata="";break;case"script":y(t,"onscript",t.script),t.script="";break;default:m(t,"Max buffer length exceeded: "+A[i])}n=Math.max(n,a)}var s=e.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=s+t.position}function o(t){for(var e=0,r=A.length;e<r;e++)t[A[e]]=""}function a(t){g(t),""!==t.cdata&&(y(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(y(t,"onscript",t.script),t.script="")}function s(t,e){return new u(t,e)}function u(t,e){if(!(this instanceof u))return new u(t,e);D.apply(this),this._parser=new n(t,e),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(t){r.emit("error",t),r._parser.error=null},this._decoder=null,x.forEach(function(t){Object.defineProperty(r,"on"+t,{get:function(){return r._parser["on"+t]},set:function(e){if(!e)return r.removeAllListeners(t),r._parser["on"+t]=e,e;r.on(t,e)},enumerable:!0,configurable:!1})})}function c(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function l(t){return'"'===t||"'"===t}function f(t){return">"===t||c(t)}function p(t,e){return t.test(e)}function h(t,e){return!p(t,e)}function d(t,e,r){t[e]&&t[e](r)}function y(t,e,r){t.textNode&&g(t),d(t,e,r)}function g(t){t.textNode=v(t.opt,t.textNode),t.textNode&&d(t,"ontext",t.textNode),t.textNode=""}function v(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function m(t,e){return g(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,d(t,"onerror",e),t}function _(t){return t.sawRoot&&!t.closedRoot&&b(t,"Unclosed root tag"),t.state!==q.BEGIN&&t.state!==q.BEGIN_WHITESPACE&&t.state!==q.TEXT&&m(t,"Unexpected end"),g(t),t.c="",t.closed=!0,d(t,"onend"),n.call(t,t.strict,t.opt),t}function b(t,e){if("object"!=typeof t||!(t instanceof n))throw new Error("bad call to strictFail");t.strict&&m(t,e)}function w(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,r=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(r.ns=e.ns),t.attribList.length=0,y(t,"onopentagstart",r)}function E(t,e){var r=t.indexOf(":"),n=r<0?["",t]:t.split(":"),i=n[0],o=n[1];return e&&"xmlns"===t&&(i="xmlns",o=""),{prefix:i,local:o}}function k(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))return void(t.attribName=t.attribValue="");if(t.opt.xmlns){var e=E(t.attribName,!0),r=e.prefix,n=e.local;if("xmlns"===r)if("xml"===n&&t.attribValue!==M)b(t,"xml: prefix must be bound to "+M+"\nActual: "+t.attribValue);else if("xmlns"===n&&t.attribValue!==N)b(t,"xmlns: prefix must be bound to "+N+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,y(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}function T(t,e){if(t.opt.xmlns){var r=t.tag,n=E(t.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(b(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),r.uri=n.prefix);var i=t.tags[t.tags.length-1]||t;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(e){y(t,"onopennamespace",{prefix:e,uri:r.ns[e]})});for(var o=0,a=t.attribList.length;o<a;o++){var s=t.attribList[o],u=s[0],c=s[1],l=E(u,!0),f=l.prefix,p=l.local,h=""===f?"":r.ns[f]||"",d={name:u,value:c,prefix:f,local:p,uri:h};f&&"xmlns"!==f&&!h&&(b(t,"Unbound namespace prefix: "+JSON.stringify(f)),d.uri=f),t.tag.attributes[u]=d,y(t,"onattribute",d)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),y(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=q.TEXT:t.state=q.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function O(t){if(!t.tagName)return b(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=q.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=q.SCRIPT);y(t,"onscript",t.script),t.script=""}var e=t.tags.length,r=t.tagName;t.strict||(r=r[t.looseCase]());for(var n=r;e--;){if(t.tags[e].name===n)break;b(t,"Unexpected close tag")}if(e<0)return b(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=q.TEXT);t.tagName=r;for(var i=t.tags.length;i-- >e;){var o=t.tag=t.tags.pop();t.tagName=t.tag.name,y(t,"onclosetag",t.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var u=t.tags[t.tags.length-1]||t;t.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach(function(e){var r=o.ns[e];y(t,"onclosenamespace",{prefix:e,uri:r})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=q.TEXT}function S(t){var e,r=t.entity,n=r.toLowerCase(),i="";return t.ENTITIES[r]?t.ENTITIES[r]:t.ENTITIES[n]?t.ENTITIES[n]:(r=n,"#"===r.charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),e=parseInt(r,16),i=e.toString(16)):(r=r.slice(1),e=parseInt(r,10),i=e.toString(10))),r=r.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==r?(b(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function j(t,e){"<"===e?(t.state=q.OPEN_WAKA,t.startTagPosition=t.position):c(e)||(b(t,"Non-whitespace before first tag."),t.textNode=e,t.state=q.TEXT)}function I(t,e){var r="";return e<t.length&&(r=t.charAt(e)),r}function C(t){var e=this;if(this.error)throw this.error;if(e.closed)return m(e,"Cannot write after close. Assign an onready handler.");if(null===t)return _(e);"object"==typeof t&&(t=t.toString());for(var r=0,n="";;){if(n=I(t,r++),e.c=n,!n)break;switch(e.trackPosition&&(e.position++,"\n"===n?(e.line++,e.column=0):e.column++),e.state){case q.BEGIN:if(e.state=q.BEGIN_WHITESPACE,"\ufeff"===n)continue;j(e,n);continue;case q.BEGIN_WHITESPACE:j(e,n);continue;case q.TEXT:if(e.sawRoot&&!e.closedRoot){for(var o=r-1;n&&"<"!==n&&"&"!==n;)(n=I(t,r++))&&e.trackPosition&&(e.position++,"\n"===n?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(o,r-1)}"<"!==n||e.sawRoot&&e.closedRoot&&!e.strict?(c(n)||e.sawRoot&&!e.closedRoot||b(e,"Text data outside of root node."),"&"===n?e.state=q.TEXT_ENTITY:e.textNode+=n):(e.state=q.OPEN_WAKA,e.startTagPosition=e.position);continue;case q.SCRIPT:"<"===n?e.state=q.SCRIPT_ENDING:e.script+=n;continue;case q.SCRIPT_ENDING:"/"===n?e.state=q.CLOSE_TAG:(e.script+="<"+n,e.state=q.SCRIPT);continue;case q.OPEN_WAKA:if("!"===n)e.state=q.SGML_DECL,e.sgmlDecl="";else if(c(n));else if(p(B,n))e.state=q.OPEN_TAG,e.tagName=n;else if("/"===n)e.state=q.CLOSE_TAG,e.tagName="";else if("?"===n)e.state=q.PROC_INST,e.procInstName=e.procInstBody="";else{if(b(e,"Unencoded <"),e.startTagPosition+1<e.position){var a=e.position-e.startTagPosition;n=new Array(a).join(" ")+n}e.textNode+="<"+n,e.state=q.TEXT}continue;case q.SGML_DECL:(e.sgmlDecl+n).toUpperCase()===P?(y(e,"onopencdata"),e.state=q.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+n==="--"?(e.state=q.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+n).toUpperCase()===R?(e.state=q.DOCTYPE,(e.doctype||e.sawRoot)&&b(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===n?(y(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=q.TEXT):l(n)?(e.state=q.SGML_DECL_QUOTED,e.sgmlDecl+=n):e.sgmlDecl+=n;continue;case q.SGML_DECL_QUOTED:n===e.q&&(e.state=q.SGML_DECL,e.q=""),e.sgmlDecl+=n;continue;case q.DOCTYPE:">"===n?(e.state=q.TEXT,y(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=n,"["===n?e.state=q.DOCTYPE_DTD:l(n)&&(e.state=q.DOCTYPE_QUOTED,e.q=n));continue;case q.DOCTYPE_QUOTED:e.doctype+=n,n===e.q&&(e.q="",e.state=q.DOCTYPE);continue;case q.DOCTYPE_DTD:e.doctype+=n,"]"===n?e.state=q.DOCTYPE:l(n)&&(e.state=q.DOCTYPE_DTD_QUOTED,e.q=n);continue;case q.DOCTYPE_DTD_QUOTED:e.doctype+=n,n===e.q&&(e.state=q.DOCTYPE_DTD,e.q="");continue;case q.COMMENT:"-"===n?e.state=q.COMMENT_ENDING:e.comment+=n;continue;case q.COMMENT_ENDING:"-"===n?(e.state=q.COMMENT_ENDED,e.comment=v(e.opt,e.comment),e.comment&&y(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+n,e.state=q.COMMENT);continue;case q.COMMENT_ENDED:">"!==n?(b(e,"Malformed comment"),e.comment+="--"+n,e.state=q.COMMENT):e.state=q.TEXT;continue;case q.CDATA:"]"===n?e.state=q.CDATA_ENDING:e.cdata+=n;continue;case q.CDATA_ENDING:"]"===n?e.state=q.CDATA_ENDING_2:(e.cdata+="]"+n,e.state=q.CDATA);continue;case q.CDATA_ENDING_2:">"===n?(e.cdata&&y(e,"oncdata",e.cdata),y(e,"onclosecdata"),e.cdata="",e.state=q.TEXT):"]"===n?e.cdata+="]":(e.cdata+="]]"+n,e.state=q.CDATA);continue;case q.PROC_INST:"?"===n?e.state=q.PROC_INST_ENDING:c(n)?e.state=q.PROC_INST_BODY:e.procInstName+=n;continue;case q.PROC_INST_BODY:if(!e.procInstBody&&c(n))continue;"?"===n?e.state=q.PROC_INST_ENDING:e.procInstBody+=n;continue;case q.PROC_INST_ENDING:">"===n?(y(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=q.TEXT):(e.procInstBody+="?"+n,e.state=q.PROC_INST_BODY);continue;case q.OPEN_TAG:p(U,n)?e.tagName+=n:(w(e),">"===n?T(e):"/"===n?e.state=q.OPEN_TAG_SLASH:(c(n)||b(e,"Invalid character in tag name"),e.state=q.ATTRIB));continue;case q.OPEN_TAG_SLASH:">"===n?(T(e,!0),O(e)):(b(e,"Forward-slash in opening tag not followed by >"),e.state=q.ATTRIB);continue;case q.ATTRIB:if(c(n))continue;">"===n?T(e):"/"===n?e.state=q.OPEN_TAG_SLASH:p(B,n)?(e.attribName=n,e.attribValue="",e.state=q.ATTRIB_NAME):b(e,"Invalid attribute name");continue;case q.ATTRIB_NAME:"="===n?e.state=q.ATTRIB_VALUE:">"===n?(b(e,"Attribute without value"),e.attribValue=e.attribName,k(e),T(e)):c(n)?e.state=q.ATTRIB_NAME_SAW_WHITE:p(U,n)?e.attribName+=n:b(e,"Invalid attribute name");continue;case q.ATTRIB_NAME_SAW_WHITE:if("="===n)e.state=q.ATTRIB_VALUE;else{if(c(n))continue;b(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",y(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===n?T(e):p(B,n)?(e.attribName=n,e.state=q.ATTRIB_NAME):(b(e,"Invalid attribute name"),e.state=q.ATTRIB)}continue;case q.ATTRIB_VALUE:if(c(n))continue;l(n)?(e.q=n,e.state=q.ATTRIB_VALUE_QUOTED):(b(e,"Unquoted attribute value"),e.state=q.ATTRIB_VALUE_UNQUOTED,e.attribValue=n);continue;case q.ATTRIB_VALUE_QUOTED:if(n!==e.q){"&"===n?e.state=q.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=n;continue}k(e),e.q="",e.state=q.ATTRIB_VALUE_CLOSED;continue;case q.ATTRIB_VALUE_CLOSED:c(n)?e.state=q.ATTRIB:">"===n?T(e):"/"===n?e.state=q.OPEN_TAG_SLASH:p(B,n)?(b(e,"No whitespace between attributes"),e.attribName=n,e.attribValue="",e.state=q.ATTRIB_NAME):b(e,"Invalid attribute name");continue;case q.ATTRIB_VALUE_UNQUOTED:if(!f(n)){"&"===n?e.state=q.ATTRIB_VALUE_ENTITY_U:e.attribValue+=n;continue}k(e),">"===n?T(e):e.state=q.ATTRIB;continue;case q.CLOSE_TAG:if(e.tagName)">"===n?O(e):p(U,n)?e.tagName+=n:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=q.SCRIPT):(c(n)||b(e,"Invalid tagname in closing tag"),e.state=q.CLOSE_TAG_SAW_WHITE);else{if(c(n))continue;h(B,n)?e.script?(e.script+="</"+n,e.state=q.SCRIPT):b(e,"Invalid tagname in closing tag."):e.tagName=n}continue;case q.CLOSE_TAG_SAW_WHITE:if(c(n))continue;">"===n?O(e):b(e,"Invalid characters in closing tag");continue;case q.TEXT_ENTITY:case q.ATTRIB_VALUE_ENTITY_Q:case q.ATTRIB_VALUE_ENTITY_U:var s,u;switch(e.state){case q.TEXT_ENTITY:s=q.TEXT,u="textNode";break;case q.ATTRIB_VALUE_ENTITY_Q:s=q.ATTRIB_VALUE_QUOTED,u="attribValue";break;case q.ATTRIB_VALUE_ENTITY_U:s=q.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===n?(e[u]+=S(e),e.entity="",e.state=s):p(e.entity.length?F:z,n)?e.entity+=n:(b(e,"Invalid character in entity name"),e[u]+="&"+e.entity+n,e.entity="",e.state=s);continue;default:throw new Error(e,"Unknown state: "+e.state)}}return e.position>=e.bufferCheckPosition&&i(e),e}e.parser=function(t,e){return new n(t,e)},e.SAXParser=n,e.SAXStream=u,e.createStream=s,e.MAX_BUFFER_LENGTH=65536;var A=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),n.prototype={end:function(){_(this)},write:C,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var D;try{D=r(8).Stream}catch(t){D=function(){}}var x=e.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});u.prototype=Object.create(D.prototype,{constructor:{value:u}}),u.prototype.write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var n=r(24).StringDecoder;this._decoder=new n("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},u.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},u.prototype.on=function(t,e){var r=this;return r._parser["on"+t]||-1===x.indexOf(t)||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),D.prototype.on.call(r,t,e)};var P="[CDATA[",R="DOCTYPE",M="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/2000/xmlns/",L={xml:M,xmlns:N},B=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,q=0;e.STATE={BEGIN:q++,BEGIN_WHITESPACE:q++,TEXT:q++,TEXT_ENTITY:q++,OPEN_WAKA:q++,SGML_DECL:q++,SGML_DECL_QUOTED:q++,DOCTYPE:q++,DOCTYPE_QUOTED:q++,DOCTYPE_DTD:q++,DOCTYPE_DTD_QUOTED:q++,COMMENT_STARTING:q++,COMMENT:q++,COMMENT_ENDING:q++,COMMENT_ENDED:q++,CDATA:q++,CDATA_ENDING:q++,CDATA_ENDING_2:q++,PROC_INST:q++,PROC_INST_BODY:q++,PROC_INST_ENDING:q++,OPEN_TAG:q++,OPEN_TAG_SLASH:q++,ATTRIB:q++,ATTRIB_NAME:q++,ATTRIB_NAME_SAW_WHITE:q++,ATTRIB_VALUE:q++,ATTRIB_VALUE_QUOTED:q++,ATTRIB_VALUE_CLOSED:q++,ATTRIB_VALUE_UNQUOTED:q++,ATTRIB_VALUE_ENTITY_Q:q++,ATTRIB_VALUE_ENTITY_U:q++,CLOSE_TAG:q++,CLOSE_TAG_SAW_WHITE:q++,SCRIPT:q++,SCRIPT_ENDING:q++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n});for(var W in e.STATE)e.STATE[e.STATE[W]]=W;q=e.STATE,String.fromCodePoint||function(){var t=String.fromCharCode,e=Math.floor,r=function(){var r,n,i=[],o=-1,a=arguments.length;if(!a)return"";for(var s="";++o<a;){var u=Number(arguments[o]);if(!isFinite(u)||u<0||u>1114111||e(u)!==u)throw RangeError("Invalid code point: "+u);u<=65535?i.push(u):(u-=65536,r=55296+(u>>10),n=u%1024+56320,i.push(r,n)),(o+1===a||i.length>16384)&&(s+=t.apply(null,i),i.length=0)}return s};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:r,configurable:!0,writable:!0}):String.fromCodePoint=r}()}(e)}).call(e,r(22).Buffer)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(e){n(this,t),this.player=e}return o(t,[{key:"applyTo",value:function(t){if(!this.player)return console.error("Missing player"),t;var e=t.choices,r=t.choices.delete(+this.player);return r===e?t:new i.a(t.entities,t.entityTree,t.options,t.optionTree.clear(),t.time,r,t.descriptors,t.diffs)}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r){n(this,t),this._choices=e,this._type=r}return i(t,[{key:"choices",get:function(){return this._choices}},{key:"type",get:function(){return this._type}}]),t}();e.a=o},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(2),o=(r.n(i),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),a=function(){function t(e,r,o){n(this,t),this._type=e,this._data=r,this._entities=o,this._entities||(this._entities=i.Set())}return o(t,[{key:"type",get:function(){return this._type}},{key:"data",get:function(){return this._data}},{key:"entities",get:function(){return this._entities}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(25),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(e,r){n(this,t),this.id=+e,this.zone=+r}return o(t,[{key:"applyTo",value:function(t){var e=t.getEntity(this.id);if(!e)return console.error("Cannot hide non-existent entity #"+this.id),t;var r=e.getTags();r=r.set("49",this.zone);var n=e.replaceTags(r).setCardId(null);return t.apply(new i.a(n))}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(8),s=(r.n(a),r(111)),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(t,r,o){n(this,e),o=o||{},o.objectMode=!0,o.allowHalfOpen=!0;var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return a.interval=null,a.initialTime=null,a.currentTime=0,a.speed=1,a.multiplier=1.5,a.history=t||new s.a,a.lastState=null,a.endTime=null,a.hasEmittedReady=!1,a.hasStarted=!1,a.startFromTurn=r||null,a.timeSeen=[],a}return o(e,t),u(e,[{key:"_write",value:function(t,e,r){var n=t.time,i=!1;null!==n&&(null===this.initialTime&&(this.initialTime=n,i=!0),this.history.push(t),(null===this.endTime||n>this.endTime)&&(this.endTime=n)),!this.hasStarted&&0===this.currentTime&&this.startFromTurn&&(i=!1,this.history.turnMap.has(this.startFromTurn)&&(this.currentTime=this.history.turnMap.get(this.startFromTurn).time,i=!0)),i&&(this.emit("ready"),this.hasEmittedReady=!0,this.update()),r()}},{key:"_read",value:function(){}},{key:"end",value:function(){this.hasEmittedReady||(this.emit("ready"),this.hasEmittedReady=!0,this.update())}},{key:"play",value:function(){this.lastUpdate=(new Date).getTime(),this.interval=setInterval(this.update.bind(this),100),this.hasStarted=!0,this.emit("play"),this.lastState=null,this.update()}},{key:"pausePlayback",value:function(){null!==this.interval&&(clearInterval(this.interval),this.interval=null),this.emit("pause"),this.update()}},{key:"toggle",value:function(){this.isPlaying()?this.pausePlayback():this.play()}},{key:"update",value:function(){if(null!==this.initialTime){var t=this.currentTurn;if(this.timeSeen[Math.floor(this.currentTime)]=!0,this.isPlaying()&&0!=this.speed){var e=(new Date).getTime(),r=(e-this.lastUpdate)*this.speed*this.multiplier;if(this.lastUpdate=e,!this.isInhibited()&&(this.currentTime+=r/1e3,this.hasEnded()))return this.currentTime=this.endTime-this.initialTime,void this.pausePlayback()}var n=this.history.getLatest(this.currentTime+this.initialTime);n!==this.lastState&&(this.lastState=n,this.push(n));var i=this.currentTurn;t!==i&&this.emit("turn",i),this.emit("update")}}},{key:"seek",value:function(t){t!==this.currentTime&&(this.currentTime=t,this.update())}},{key:"isPlaying",value:function(){return null!==this.interval}},{key:"isPlaybackPaused",value:function(){return!this.isPlaying()}},{key:"rewind",value:function(){this.currentTime=0,this.update()}},{key:"fastForward",value:function(){this.currentTime=this.endTime-this.initialTime,this.pausePlayback()}},{key:"setSpeed",value:function(t){this.speed=t,this.update()}},{key:"getSpeed",value:function(){return this.speed}},{key:"canInteract",value:function(){return this.hasStarted}},{key:"canRewind",value:function(){return this.currentTime>0||this.isPlaying()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"hasEnded",value:function(){return this.currentTime+this.initialTime>=this.endTime}},{key:"canPlay",value:function(){return!this.hasEnded()&&this.canInteract()}},{key:"getHistory",value:function(){return this.history}},{key:"getDuration",value:function(){return Math.max(this.endTime-this.initialTime,0)}},{key:"setInhibitor",value:function(t){this.inhibitor=t}},{key:"isInhibited",value:function(){return this.inhibitor&&this.inhibitor.isInhibiting()}},{key:"getCurrentTurn",value:function(){return this.currentTurn}},{key:"nextTurn",value:function(){var t=this.endTime-this.initialTime,e=this.currentTurn;this.currentTime<this.history.turnMap.first().time&&e--;for(var r=e+1;!this.history.turnMap.has(r)&&r<this.history.turnMap.count();)r++;this.history.turnMap.has(r)&&(t=this.history.turnMap.get(r).time),this.currentTime=t,this.update()}},{key:"previousTurn",value:function(){for(var t=this.initialTime,e=this.currentTurn-1;!this.history.turnMap.has(e)&&e>0;)e--;this.history.turnMap.has(e)&&(t=this.history.turnMap.get(e).time),this.currentTime=t,this.update()}},{key:"skipBack",value:function(){var t=this.history.turnMap.get(this.currentTurn);if(!t)return void this.previousTurn();var e=t.time;this.currentTime-e>(this.isPlaying()?1.5*this.speed*this.multiplier:0)?(this.currentTime=e,this.update()):this.previousTurn()}},{key:"nextAction",value:function(){this.history.getLatest(this.currentTime);var t=this.history.pointer.next;t&&(this.currentTime=t.state.time,this.update())}},{key:"previousAction",value:function(){this.history.getLatest(this.currentTime);var t=this.history.pointer.prev;t&&(this.currentTime=t.state.time,this.update())}},{key:"currentTurn",get:function(){if(!this.lastState)return null;var t=this.lastState.game;if(!t)return null;if(this.history.turnMap.isEmpty())return 0;var e=this.history.turnMap.get(1);return e&&this.lastState.time<e.time?0:t.getTag(20)||0}},{key:"secondsWatched",get:function(){for(var t=-1,e=0;e<this.timeSeen.length;e++)this.timeSeen[e]&&t++;return t}},{key:"percentageWatched",get:function(){var t=100/Math.floor(this.getDuration())*this.secondsWatched;return isFinite(t)||(t=0),t}}]),e}(a.Duplex);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(2),o=(r.n(i),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),a=function(){function t(){n(this,t),this.tail=null,this.head=null,this.pointer=null,this.turnMap=i.OrderedMap()}return o(t,[{key:"push",value:function(t){var e=t.time;if("number"==typeof e){var r=t.game;if(r){var n=r.getTag(20);if(!this.turnMap.has(n)&&n>0){var i=r.getTag(19),o=!(0===i||4===i)&&t.getPlayerCount()>0;(9===i||this.turnMap.isEmpty()&&o)&&(this.turnMap=this.turnMap.set(n,t))}}if(!this.tail&&!this.head){var a={state:t};return this.tail=a,this.head=a,void(this.pointer=a)}if(e>this.head.state.time){var s={state:t,prev:this.head};this.head.next=s,this.head=s}else e===this.head.state.time?this.head.state=t:console.error("Replay contains out-of-order timestamps")}}},{key:"getLatest",value:function(t){if(!this.pointer)return null;for(;this.pointer.state.time<t&&this.pointer.next&&!(this.pointer.next.state.time>t);)this.pointer=this.pointer.next;for(;this.pointer.state.time>t&&this.pointer.prev;)this.pointer=this.pointer.prev;return this.pointer.state}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(8),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(){n(this,e);var t={};return t.objectMode=!0,i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),s(e,[{key:"_write",value:function(t,e,r){this.emit("gamestate",t),r()}}]),e}(a.Writable);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(8),u=(r.n(s),r(114)),c=r(117),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function(t){function e(t,r){n(this,e),r=r||{},r.objectMode=!0;var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return o.gameState=t||new a.a(void 0,void 0,void 0,void 0,0),o.plugins=[],o.registerPlugin(new u.a),o.registerPlugin(new c.a),o}return o(e,t),l(e,[{key:"registerPlugin",value:function(t){this.plugins.push(t)}},{key:"_transform",value:function(t,e,r){var n=this,i=this.gameState;this.gameState=this.plugins.reduce(function(e,r){return r.onBeforeMutate(t,e)||e},i),this.gameState=this.gameState.apply(t),this.push(this.gameState),this.gameState=this.plugins.reduce(function(e,r){return r.onAfterMutate(t,n.gameState)||e},this.gameState),this.push(this.gameState),r()}}]),e}(s.Transform);e.a=f},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(43),s=r(42),u=r(115),c=r(41),l=r(38),f=r(116),p=r(33),h=r(44),d=r(3),y=(r.n(d),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),g=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.lastDescriptorType=null,t.waitAtNextBlockOrEndOfBlock=!1,t.mulliganChoicesSeen=0,t.lastDescriptorEntityId=null,t.upcomingMetadataTargets=[],t.hasSteppedThisBlock=!1,t}return o(e,t),y(e,[{key:"onBeforeMutate",value:function(t,e){var r=0;if(t instanceof s.a&&9===this.lastDescriptorType&&(r=2),r)return e.apply(new u.a(r))}},{key:"onAfterMutate",value:function(t,e){var r=0,n=e.game?e.game.getTag(19):0;if(this.waitAtNextBlockOrEndOfBlock&&(t instanceof s.a||t instanceof c.a)&&(r=2,this.waitAtNextBlockOrEndOfBlock=!1),t instanceof c.a)switch(this.lastDescriptorEntityId=t.descriptor.entityId,this.lastDescriptorType=t.descriptor.type,t.descriptor.type){case 7:this.waitAtNextBlockOrEndOfBlock=!0;break;case 9:r=2;break;case 5:if(!r)if(t.descriptor.entityId>3&&0!==n){var i=e.getEntity(t.descriptor.entityId);r=i&&i.getTag(410)&&968===t.descriptor.triggerKeyword?3:1}else switch(n){case 9:r=1;break;case 10:r=1.5}break;case 1:r=1;break;case 3:r||(r=1);break;default:r||(r=1.5)}if(t instanceof s.a&&(r||this.lastDescriptorEntityId>3&&0!==n&&(5===this.lastDescriptorType?r=1:7===this.lastDescriptorType?e.descriptor||(r=1):this.hasSteppedThisBlock||(r=2,this.hasSteppedThisBlock=!0)),this.upcomingMetadataTargets.length&&(this.upcomingMetadataTargets=[]),this.lastDescriptorType=e.descriptor?e.descriptor.type:null),t instanceof a.a){var o=t.metaData.entities.toArray();1!==this.lastDescriptorType&&(0===t.metaData.type&&(this.upcomingMetadataTargets=d.merge(this.upcomingMetadataTargets,o)),1!==t.metaData.type&&2!==t.metaData.type||(this.upcomingMetadataTargets=d.difference(this.upcomingMetadataTargets,o),this.upcomingMetadataTargets.length||(this.hasSteppedThisBlock=!0,r=o.length>1?2:1)))}if(t instanceof l.a&&1===this.lastDescriptorType&&37===t.tag&&0===t.value&&(r=1),t instanceof f.a&&(r=0),t instanceof p.a&&(4===n?++this.mulliganChoicesSeen>=2&&(r=6):r=4),r)return e.apply(new u.a(r))}}]),e}(h.a);e.a=g},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n(this,t),this.time=e}return o(t,[{key:"applyTo",value:function(t){if(0===this.time&&null!==t.time)return t;var e=t.time;return null===e?e=0:e+=this.time,e===t.time?t:new i.a(t.entities,t.entityTree,t.options,t.optionTree,e,t.choices,t.descriptors,t.diffs.clear())}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(2),o=(r.n(i),r(1)),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this.options=e}return a(t,[{key:"applyTo",value:function(t){var e=t.options;if(this.options===e)return t;var r=this.buildOptionTree(this.options,t.entities);return new o.a(t.entities,t.entityTree,this.options,r,t.time,t.choices,t.descriptors,t.diffs)}},{key:"buildOptionTree",value:function(t,e){var r=i.Map();return r=r.withMutations(function(r){t.forEach(function(t){if(t.entityId){var n=e.get(t.entityId);r=r.setIn([n.getController(),n.getZone(),n.id],t)}})})}}]),t}();e.a=s},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(44),s=r(39),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"onBeforeMutate",value:function(t,e){if(t instanceof s.a){var r=t.entity;if(this.isCoin(r,e)){var n=r.setCardId("GAME_005");t.entity=n}}}},{key:"isCoin",value:function(t,e){var r=null;return!t.cardId&&3===t.getTag(49)&&5===t.getTag(263)&&0===e.game.getTag(305)&&0===e.game.getTag(19)&&(r=e.getPlayer(t.getTag(50)))&&!r.getTag(24)}}]),e}(a.a);e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(8),s=(r.n(a),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),u=function(t){function e(t,r){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{objectMode:!0}));return o.cardArt=t,o.assets=r,o.fired={},o.cardArtQueue=["GAME_005"],o.images=[],o.working=0,o.assetQueue=["cardback","hero_frame","hero_power","inhand_mulligan","inhand_minion_neutral","inhand_spell_neutral","inhand_weapon_neutral","inhand_minion_legendary","mana_crystal","inplay_minion","effect_sleep","hero_power_exhausted","hero_armor","hero_attack","icon_deathrattle","icon_inspire","icon_poisonous","icon_trigger","inplay_minion_frozen","inplay_minion_legendary","inplay_minion_taunt","inplay_minion_divine_shield","inplay_minion_stealth","inplay_weapon","inplay_weapon_dome","healing","damage","skull","inplay_hero_frozen","inplay_hero_immune","inplay_minion_buffed","inplay_minion_enraged","inplay_minion_immune","inplay_minion_silenced","inplay_minion_untargetable"],o.consume(),o}return o(e,t),s(e,[{key:"_write",value:function(t,e,r){var n=t,i=null;if(n.entity){i=n.entity.cardId}i=i||n.cardId,i&&(this.cardArtQueue.push(i),this.consume()),r()}},{key:"consume",value:function(){var t=this;if(!(this.working>=1024)&&(this.cardArt&&this.cardArtQueue.length||this.assets&&this.assetQueue.length)){this.working++;var e=function(){t.working--,t.consume()},r=this.assetQueue.shift();if(this.assets&&r)r=this.assets("images/"+r+".png");else{var n=this.cardArtQueue.shift();r=this.cardArt(n)}if(this.fired[r])return void e();this.fired[r]=!0;var i=new Image;i.onload=e,i.onerror=e,i.src=r,this.images[this.images.length]=i,this.consume()}}},{key:"canPreload",value:function(){return!!this.assets||!!this.cardArt}},{key:"isDone",value:function(){return this.cardArtQueue.length+this.assetQueue.length+this.working==0}}]),e}(a.Writable);e.a=u}]);
//# sourceMappingURL=joust.js.map